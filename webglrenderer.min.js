!function t(e,n,r){function a(i,u){if(!n[i]){if(!e[i]){var l="function"==typeof require&&require;if(!u&&l)return l(i,!0);if(o)return o(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var c=n[i]={exports:{}};e[i][0].call(c.exports,function(t){var n=e[i][1][t];return a(n||t)},c,c.exports,t,e,n,r)}return n[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(t,e,n){window.Renderer=t("./renderer"),window.Camera=t("./camera"),window.Framebuffer=t("./framebuffer")},{"./camera":2,"./framebuffer":3,"./renderer":7}],2:[function(t,e,n){"use strict";const r=t("gl-matrix"),a=r.vec3,o=r.mat4,i=t("./lvrl/fly"),u=t("./lvrl/examine"),l=t("./timer");e.exports=function(){var t=this;let e=new u,n=new i,r=null,s={x:0,y:0,mousePress:!1},c={yawIntensity:0,pitchIntensity:0,pivot:a.fromValues(0,0,0),angularVelocity:0,zoomIntensity:0,maximumZoom:0,velocity:a.fromValues(0,0,0),forward:0,backward:0,left:0,right:0,up:0,down:0},f=!1,h=1,d=1,m=0;this.rotate=function(t,e){c.yawIntensity=t,c.pitchIntensity=e},this.zoom=function(t){c.zoomIntensity=t},this.setViewMatrix=function(t){f=!0,r.setViewMatrix(t)},this.getViewMatrix=function(){return r.getViewMatrix()},this.setCamera=function(t,e,n){let i=o.create();o.lookAt(i,t,e,n),r.setViewMatrix(i),c.pivot=a.clone(e),c.worldUp=a.clone(n),f=!0},this.setFlyMode=function(){if(m=1,r){let t=r.getViewMatrix();n.setViewMatrix(t),n.applyRestrictions(c.worldUp)}r=n},this.setExamineMode=function(){if(m=0,r){let t=r.getViewMatrix();e.setViewMatrix(t)}r=e},this.installCamera=function(e,n){let o=new l;e&&(e.addEventListener("mousedown",function(t){s.mousePress=!0,s.x=t.clientX,s.y=t.clientY}),e.addEventListener("mouseup",function(t){s.mousePress=!1}),e.addEventListener("mousemove",function(e){s.mousePress&&(t.rotate(-s.x+e.clientX,-s.y+e.clientY),s.x=e.clientX,s.y=e.clientY)}),e.addEventListener("wheel",function(e){let n=0;if(e.deltaMode==WheelEvent.DOM_DELTA_PIXEL?n=e.deltaY:e.deltaMode==WheelEvent.DOM_DELTA_LINE?n=33*e.deltaY:e.deltaY>0?n=10:e.delta<0&&(n=-10),0===m)t.zoom(.001*n);else if(1===m){let t=n*d*.1;(h+=t)<Math.abs(t)&&(h=Math.abs(t)),c.velocity=a.fromValues(h,h,h)}}),window.addEventListener("keydown",function(t){(!document.activeElement||"textarea"!==document.activeElement.tagName&&"input"!==document.activeElement.tagName&&"select"!==document.activeElement.tagName)&&(!t.shiftKey||"W"!==t.key&&"w"!==t.key&&"ArrowUp"!==t.key?!t.shiftKey||"S"!==t.key&&"s"!==t.key&&"ArrowDown"!==t.key?"W"===t.key||"w"===t.key||"ArrowUp"===t.key?c.forward=1:"S"===t.key||"s"===t.key||"ArrowDown"===t.key?c.backward=1:"A"===t.key||"a"===t.key||"ArrowLeft"===t.key?c.left=1:"D"!==t.key&&"d"!==t.key&&"ArrowRight"!==t.key||(c.right=1):c.down=1:c.up=1)}),window.addEventListener("keyup",function(t){"W"===t.key||"w"===t.key||"ArrowUp"===t.key?(c.up=0,c.forward=0):"S"===t.key||"s"===t.key||"ArrowDown"===t.key?(c.backward=0,c.down=0):"A"===t.key||"a"===t.key||"ArrowLeft"===t.key?c.left=0:"D"!==t.key&&"d"!==t.key&&"ArrowRight"!==t.key||(c.right=0)}));let i=function(){let t=o.elapsedTime();n&&(r.update(t,c)||f)&&(n(r.getViewMatrix(),t),f=!1),window.requestAnimationFrame(i),o.restart()};n&&n(r.getViewMatrix(),0),i()},this.setVelocity=function(t){d=5,h=t,c.velocity=a.fromValues(h,h,h)};!function(){t.setExamineMode();let e=a.fromValues(0,0,-5),n=a.fromValues(0,0,0),i=a.fromValues(0,1,0),u=o.create();o.lookAt(u,e,n,i),r.setViewMatrix(u),c.pivot=a.clone(n),c.worldUp=a.clone(i),c.angularVelocity=30,c.maximumZoom=1,c.velocity=a.fromValues(h,h,h)}()}},{"./lvrl/examine":4,"./lvrl/fly":5,"./timer":10,"gl-matrix":6}],3:[function(t,e,n){"use strict";function r(t,e,n){function i(){let e=o.createProgram(a.FRAMEBUFFER_VERTEX_SHADER_SOURCE,a.FRAMEBUFFER_FRAGMENT_SHADER_SOURCE,t);e?(t.useProgram(e),r.defaultAttrib=t.getAttribLocation(e,"position"),r.defaultProgram=e,t.useProgram(null)):console.log("Failed to load default framebuffer program")}function u(){t.createBuffer();let e=new Float32Array(12);e[0]=-1,e[1]=1,e[2]=1,e[3]=1,e[4]=-1,e[5]=-1,e[6]=1,e[7]=-1;let n=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,n),t.bufferData(t.ARRAY_BUFFER,e,t.STATIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),r.defaultQuad=n}function l(){M&&(t.bindTexture(t.TEXTURE_2D,M),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.DEPTH_COMPONENT,h,d,0,t.DEPTH_COMPONENT,t.UNSIGNED_INT,null),t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,M,0),t.bindTexture(t.TEXTURE_2D,null))}function s(e,n,r,a,o){t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texImage2D(t.TEXTURE_2D,0,r,h,d,0,a,o,null),t.framebufferTexture2D(t.FRAMEBUFFER,E.COLOR_ATTACHMENT0_WEBGL+n,t.TEXTURE_2D,e,0),t.bindTexture(t.TEXTURE_2D,null),R.push(E.COLOR_ATTACHMENT0_WEBGL+n)}let c=this,f=null,h=e,d=n,m=[],M=null,v=null,E=null,R=[];r.defaultQuad=null,r.defaultShader=null,r.defaultAttrib=null,this.addTexture=function(e,n,r,a){let o=t.createTexture();return s(o,e,n,r,a),m.push({attach:e,internalFormat:n,format:r,type:a,textureId:o}),E.drawBuffersWEBGL(R),m.length-1},this.addDepthTexture=function(){M=t.createTexture(),l()},this.resize=function(t,e){h=t,d=e;for(let t=0;t<m.length;t++){let e=m[t];s(e.textureId,e.attach,e.internalFormat,e.format,e.type)}l()},this.bind=function(){t.bindFramebuffer(t.FRAMEBUFFER,f)},this.release=function(){t.bindFramebuffer(t.FRAMEBUFFER,null)},this.draw=function(e){if(null!==e&&void 0!==e||(e=0),m.length<=0)return void console.log("Framebuffer with no textures!");t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),t.disable(t.DEPTH_TEST),t.useProgram(r.defaultProgram);t.bindBuffer(t.ARRAY_BUFFER,r.defaultQuad),t.enableVertexAttribArray(r.defaultAttrib),t.vertexAttribPointer(r.defaultAttrib,2,t.FLOAT,!1,8,0);let n=t.getUniformLocation(r.defaultProgram,"texSampler"),a=t.getUniformLocation(r.defaultProgram,"size"),o=m[e];t.activeTexture(t.TEXTURE0),t.bindTexture(t.TEXTURE_2D,o.textureId),t.uniform1i(n,0),t.uniform2f(a,0,0),t.drawArrays(t.TRIANGLE_STRIP,0,4),t.disableVertexAttribArray(r.defaultAttrib),t.bindBuffer(t.ARRAY_BUFFER,null),t.useProgram(null),t.enable(t.DEPTH_TEST)},this.loadDefault=function(){c.bind(),c.addTexture(0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE),c.addDepthTexture(),c.release()},this.pick=function(e,n,r){void 0!==r&&null!==r||(r=0);let a=new Uint8Array(4);return t.readPixels(e,n,1,1,t.RGBA,t.UNSIGNED_BYTE,a),a};t?(r.defaultQuad||(u(),i()),(v=t.getExtension("WEBGL_depth_texture"))&&console.log("Context has WEBGL_depth_texture"),(E=t.getExtension("WEBGL_draw_buffers"))&&console.log("Context has WEBGL_draw_buffers"),window._drawBufferExt=E,f=t.createFramebuffer()):console.log("Invalid context")}const a=t("./shaders"),o=t("./shaderbuilder");t("gl-matrix").vec2;e.exports=r},{"./shaderbuilder":8,"./shaders":9,"gl-matrix":6}],4:[function(t,e,n){"use strict";const r=t("gl-matrix"),a=r.vec3,o=r.vec4,i=r.mat4,u=r.glMatrix;e.exports=function(){var t=!1,e=i.create(),n=i.create();this.setViewMatrix=function(r){t=!1,e=i.clone(r),n=i.clone(r)},this.getViewMatrix=function(){return e},this.update=function(r,l){if(u.equals(l.yawIntensity,0)&&u.equals(l.pitchIntensity,0)&&u.equals(l.zoomIntensity,0)&&!t)return!1;{let s=i.clone(e);if(t&&(s=i.clone(n)),!u.equals(l.yawIntensity,0)||!u.equals(l.pitchIntensity,0)){let t=a.fromValues(l.pivot[0],l.pivot[1],l.pivot[2]);a.transformMat4(t,t,s);let e=i.create();i.translate(e,e,t);let n=i.create(),c=a.fromValues(-t[0],-t[1],-t[2]);if(i.translate(n,n,c),!l.lockUpRotation){let t=u.toRadian(l.yawIntensity*l.angularVelocity*r),c=o.fromValues(l.worldUp[0],l.worldUp[1],l.worldUp[2],0);o.transformMat4(c,c,s);let f=a.fromValues(c[0],c[1],c[2]);a.normalize(f,f);let h=i.create();i.rotate(h,h,t,f),i.multiply(s,n,s),i.multiply(s,h,s),i.multiply(s,e,s)}if(!l.lockRightRotation){let t=i.create();i.invert(t,s);let o=a.fromValues(-t[8],-t[9],-t[10]);a.normalize(o,o);let c=Math.acos(a.dot(l.worldUp,o)),f=u.toRadian(l.pitchIntensity*l.angularVelocity*r),h=c+f;if(h<Math.PI&&h>0){let t=i.create();i.rotate(t,t,f,a.fromValues(1,0,0)),i.multiply(s,n,s),i.multiply(s,t,s),i.multiply(s,e,s)}}l.yawIntensity=0,l.pitchIntensity=0}if(!u.equals(l.zoomIntensity,0)){let t=i.create();i.invert(t,s);let e=a.fromValues(t[12],t[13],t[14]),n=a.fromValues(l.pivot[0],l.pivot[1],l.pivot[2]);if(!(u.equals(e[0],n[0])&&u.equals(e[1],n[1])&&u.equals(e[2],n[2]))){let t=a.create();a.normalize(t,a.fromValues(n[0]-e[0],n[1]-e[1],n[2]-e[2]));let r=a.distance(n,e),o=r*l.zoomIntensity;if(r+o>l.maximumZoom){let e=i.create();i.translate(e,e,a.fromValues(t[0]*o,t[1]*o,t[2]*o)),i.multiply(s,s,e)}}l.zoomIntensity=0}return e=i.clone(s),!0}}}},{"gl-matrix":6}],5:[function(t,e,n){"use strict";const r=t("gl-matrix"),a=r.vec3,o=r.vec4,i=r.mat4,u=r.glMatrix;e.exports=function(){let t=i.create(),e=a.fromValues(0,0,-1);const n=u.toRadian(179);this.setFowardDirection=function(t){e=a.clone(t)},this.setViewMatrix=function(e){t=i.clone(e)},this.getViewMatrix=function(){return t},this.update=function(r,l){if(u.equals(l.yawIntensity,0)&&u.equals(l.pitchIntensity,0)&&u.equals(l.forward,0)&&u.equals(l.backward,0)&&u.equals(l.left,0)&&u.equals(l.right,0)&&u.equals(l.up,0)&&u.equals(l.down,0))return!1;let s=i.clone(t),c=o.fromValues(l.worldUp[0],l.worldUp[1],l.worldUp[2],0);o.transformMat4(c,c,s);let f=a.fromValues(c[0],c[1],c[2]);if(a.normalize(f,f),!u.equals(l.yawIntensity,0)||!u.equals(l.pitchIntensity,0)){if(!l.lockUpRotation){let t=i.create();i.rotate(t,t,u.toRadian(l.yawIntensity*l.angularVelocity*r),f),i.multiply(s,t,s)}if(!l.lockRightRotation){let t=i.create();i.invert(t,s);let e=a.fromValues(-t[8],-t[9],-t[10]);a.normalize(e,e);let o=Math.acos(a.dot(l.worldUp,e)),c=u.toRadian(l.pitchIntensity*l.angularVelocity*r),f=o+c;if(f<n&&f>1){let t=i.create();i.rotate(t,t,c,a.fromValues(1,0,0)),i.multiply(s,t,s)}}l.yawIntensity=0,l.pitchIntensity=0}let h=a.create();h[0]=l.velocity[0]*(l.left-l.right)*r,h[1]=l.velocity[1]*(l.down-l.up)*r,h[2]=l.velocity[2]*(l.backward-l.forward)*r;let d=a.clone(e);a.normalize(d,d);let m=a.create();a.cross(m,d,f),a.normalize(m,m);let M=a.create();a.cross(M,m,d),a.normalize(M,M);let v=a.fromValues(d[0]*h[2]+M[0]*h[1]+m[0]*h[0],d[1]*h[2]+M[1]*h[1]+m[1]*h[0],d[2]*h[2]+M[2]*h[1]+m[2]*h[0]),E=i.create();return i.translate(E,E,v),i.multiply(s,E,s),t=i.clone(s),!0},this.applyRestrictions=function(e){let n=i.create();i.invert(n,t);let r=n[15],o=a.fromValues(n[12]/r,n[13]/r,n[14]/r),u=a.fromValues(-n[8],-n[9],-n[10]),l=a.fromValues(o[0]+u[0],o[1]+u[1],o[2]+u[2]);i.lookAt(t,o,l,e)}}},{"gl-matrix":6}],6:[function(t,e,n){!function(t,r){if("object"==typeof n&&"object"==typeof e)e.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var a=r();for(var o in a)("object"==typeof n?n:t)[o]=a[o]}}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var a=n[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,e),a.l=!0,a.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=4)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setMatrixArrayType=function(t){e.ARRAY_TYPE=a=t},e.toRadian=function(t){return t*o},e.equals=function(t,e){return Math.abs(t-e)<=r*Math.max(1,Math.abs(t),Math.abs(e))};var r=e.EPSILON=1e-6,a=e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,o=(e.RANDOM=Math.random,Math.PI/180)},function(t,e,n){"use strict";function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=n[0],d=n[1],m=n[2],M=n[3],v=n[4],E=n[5],R=n[6],A=n[7],b=n[8];return t[0]=h*r+d*i+m*s,t[1]=h*a+d*u+m*c,t[2]=h*o+d*l+m*f,t[3]=M*r+v*i+E*s,t[4]=M*a+v*u+E*c,t[5]=M*o+v*l+E*f,t[6]=R*r+A*i+b*s,t[7]=R*a+A*u+b*c,t[8]=R*o+A*l+b*f,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new o.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat4=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[4],t[4]=e[5],t[5]=e[6],t[6]=e[8],t[7]=e[9],t[8]=e[10],t},e.clone=function(t){var e=new o.ARRAY_TYPE(9);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromValues=function(t,e,n,r,a,i,u,l,s){var c=new o.ARRAY_TYPE(9);return c[0]=t,c[1]=e,c[2]=n,c[3]=r,c[4]=a,c[5]=i,c[6]=u,c[7]=l,c[8]=s,c},e.set=function(t,e,n,r,a,o,i,u,l,s){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[5];t[1]=e[3],t[2]=e[6],t[3]=n,t[5]=e[7],t[6]=r,t[7]=a}else t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8];return t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=c*i-u*s,h=-c*o+u*l,d=s*o-i*l,m=n*f+r*h+a*d;return m?(m=1/m,t[0]=f*m,t[1]=(-c*r+a*s)*m,t[2]=(u*r-a*i)*m,t[3]=h*m,t[4]=(c*n-a*l)*m,t[5]=(-u*n+a*o)*m,t[6]=d*m,t[7]=(-s*n+r*l)*m,t[8]=(i*n-r*o)*m,t):null},e.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8];return t[0]=i*c-u*s,t[1]=a*s-r*c,t[2]=r*u-a*i,t[3]=u*l-o*c,t[4]=n*c-a*l,t[5]=a*o-n*u,t[6]=o*s-i*l,t[7]=r*l-n*s,t[8]=n*i-r*o,t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8];return e*(s*o-i*l)+n*(-s*a+i*u)+r*(l*a-o*u)},e.multiply=r,e.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=n[0],d=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=h*r+d*i+s,t[7]=h*a+d*u+c,t[8]=h*o+d*l+f,t},e.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=Math.sin(n),d=Math.cos(n);return t[0]=d*r+h*i,t[1]=d*a+h*u,t[2]=d*o+h*l,t[3]=d*i-h*r,t[4]=d*u-h*a,t[5]=d*l-h*o,t[6]=s,t[7]=c,t[8]=f,t},e.scale=function(t,e,n){var r=n[0],a=n[1];return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=a*e[3],t[4]=a*e[4],t[5]=a*e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=e[0],t[7]=e[1],t[8]=1,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=-n,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=e[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},e.fromMat2d=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=0,t[3]=e[2],t[4]=e[3],t[5]=0,t[6]=e[4],t[7]=e[5],t[8]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,l=a+a,s=n*i,c=r*i,f=r*u,h=a*i,d=a*u,m=a*l,M=o*i,v=o*u,E=o*l;return t[0]=1-f-m,t[3]=c-E,t[6]=h+v,t[1]=c+E,t[4]=1-s-m,t[7]=d-M,t[2]=h-v,t[5]=d+M,t[8]=1-s-f,t},e.normalFromMat4=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=e[9],h=e[10],d=e[11],m=e[12],M=e[13],v=e[14],E=e[15],R=n*u-r*i,A=n*l-a*i,b=n*s-o*i,p=r*l-a*u,_=r*s-o*u,T=a*s-o*l,g=c*M-f*m,x=c*v-h*m,P=c*E-d*m,y=f*v-h*M,I=f*E-d*M,w=h*E-d*v,S=R*w-A*I+b*y+p*P-_*x+T*g;return S?(S=1/S,t[0]=(u*w-l*I+s*y)*S,t[1]=(l*P-i*w-s*x)*S,t[2]=(i*I-u*P+s*g)*S,t[3]=(a*I-r*w-o*y)*S,t[4]=(n*w-a*P+o*x)*S,t[5]=(r*P-n*I-o*g)*S,t[6]=(M*T-v*_+E*p)*S,t[7]=(v*b-m*T-E*A)*S,t[8]=(m*_-M*b+E*R)*S,t):null},e.projection=function(t,e,n){return t[0]=2/e,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/n,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},e.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],f=t[8],h=e[0],d=e[1],m=e[2],M=e[3],v=e[4],E=e[5],R=e[6],A=e[7],b=e[8];return Math.abs(n-h)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(h))&&Math.abs(r-d)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(d))&&Math.abs(a-m)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(m))&&Math.abs(i-M)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(M))&&Math.abs(u-v)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-E)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(s-R)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(R))&&Math.abs(c-A)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(f-b)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(b))};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.mul=r,e.sub=a},function(t,e,n){"use strict";function r(){var t=new m.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){var e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function o(t,e,n){var r=new m.ARRAY_TYPE(3);return r[0]=t,r[1]=e,r[2]=n,r}function i(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function u(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function l(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function s(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(n*n+r*r+a*a)}function c(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function f(t){var e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function h(t,e){var n=e[0],r=e[1],a=e[2],o=n*n+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=e[0]*o,t[1]=e[1]*o,t[2]=e[2]*o),t}function d(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=r,e.clone=function(t){var e=new m.ARRAY_TYPE(3);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e},e.length=a,e.fromValues=o,e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t},e.set=function(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t},e.subtract=i,e.multiply=u,e.divide=l,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t},e.distance=s,e.squaredDistance=c,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t},e.normalize=h,e.dot=d,e.cross=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],l=n[2];return t[0]=a*l-o*u,t[1]=o*i-r*l,t[2]=r*u-a*i,t},e.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t},e.hermite=function(t,e,n,r,a,o){var i=o*o,u=i*(2*o-3)+1,l=i*(o-2)+o,s=i*(o-1),c=i*(3-2*o);return t[0]=e[0]*u+n[0]*l+r[0]*s+a[0]*c,t[1]=e[1]*u+n[1]*l+r[1]*s+a[1]*c,t[2]=e[2]*u+n[2]*l+r[2]*s+a[2]*c,t},e.bezier=function(t,e,n,r,a,o){var i=1-o,u=i*i,l=o*o,s=u*i,c=3*o*u,f=3*l*i,h=l*o;return t[0]=e[0]*s+n[0]*c+r[0]*f+a[0]*h,t[1]=e[1]*s+n[1]*c+r[1]*f+a[1]*h,t[2]=e[2]*s+n[2]*c+r[2]*f+a[2]*h,t},e.random=function(t,e){e=e||1;var n=2*m.RANDOM()*Math.PI,r=2*m.RANDOM()-1,a=Math.sqrt(1-r*r)*e;return t[0]=Math.cos(n)*a,t[1]=Math.sin(n)*a,t[2]=r*e,t},e.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[3]*r+n[7]*a+n[11]*o+n[15];return i=i||1,t[0]=(n[0]*r+n[4]*a+n[8]*o+n[12])/i,t[1]=(n[1]*r+n[5]*a+n[9]*o+n[13])/i,t[2]=(n[2]*r+n[6]*a+n[10]*o+n[14])/i,t},e.transformMat3=function(t,e,n){var r=e[0],a=e[1],o=e[2];return t[0]=r*n[0]+a*n[3]+o*n[6],t[1]=r*n[1]+a*n[4]+o*n[7],t[2]=r*n[2]+a*n[5]+o*n[8],t},e.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],l=n[2],s=n[3],c=s*r+u*o-l*a,f=s*a+l*r-i*o,h=s*o+i*a-u*r,d=-i*r-u*a-l*o;return t[0]=c*s+d*-i+f*-l-h*-u,t[1]=f*s+d*-u+h*-i-c*-l,t[2]=h*s+d*-l+c*-u-f*-i,t},e.rotateX=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateY=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.rotateZ=function(t,e,n,r){var a=[],o=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+n[0],t[1]=o[1]+n[1],t[2]=o[2]+n[2],t},e.angle=function(t,e){var n=o(t[0],t[1],t[2]),r=o(e[0],e[1],e[2]);h(n,n),h(r,r);var a=d(n,r);return a>1?0:a<-1?Math.PI:Math.acos(a)},e.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=e[0],i=e[1],u=e[2];return Math.abs(n-o)<=m.EPSILON*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-i)<=m.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=m.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var m=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.sub=i,e.mul=u,e.div=l,e.dist=s,e.sqrDist=c,e.len=a,e.sqrLen=f,e.forEach=function(){var t=r();return function(e,n,r,a,o,i){var u=void 0,l=void 0;for(n||(n=3),r||(r=0),l=a?Math.min(a*n+r,e.length):e.length,u=r;u<l;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2];return e}}()},function(t,e,n){"use strict";function r(){var t=new d.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function i(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function u(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return Math.sqrt(n*n+r*r+a*a+o*o)}function s(t,e){var n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],o=e[3]-t[3];return n*n+r*r+a*a+o*o}function c(t){var e=t[0],n=t[1],r=t[2],a=t[3];return Math.sqrt(e*e+n*n+r*r+a*a)}function f(t){var e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}function h(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=n*i,t[1]=r*i,t[2]=a*i,t[3]=o*i),t}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.len=e.sqrDist=e.dist=e.div=e.mul=e.sub=void 0,e.create=r,e.clone=function(t){var e=new d.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.fromValues=function(t,e,n,r){var a=new d.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.multiply=o,e.divide=i,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t[2]=Math.round(e[2]),t[3]=Math.round(e[3]),t},e.scale=u,e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t},e.distance=l,e.squaredDistance=s,e.length=c,e.squaredLength=f,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t},e.normalize=h,e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]},e.lerp=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t[2]=i+r*(n[2]-i),t[3]=u+r*(n[3]-u),t},e.random=function(t,e){return e=e||1,t[0]=d.RANDOM(),t[1]=d.RANDOM(),t[2]=d.RANDOM(),t[3]=d.RANDOM(),h(t,t),u(t,t,e),t},e.transformMat4=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*o+n[12]*i,t[1]=n[1]*r+n[5]*a+n[9]*o+n[13]*i,t[2]=n[2]*r+n[6]*a+n[10]*o+n[14]*i,t[3]=n[3]*r+n[7]*a+n[11]*o+n[15]*i,t},e.transformQuat=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=n[0],u=n[1],l=n[2],s=n[3],c=s*r+u*o-l*a,f=s*a+l*r-i*o,h=s*o+i*a-u*r,d=-i*r-u*a-l*o;return t[0]=c*s+d*-i+f*-l-h*-u,t[1]=f*s+d*-u+h*-i-c*-l,t[2]=h*s+d*-l+c*-u-f*-i,t[3]=e[3],t},e.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],o=t[3],i=e[0],u=e[1],l=e[2],s=e[3];return Math.abs(n-i)<=d.EPSILON*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-u)<=d.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-l)<=d.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-s)<=d.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))};var d=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.sub=a,e.mul=o,e.div=i,e.dist=l,e.sqrDist=s,e.len=c,e.sqrLen=f,e.forEach=function(){var t=r();return function(e,n,r,a,o,i){var u=void 0,l=void 0;for(n||(n=4),r||(r=0),l=a?Math.min(a*n+r,e.length):e.length,u=r;u<l;u+=n)t[0]=e[u],t[1]=e[u+1],t[2]=e[u+2],t[3]=e[u+3],o(t,t,i),e[u]=t[0],e[u+1]=t[1],e[u+2]=t[2],e[u+3]=t[3];return e}}()},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}Object.defineProperty(e,"__esModule",{value:!0}),e.vec4=e.vec3=e.vec2=e.quat=e.mat4=e.mat3=e.mat2d=e.mat2=e.glMatrix=void 0;var a=r(n(0)),o=r(n(5)),i=r(n(6)),u=r(n(1)),l=r(n(7)),s=r(n(8)),c=r(n(9)),f=r(n(2)),h=r(n(3));e.glMatrix=a,e.mat2=o,e.mat2d=i,e.mat3=u,e.mat4=l,e.quat=s,e.vec2=c,e.vec3=f,e.vec4=h},function(t,e,n){"use strict";function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],l=n[1],s=n[2],c=n[3];return t[0]=r*u+o*l,t[1]=a*u+i*l,t[2]=r*s+o*c,t[3]=a*s+i*c,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new o.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.clone=function(t){var e=new o.ARRAY_TYPE(4);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},e.fromValues=function(t,e,n,r){var a=new o.ARRAY_TYPE(4);return a[0]=t,a[1]=e,a[2]=n,a[3]=r,a},e.set=function(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t},e.transpose=function(t,e){if(t===e){var n=e[1];t[1]=e[2],t[2]=n}else t[0]=e[0],t[1]=e[2],t[2]=e[1],t[3]=e[3];return t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*o-a*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-a*i,t[3]=n*i,t):null},e.adjoint=function(t,e){var n=e[0];return t[0]=e[3],t[1]=-e[1],t[2]=-e[2],t[3]=n,t},e.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},e.multiply=r,e.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),l=Math.cos(n);return t[0]=r*l+o*u,t[1]=a*l+i*u,t[2]=r*-u+o*l,t[3]=a*-u+i*l,t},e.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],l=n[1];return t[0]=r*u,t[1]=a*u,t[2]=o*l,t[3]=i*l,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t},e.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},e.LDU=function(t,e,n,r){return t[2]=r[2]/r[0],n[0]=r[0],n[1]=r[1],n[3]=r[3]-t[2]*n[1],[t,e,n]},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t},e.subtract=a,e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=e[0],l=e[1],s=e[2],c=e[3];return Math.abs(n-u)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(u))&&Math.abs(r-l)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-s)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-c)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.mul=r,e.sub=a},function(t,e,n){"use strict";function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=n[0],c=n[1],f=n[2],h=n[3],d=n[4],m=n[5];return t[0]=r*s+o*c,t[1]=a*s+i*c,t[2]=r*f+o*h,t[3]=a*f+i*h,t[4]=r*d+o*m+u,t[5]=a*d+i*m+l,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new o.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.clone=function(t){var e=new o.ARRAY_TYPE(6);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},e.fromValues=function(t,e,n,r,a,i){var u=new o.ARRAY_TYPE(6);return u[0]=t,u[1]=e,u[2]=n,u[3]=r,u[4]=a,u[5]=i,u},e.set=function(t,e,n,r,a,o,i){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=n*o-r*a;return l?(l=1/l,t[0]=o*l,t[1]=-r*l,t[2]=-a*l,t[3]=n*l,t[4]=(a*u-o*i)*l,t[5]=(r*i-n*u)*l,t):null},e.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},e.multiply=r,e.rotate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=Math.sin(n),c=Math.cos(n);return t[0]=r*c+o*s,t[1]=a*c+i*s,t[2]=r*-s+o*c,t[3]=a*-s+i*c,t[4]=u,t[5]=l,t},e.scale=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=n[0],c=n[1];return t[0]=r*s,t[1]=a*s,t[2]=o*c,t[3]=i*c,t[4]=u,t[5]=l,t},e.translate=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=n[0],c=n[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=r*s+o*c+u,t[5]=a*s+i*c+l,t},e.fromRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=-n,t[3]=r,t[4]=0,t[5]=0,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=e[1],t[4]=0,t[5]=0,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=e[0],t[5]=e[1],t},e.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],l=t[5],s=e[0],c=e[1],f=e[2],h=e[3],d=e[4],m=e[5];return Math.abs(n-s)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(s))&&Math.abs(r-c)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-f)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-h)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-d)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(l-m)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(m))};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.mul=r,e.sub=a},function(t,e,n){"use strict";function r(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=e[4],l=e[5],s=e[6],c=e[7],f=e[8],h=e[9],d=e[10],m=e[11],M=e[12],v=e[13],E=e[14],R=e[15],A=n[0],b=n[1],p=n[2],_=n[3];return t[0]=A*r+b*u+p*f+_*M,t[1]=A*a+b*l+p*h+_*v,t[2]=A*o+b*s+p*d+_*E,t[3]=A*i+b*c+p*m+_*R,A=n[4],b=n[5],p=n[6],_=n[7],t[4]=A*r+b*u+p*f+_*M,t[5]=A*a+b*l+p*h+_*v,t[6]=A*o+b*s+p*d+_*E,t[7]=A*i+b*c+p*m+_*R,A=n[8],b=n[9],p=n[10],_=n[11],t[8]=A*r+b*u+p*f+_*M,t[9]=A*a+b*l+p*h+_*v,t[10]=A*o+b*s+p*d+_*E,t[11]=A*i+b*c+p*m+_*R,A=n[12],b=n[13],p=n[14],_=n[15],t[12]=A*r+b*u+p*f+_*M,t[13]=A*a+b*l+p*h+_*v,t[14]=A*o+b*s+p*d+_*E,t[15]=A*i+b*c+p*m+_*R,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}Object.defineProperty(e,"__esModule",{value:!0}),e.sub=e.mul=void 0,e.create=function(){var t=new o.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.clone=function(t){var e=new o.ARRAY_TYPE(16);return e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15],e},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.fromValues=function(t,e,n,r,a,i,u,l,s,c,f,h,d,m,M,v){var E=new o.ARRAY_TYPE(16);return E[0]=t,E[1]=e,E[2]=n,E[3]=r,E[4]=a,E[5]=i,E[6]=u,E[7]=l,E[8]=s,E[9]=c,E[10]=f,E[11]=h,E[12]=d,E[13]=m,E[14]=M,E[15]=v,E},e.set=function(t,e,n,r,a,o,i,u,l,s,c,f,h,d,m,M,v){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t[9]=c,t[10]=f,t[11]=h,t[12]=d,t[13]=m,t[14]=M,t[15]=v,t},e.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.transpose=function(t,e){if(t===e){var n=e[1],r=e[2],a=e[3],o=e[6],i=e[7],u=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=o,t[11]=e[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t},e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=e[9],h=e[10],d=e[11],m=e[12],M=e[13],v=e[14],E=e[15],R=n*u-r*i,A=n*l-a*i,b=n*s-o*i,p=r*l-a*u,_=r*s-o*u,T=a*s-o*l,g=c*M-f*m,x=c*v-h*m,P=c*E-d*m,y=f*v-h*M,I=f*E-d*M,w=h*E-d*v,S=R*w-A*I+b*y+p*P-_*x+T*g;return S?(S=1/S,t[0]=(u*w-l*I+s*y)*S,t[1]=(a*I-r*w-o*y)*S,t[2]=(M*T-v*_+E*p)*S,t[3]=(h*_-f*T-d*p)*S,t[4]=(l*P-i*w-s*x)*S,t[5]=(n*w-a*P+o*x)*S,t[6]=(v*b-m*T-E*A)*S,t[7]=(c*T-h*b+d*A)*S,t[8]=(i*I-u*P+s*g)*S,t[9]=(r*P-n*I-o*g)*S,t[10]=(m*_-M*b+E*R)*S,t[11]=(f*b-c*_-d*R)*S,t[12]=(u*x-i*y-l*g)*S,t[13]=(n*y-r*x+a*g)*S,t[14]=(M*A-m*p-v*R)*S,t[15]=(c*p-f*A+h*R)*S,t):null},e.adjoint=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=e[4],u=e[5],l=e[6],s=e[7],c=e[8],f=e[9],h=e[10],d=e[11],m=e[12],M=e[13],v=e[14],E=e[15];return t[0]=u*(h*E-d*v)-f*(l*E-s*v)+M*(l*d-s*h),t[1]=-(r*(h*E-d*v)-f*(a*E-o*v)+M*(a*d-o*h)),t[2]=r*(l*E-s*v)-u*(a*E-o*v)+M*(a*s-o*l),t[3]=-(r*(l*d-s*h)-u*(a*d-o*h)+f*(a*s-o*l)),t[4]=-(i*(h*E-d*v)-c*(l*E-s*v)+m*(l*d-s*h)),t[5]=n*(h*E-d*v)-c*(a*E-o*v)+m*(a*d-o*h),t[6]=-(n*(l*E-s*v)-i*(a*E-o*v)+m*(a*s-o*l)),t[7]=n*(l*d-s*h)-i*(a*d-o*h)+c*(a*s-o*l),t[8]=i*(f*E-d*M)-c*(u*E-s*M)+m*(u*d-s*f),t[9]=-(n*(f*E-d*M)-c*(r*E-o*M)+m*(r*d-o*f)),t[10]=n*(u*E-s*M)-i*(r*E-o*M)+m*(r*s-o*u),t[11]=-(n*(u*d-s*f)-i*(r*d-o*f)+c*(r*s-o*u)),t[12]=-(i*(f*v-h*M)-c*(u*v-l*M)+m*(u*h-l*f)),t[13]=n*(f*v-h*M)-c*(r*v-a*M)+m*(r*h-a*f),t[14]=-(n*(u*v-l*M)-i*(r*v-a*M)+m*(r*l-a*u)),t[15]=n*(u*h-l*f)-i*(r*h-a*f)+c*(r*l-a*u),t},e.determinant=function(t){var e=t[0],n=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8],c=t[9],f=t[10],h=t[11],d=t[12],m=t[13],M=t[14],v=t[15];return(e*i-n*o)*(f*v-h*M)-(e*u-r*o)*(c*v-h*m)+(e*l-a*o)*(c*M-f*m)+(n*u-r*i)*(s*v-h*d)-(n*l-a*i)*(s*M-f*d)+(r*l-a*u)*(s*m-c*d)},e.multiply=r,e.translate=function(t,e,n){var r=n[0],a=n[1],o=n[2],i=void 0,u=void 0,l=void 0,s=void 0,c=void 0,f=void 0,h=void 0,d=void 0,m=void 0,M=void 0,v=void 0,E=void 0;return e===t?(t[12]=e[0]*r+e[4]*a+e[8]*o+e[12],t[13]=e[1]*r+e[5]*a+e[9]*o+e[13],t[14]=e[2]*r+e[6]*a+e[10]*o+e[14],t[15]=e[3]*r+e[7]*a+e[11]*o+e[15]):(i=e[0],u=e[1],l=e[2],s=e[3],c=e[4],f=e[5],h=e[6],d=e[7],m=e[8],M=e[9],v=e[10],E=e[11],t[0]=i,t[1]=u,t[2]=l,t[3]=s,t[4]=c,t[5]=f,t[6]=h,t[7]=d,t[8]=m,t[9]=M,t[10]=v,t[11]=E,t[12]=i*r+c*a+m*o+e[12],t[13]=u*r+f*a+M*o+e[13],t[14]=l*r+h*a+v*o+e[14],t[15]=s*r+d*a+E*o+e[15]),t},e.scale=function(t,e,n){var r=n[0],a=n[1],o=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*o,t[9]=e[9]*o,t[10]=e[10]*o,t[11]=e[11]*o,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t},e.rotate=function(t,e,n,r){var a=r[0],i=r[1],u=r[2],l=Math.sqrt(a*a+i*i+u*u),s=void 0,c=void 0,f=void 0,h=void 0,d=void 0,m=void 0,M=void 0,v=void 0,E=void 0,R=void 0,A=void 0,b=void 0,p=void 0,_=void 0,T=void 0,g=void 0,x=void 0,P=void 0,y=void 0,I=void 0,w=void 0,S=void 0,U=void 0,N=void 0;return Math.abs(l)<o.EPSILON?null:(l=1/l,a*=l,i*=l,u*=l,s=Math.sin(n),c=Math.cos(n),f=1-c,h=e[0],d=e[1],m=e[2],M=e[3],v=e[4],E=e[5],R=e[6],A=e[7],b=e[8],p=e[9],_=e[10],T=e[11],g=a*a*f+c,x=i*a*f+u*s,P=u*a*f-i*s,y=a*i*f-u*s,I=i*i*f+c,w=u*i*f+a*s,S=a*u*f+i*s,U=i*u*f-a*s,N=u*u*f+c,t[0]=h*g+v*x+b*P,t[1]=d*g+E*x+p*P,t[2]=m*g+R*x+_*P,t[3]=M*g+A*x+T*P,t[4]=h*y+v*I+b*w,t[5]=d*y+E*I+p*w,t[6]=m*y+R*I+_*w,t[7]=M*y+A*I+T*w,t[8]=h*S+v*U+b*N,t[9]=d*S+E*U+p*N,t[10]=m*S+R*U+_*N,t[11]=M*S+A*U+T*N,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)},e.rotateX=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[4],i=e[5],u=e[6],l=e[7],s=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=o*a+s*r,t[5]=i*a+c*r,t[6]=u*a+f*r,t[7]=l*a+h*r,t[8]=s*a-o*r,t[9]=c*a-i*r,t[10]=f*a-u*r,t[11]=h*a-l*r,t},e.rotateY=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],l=e[3],s=e[8],c=e[9],f=e[10],h=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a-s*r,t[1]=i*a-c*r,t[2]=u*a-f*r,t[3]=l*a-h*r,t[8]=o*r+s*a,t[9]=i*r+c*a,t[10]=u*r+f*a,t[11]=l*r+h*a,t},e.rotateZ=function(t,e,n){var r=Math.sin(n),a=Math.cos(n),o=e[0],i=e[1],u=e[2],l=e[3],s=e[4],c=e[5],f=e[6],h=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=o*a+s*r,t[1]=i*a+c*r,t[2]=u*a+f*r,t[3]=l*a+h*r,t[4]=s*a-o*r,t[5]=c*a-i*r,t[6]=f*a-u*r,t[7]=h*a-l*r,t},e.fromTranslation=function(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},e.fromScaling=function(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotation=function(t,e,n){var r=n[0],a=n[1],i=n[2],u=Math.sqrt(r*r+a*a+i*i),l=void 0,s=void 0,c=void 0;return Math.abs(u)<o.EPSILON?null:(u=1/u,r*=u,a*=u,i*=u,l=Math.sin(e),s=Math.cos(e),c=1-s,t[0]=r*r*c+s,t[1]=a*r*c+i*l,t[2]=i*r*c-a*l,t[3]=0,t[4]=r*a*c-i*l,t[5]=a*a*c+s,t[6]=i*a*c+r*l,t[7]=0,t[8]=r*i*c+a*l,t[9]=a*i*c-r*l,t[10]=i*i*c+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},e.fromXRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromYRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromZRotation=function(t,e){var n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.fromRotationTranslation=function(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=r+r,l=a+a,s=o+o,c=r*u,f=r*l,h=r*s,d=a*l,m=a*s,M=o*s,v=i*u,E=i*l,R=i*s;return t[0]=1-(d+M),t[1]=f+R,t[2]=h-E,t[3]=0,t[4]=f-R,t[5]=1-(c+M),t[6]=m+v,t[7]=0,t[8]=h+E,t[9]=m-v,t[10]=1-(c+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.getTranslation=function(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t},e.getScaling=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[4],i=e[5],u=e[6],l=e[8],s=e[9],c=e[10];return t[0]=Math.sqrt(n*n+r*r+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(l*l+s*s+c*c),t},e.getRotation=function(t,e){var n=e[0]+e[5]+e[10],r=0;return n>0?(r=2*Math.sqrt(n+1),t[3]=.25*r,t[0]=(e[6]-e[9])/r,t[1]=(e[8]-e[2])/r,t[2]=(e[1]-e[4])/r):e[0]>e[5]&e[0]>e[10]?(r=2*Math.sqrt(1+e[0]-e[5]-e[10]),t[3]=(e[6]-e[9])/r,t[0]=.25*r,t[1]=(e[1]+e[4])/r,t[2]=(e[8]+e[2])/r):e[5]>e[10]?(r=2*Math.sqrt(1+e[5]-e[0]-e[10]),t[3]=(e[8]-e[2])/r,t[0]=(e[1]+e[4])/r,t[1]=.25*r,t[2]=(e[6]+e[9])/r):(r=2*Math.sqrt(1+e[10]-e[0]-e[5]),t[3]=(e[1]-e[4])/r,t[0]=(e[8]+e[2])/r,t[1]=(e[6]+e[9])/r,t[2]=.25*r),t},e.fromRotationTranslationScale=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3],l=a+a,s=o+o,c=i+i,f=a*l,h=a*s,d=a*c,m=o*s,M=o*c,v=i*c,E=u*l,R=u*s,A=u*c,b=r[0],p=r[1],_=r[2];return t[0]=(1-(m+v))*b,t[1]=(h+A)*b,t[2]=(d-R)*b,t[3]=0,t[4]=(h-A)*p,t[5]=(1-(f+v))*p,t[6]=(M+E)*p,t[7]=0,t[8]=(d+R)*_,t[9]=(M-E)*_,t[10]=(1-(f+m))*_,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},e.fromRotationTranslationScaleOrigin=function(t,e,n,r,a){var o=e[0],i=e[1],u=e[2],l=e[3],s=o+o,c=i+i,f=u+u,h=o*s,d=o*c,m=o*f,M=i*c,v=i*f,E=u*f,R=l*s,A=l*c,b=l*f,p=r[0],_=r[1],T=r[2],g=a[0],x=a[1],P=a[2];return t[0]=(1-(M+E))*p,t[1]=(d+b)*p,t[2]=(m-A)*p,t[3]=0,t[4]=(d-b)*_,t[5]=(1-(h+E))*_,t[6]=(v+R)*_,t[7]=0,t[8]=(m+A)*T,t[9]=(v-R)*T,t[10]=(1-(h+M))*T,t[11]=0,t[12]=n[0]+g-(t[0]*g+t[4]*x+t[8]*P),t[13]=n[1]+x-(t[1]*g+t[5]*x+t[9]*P),t[14]=n[2]+P-(t[2]*g+t[6]*x+t[10]*P),t[15]=1,t},e.fromQuat=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n+n,u=r+r,l=a+a,s=n*i,c=r*i,f=r*u,h=a*i,d=a*u,m=a*l,M=o*i,v=o*u,E=o*l;return t[0]=1-f-m,t[1]=c+E,t[2]=h-v,t[3]=0,t[4]=c-E,t[5]=1-s-m,t[6]=d+M,t[7]=0,t[8]=h+v,t[9]=d-M,t[10]=1-s-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},e.frustum=function(t,e,n,r,a,o,i){var u=1/(n-e),l=1/(a-r),s=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(n+e)*u,t[9]=(a+r)*l,t[10]=(i+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*s,t[15]=0,t},e.perspective=function(t,e,n,r,a){var o=1/Math.tan(e/2),i=1/(r-a);return t[0]=o/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*i,t[15]=0,t},e.perspectiveFromFieldOfView=function(t,e,n,r){var a=Math.tan(e.upDegrees*Math.PI/180),o=Math.tan(e.downDegrees*Math.PI/180),i=Math.tan(e.leftDegrees*Math.PI/180),u=Math.tan(e.rightDegrees*Math.PI/180),l=2/(i+u),s=2/(a+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(i-u)*l*.5,t[9]=(a-o)*s*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t},e.ortho=function(t,e,n,r,a,o,i){var u=1/(e-n),l=1/(r-a),s=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(e+n)*u,t[13]=(a+r)*l,t[14]=(i+o)*s,t[15]=1,t},e.lookAt=function(t,e,n,r){var a=void 0,i=void 0,u=void 0,l=void 0,s=void 0,c=void 0,f=void 0,h=void 0,d=void 0,m=void 0,M=e[0],v=e[1],E=e[2],R=r[0],A=r[1],b=r[2],p=n[0],_=n[1],T=n[2];return Math.abs(M-p)<o.EPSILON&&Math.abs(v-_)<o.EPSILON&&Math.abs(E-T)<o.EPSILON?mat4.identity(t):(f=M-p,h=v-_,d=E-T,m=1/Math.sqrt(f*f+h*h+d*d),f*=m,h*=m,d*=m,a=A*d-b*h,i=b*f-R*d,u=R*h-A*f,(m=Math.sqrt(a*a+i*i+u*u))?(a*=m=1/m,i*=m,u*=m):(a=0,i=0,u=0),l=h*u-d*i,s=d*a-f*u,c=f*i-h*a,(m=Math.sqrt(l*l+s*s+c*c))?(l*=m=1/m,s*=m,c*=m):(l=0,s=0,c=0),t[0]=a,t[1]=l,t[2]=f,t[3]=0,t[4]=i,t[5]=s,t[6]=h,t[7]=0,t[8]=u,t[9]=c,t[10]=d,t[11]=0,t[12]=-(a*M+i*v+u*E),t[13]=-(l*M+s*v+c*E),t[14]=-(f*M+h*v+d*E),t[15]=1,t)},e.targetTo=function(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=r[0],l=r[1],s=r[2],c=a-n[0],f=o-n[1],h=i-n[2],d=c*c+f*f+h*h;d>0&&(c*=d=1/Math.sqrt(d),f*=d,h*=d);var m=l*h-s*f,M=s*c-u*h,v=u*f-l*c;return t[0]=m,t[1]=M,t[2]=v,t[3]=0,t[4]=f*v-h*M,t[5]=h*m-c*v,t[6]=c*M-f*m,t[7]=0,t[8]=c,t[9]=f,t[10]=h,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t},e.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},e.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t},e.subtract=a,e.multiplyScalar=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t},e.multiplyScalarAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]},e.equals=function(t,e){var n=t[0],r=t[1],a=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],f=t[8],h=t[9],d=t[10],m=t[11],M=t[12],v=t[13],E=t[14],R=t[15],A=e[0],b=e[1],p=e[2],_=e[3],T=e[4],g=e[5],x=e[6],P=e[7],y=e[8],I=e[9],w=e[10],S=e[11],U=e[12],N=e[13],O=e[14],F=e[15];return Math.abs(n-A)<=o.EPSILON*Math.max(1,Math.abs(n),Math.abs(A))&&Math.abs(r-b)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(b))&&Math.abs(a-p)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(p))&&Math.abs(i-_)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(_))&&Math.abs(u-T)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(T))&&Math.abs(l-g)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(s-x)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(x))&&Math.abs(c-P)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(f-y)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(y))&&Math.abs(h-I)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(I))&&Math.abs(d-w)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(w))&&Math.abs(m-S)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(S))&&Math.abs(M-U)<=o.EPSILON*Math.max(1,Math.abs(M),Math.abs(U))&&Math.abs(v-N)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(N))&&Math.abs(E-O)<=o.EPSILON*Math.max(1,Math.abs(E),Math.abs(O))&&Math.abs(R-F)<=o.EPSILON*Math.max(1,Math.abs(R),Math.abs(F))};var o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.mul=r,e.sub=a},function(t,e,n){"use strict";function r(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function a(){var t=new s.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function o(t,e,n){n*=.5;var r=Math.sin(n);return t[0]=r*e[0],t[1]=r*e[1],t[2]=r*e[2],t[3]=Math.cos(n),t}function i(t,e,n){var r=e[0],a=e[1],o=e[2],i=e[3],u=n[0],l=n[1],s=n[2],c=n[3];return t[0]=r*c+i*u+a*s-o*l,t[1]=a*c+i*l+o*u-r*s,t[2]=o*c+i*s+r*l-a*u,t[3]=i*c-r*u-a*l-o*s,t}function u(t,e,n,r){var a=e[0],o=e[1],i=e[2],u=e[3],l=n[0],s=n[1],c=n[2],f=n[3],h=void 0,d=void 0,m=void 0,M=void 0,v=void 0;return(d=a*l+o*s+i*c+u*f)<0&&(d=-d,l=-l,s=-s,c=-c,f=-f),1-d>1e-6?(h=Math.acos(d),m=Math.sin(h),M=Math.sin((1-r)*h)/m,v=Math.sin(r*h)/m):(M=1-r,v=r),t[0]=M*a+v*l,t[1]=M*o+v*s,t[2]=M*i+v*c,t[3]=M*u+v*f,t}function l(t,e){var n=e[0]+e[4]+e[8],r=void 0;if(n>0)r=Math.sqrt(n+1),t[3]=.5*r,r=.5/r,t[0]=(e[5]-e[7])*r,t[1]=(e[6]-e[2])*r,t[2]=(e[1]-e[3])*r;else{var a=0;e[4]>e[0]&&(a=1),e[8]>e[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;r=Math.sqrt(e[3*a+a]-e[3*o+o]-e[3*i+i]+1),t[a]=.5*r,r=.5/r,t[3]=(e[3*o+i]-e[3*i+o])*r,t[o]=(e[3*o+a]+e[3*a+o])*r,t[i]=(e[3*i+a]+e[3*a+i])*r}return t}Object.defineProperty(e,"__esModule",{value:!0}),e.setAxes=e.sqlerp=e.rotationTo=e.equals=e.exactEquals=e.normalize=e.sqrLen=e.squaredLength=e.len=e.length=e.lerp=e.dot=e.scale=e.mul=e.add=e.set=e.copy=e.fromValues=e.clone=void 0,e.create=a,e.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},e.setAxisAngle=o,e.getAxisAngle=function(t,e){var n=2*Math.acos(e[3]),r=Math.sin(n/2);return 0!=r?(t[0]=e[0]/r,t[1]=e[1]/r,t[2]=e[2]/r):(t[0]=1,t[1]=0,t[2]=0),n},e.multiply=i,e.rotateX=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),l=Math.cos(n);return t[0]=r*l+i*u,t[1]=a*l+o*u,t[2]=o*l-a*u,t[3]=i*l-r*u,t},e.rotateY=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),l=Math.cos(n);return t[0]=r*l-o*u,t[1]=a*l+i*u,t[2]=o*l+r*u,t[3]=i*l-a*u,t},e.rotateZ=function(t,e,n){n*=.5;var r=e[0],a=e[1],o=e[2],i=e[3],u=Math.sin(n),l=Math.cos(n);return t[0]=r*l+a*u,t[1]=a*l-r*u,t[2]=o*l+i*u,t[3]=i*l-o*u,t},e.calculateW=function(t,e){var n=e[0],r=e[1],a=e[2];return t[0]=n,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-n*n-r*r-a*a)),t},e.slerp=u,e.invert=function(t,e){var n=e[0],r=e[1],a=e[2],o=e[3],i=n*n+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-n*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t},e.conjugate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=e[3],t},e.fromMat3=l,e.fromEuler=function(t,e,n,r){var a=.5*Math.PI/180;e*=a,n*=a,r*=a;var o=Math.sin(e),i=Math.cos(e),u=Math.sin(n),l=Math.cos(n),s=Math.sin(r),c=Math.cos(r);return t[0]=o*l*c-i*u*s,t[1]=i*u*c+o*l*s,t[2]=i*l*s-o*u*c,t[3]=i*l*c+o*u*s,t},e.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var s=r(n(0)),c=r(n(1)),f=r(n(2)),h=r(n(3)),d=(e.clone=h.clone,e.fromValues=h.fromValues,e.copy=h.copy,e.set=h.set,e.add=h.add,e.mul=i,e.scale=h.scale,e.dot=h.dot,e.lerp=h.lerp,e.length=h.length),m=(e.len=d,e.squaredLength=h.squaredLength),M=(e.sqrLen=m,e.normalize=h.normalize);e.exactEquals=h.exactEquals,e.equals=h.equals,e.rotationTo=function(){var t=f.create(),e=f.fromValues(1,0,0),n=f.fromValues(0,1,0);return function(r,a,i){var u=f.dot(a,i);return u<-.999999?(f.cross(t,e,a),f.len(t)<1e-6&&f.cross(t,n,a),f.normalize(t,t),o(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(f.cross(t,a,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,M(r,r))}}(),e.sqlerp=function(){var t=a(),e=a();return function(n,r,a,o,i,l){return u(t,r,i,l),u(e,a,o,l),u(n,t,e,2*l*(1-l)),n}}(),e.setAxes=function(){var t=c.create();return function(e,n,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-n[0],t[5]=-n[1],t[8]=-n[2],M(e,l(e,t))}}()},function(t,e,n){"use strict";function r(){var t=new f.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function o(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function i(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function u(t,e){var n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function l(t,e){var n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function s(t){var e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function c(t){var e=t[0],n=t[1];return e*e+n*n}Object.defineProperty(e,"__esModule",{value:!0}),e.forEach=e.sqrLen=e.sqrDist=e.dist=e.div=e.mul=e.sub=e.len=void 0,e.create=r,e.clone=function(t){var e=new f.ARRAY_TYPE(2);return e[0]=t[0],e[1]=t[1],e},e.fromValues=function(t,e){var n=new f.ARRAY_TYPE(2);return n[0]=t,n[1]=e,n},e.copy=function(t,e){return t[0]=e[0],t[1]=e[1],t},e.set=function(t,e,n){return t[0]=e,t[1]=n,t},e.add=function(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t},e.subtract=a,e.multiply=o,e.divide=i,e.ceil=function(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t},e.floor=function(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t},e.min=function(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t},e.max=function(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t},e.round=function(t,e){return t[0]=Math.round(e[0]),t[1]=Math.round(e[1]),t},e.scale=function(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t},e.scaleAndAdd=function(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t},e.distance=u,e.squaredDistance=l,e.length=s,e.squaredLength=c,e.negate=function(t,e){return t[0]=-e[0],t[1]=-e[1],t},e.inverse=function(t,e){return t[0]=1/e[0],t[1]=1/e[1],t},e.normalize=function(t,e){var n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=e[0]*a,t[1]=e[1]*a),t},e.dot=function(t,e){return t[0]*e[0]+t[1]*e[1]},e.cross=function(t,e,n){var r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t},e.lerp=function(t,e,n,r){var a=e[0],o=e[1];return t[0]=a+r*(n[0]-a),t[1]=o+r*(n[1]-o),t},e.random=function(t,e){e=e||1;var n=2*f.RANDOM()*Math.PI;return t[0]=Math.cos(n)*e,t[1]=Math.sin(n)*e,t},e.transformMat2=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t},e.transformMat2d=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t},e.transformMat3=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t},e.transformMat4=function(t,e,n){var r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t},e.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},e.exactEquals=function(t,e){return t[0]===e[0]&&t[1]===e[1]},e.equals=function(t,e){var n=t[0],r=t[1],a=e[0],o=e[1];return Math.abs(n-a)<=f.EPSILON*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-o)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))};var f=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}(n(0));e.len=s,e.sub=a,e.mul=o,e.div=i,e.dist=u,e.sqrDist=l,e.sqrLen=c,e.forEach=function(){var t=r();return function(e,n,r,a,o,i){var u=void 0,l=void 0;for(n||(n=2),r||(r=0),l=a?Math.min(a*n+r,e.length):e.length,u=r;u<l;u+=n)t[0]=e[u],t[1]=e[u+1],o(t,t,i),e[u]=t[0],e[u+1]=t[1];return e}}()}])})},{}],7:[function(t,e,n){"use strict";function r(){function t(t){for(let e=w.length-1;e>=0;e--){let n=w[e],r=t.indexOf(n);r<0&&(i.disableVertexAttribArray(n),w.splice(r,1))}for(let e=0;e<t.length;e++){let n=t[e];i.enableVertexAttribArray(n),w.push(n)}let e=Object.keys(S);for(let n=0;n<e.length;n++){let r=e[n];t.indexOf(r)<0&&S[r]>0&&(U.vertexAttribDivisorANGLE(r,0),S[r]=0)}}function e(t){let e=((4278190080&(t<<=8))>>24)/255,n=((16711680&t)>>16)/255,r=((65280&t)>>8)/255;return s.fromValues(e,n,r,1)}function n(t){t<<=8;let e=new Uint8Array(4);return e[0]=(4278190080&t)>>24,e[1]=(16711680&t)>>16,e[2]=(65280&t)>>8,e[3]=255,e}function u(t){let e=new Uint8Array(4);return e[0]=255*Math.min(Math.max(t[0],0),1),e[1]=255*Math.min(Math.max(t[1],0),1),e[2]=255*Math.min(Math.max(t[2],0),1),e[3]=255*Math.min(Math.max(t[3],0),1),e}function f(t,e){for(let n=0;n<t.length;n++){let r=t[n];S.hasOwnProperty(r)?S[r]!==e&&(U.vertexAttribDivisorANGLE(r,e),S[r]=e):(U.vertexAttribDivisorANGLE(r,e),S[r]=e)}}function h(t,a,o,l){const f=N;let h=[],d=!1;if(!g||1===o.length){N+=o.length;for(let n=0;n<o.length;n++){let i=f+n;h.push(i);let u=e(i),d={mesh:t,transform:c.clone(o[n]),color:s.clone(a[n]),visible:!0,textureName:l,id:u,programId:r.DEFAULT_PROGRAM,isInstance:!1};b.push(i),p[i]=d}return f}{let e=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,e);let s=0;if(o.constructor===Float32Array)s=o.length/16,i.bufferData(i.ARRAY_BUFFER,o,i.STATIC_DRAW);else{s=o.length;let t=new Float32Array(16*o.length);for(let e=0;e<o.length;e++){let n=o[e];for(let r=0;r<16;r++)t[16*e+r]=n[r]}i.bufferData(i.ARRAY_BUFFER,t,i.STATIC_DRAW)}N+=s;let c=i.createBuffer(),m=new Uint8Array(4*s);for(let t=0;t<s;t++){let e=f+t;h.push(e);let r=n(e);for(let e=0;e<4;e++)m[4*t+e]=r[e]}i.bindBuffer(i.ARRAY_BUFFER,c),i.bufferData(i.ARRAY_BUFFER,m,i.STATIC_DRAW);let M=i.createBuffer();if(i.bindBuffer(i.ARRAY_BUFFER,M),a.constructor===Uint8Array){let t=a.length/4;for(let e=0;e<t;e++)if(a[4*e+3]<255){d=!0;break}i.bufferData(i.ARRAY_BUFFER,a,i.STATIC_DRAW)}else{let t=new Uint8Array(4*a.length);for(let e=0;e<a.length;e++){let n=u(a[e]);for(let r=0;r<4;r++)t[4*e+r]=n[r],3==r&&n[r]<1&&(d=!0)}i.bufferData(i.ARRAY_BUFFER,t,i.STATIC_DRAW)}let v={mesh:t,modelBufferId:e,instanceCount:s,colorBufferId:M,textureName:l,visible:!0,firstIdx:f,pickBufferId:c,useBlending:d,programId:r.INSTACE_PROGRAM,isInstance:!0};for(let t=0;t<s;t++)p[f+t]=v;b.push(f)}return h}let d=this,m=null,M=null,v=null,E=null,R={},A=null,b=[],p={},_=[],T={},g=!1,x=!1,P={r:.5,g:.5,b:.5,a:1},y={width:0,height:0,element:void 0},I=c.create();this.drawPicking=!1,this.translation=l.create(),this.scale=l.fromValues(1,1,1),this.rotation=c.create();let w=[],S={},U=null,N=1,O=!1;this.loadShaders=function(t,e,n){let a=n||"_default";i.useProgram(null);let u=o.createProgram(t,e,i);if(u){i.useProgram(u);let t=i.getAttribLocation(u,"position"),e=i.getAttribLocation(u,"normal"),n=i.getAttribLocation(u,"texcoord"),o=i.getAttribLocation(u,"model"),l=i.getAttribLocation(u,"colorInstance"),s=i.getAttribLocation(u,"pickingInstance"),c=[];t>=0&&c.push(t),e>=0&&c.push(e),n>=0&&c.push(n),l>=0&&c.push(l),s>=0&&c.push(s);let f=[];o>=0&&(c.push(o),f.push(o),c.push(o+1),f.push(o+1),c.push(o+2),f.push(o+2),c.push(o+3),f.push(o+3));let h=i.getUniformLocation(u,"modelViewProjection"),m=i.getUniformLocation(u,"modelView"),M=i.getUniformLocation(u,"normalMatrix"),v=i.getUniformLocation(u,"lightPosition"),E=i.getUniformLocation(u,"color"),R=i.getUniformLocation(u,"useTexture"),A=i.getUniformLocation(u,"unlit"),b=i.getUniformLocation(u,"texSampler"),p={program:u,positionVertex:t,normalVertex:e,texcoord:n,model:o,colorInstance:l,pickingInstance:s,modelViewProjectionUniform:h,modelViewUniform:m,normalMatrixUniform:M,lightPositionUniform:v,colorUniform:E,useTextureUniform:R,unlitUniform:A,pickingUniform:i.getUniformLocation(u,"picking"),texSamplerUniform:b,id:a,attribs:c,modelAttribs:f,isInstance:a===r.INSTACE_PROGRAM||a===r.INSTANCE_PICKING_PROGRAM};d.addProgram(p,a),i.useProgram(null)}},this.addProgram=function(t,e){e===r.DEFAULT_PROGRAM?m=t:e===r.INSTACE_PROGRAM?M=t:e===r.PICKING_PROGRAM?v=t:e===r.INSTANCE_PICKING_PROGRAM&&(E=t),R[e]=t},this.uploadBuffer=function(t){let e=i.createBuffer();return i.bindBuffer(i.ARRAY_BUFFER,e),i.bufferData(i.ARRAY_BUFFER,new Float32Array(t),i.STATIC_DRAW),e},this.uploadMesh=function(t,e){if(!t){throw"Vertices can not be null"}if(!e){throw"Elements can not be null"}let n=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,n),t.constructor===Float32Array?i.bufferData(i.ARRAY_BUFFER,t,i.STATIC_DRAW):i.bufferData(i.ARRAY_BUFFER,new Float32Array(t),i.STATIC_DRAW);let r=i.createBuffer();return i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,r),e.constructor!==Uint16Array?i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(e),i.STATIC_DRAW):i.bufferData(i.ELEMENT_ARRAY_BUFFER,e,i.STATIC_DRAW),{verticesBufferId:n,elementsBufferId:r,count:e.length}},this.addObject=function(t,n,a,o,i){let u=d.uploadMesh(t,n),l=c.create();o&&c.copy(l,o);let f=s.fromValues(.8,.8,.8,1);a&&(f=s.clone(a));let h=N,m=e(h);N++;let M={mesh:u,transform:l,color:f,id:m,visible:!0,textureName:i,programId:r.DEFAULT_PROGRAM,isInstance:!1};return b.push(h),p[h]=M,h},this.removeObject=function(t){let e=b.indexOf(t);e>=0&&b.splice(e,1),p.hasOwnProperty(t)&&delete p[t]},this.addInstances=function(t,e,n,r){if(!n){throw"Matrices can not be null"}if(!e){throw"Colors can not be null"}if(n.constructor==Float32Array&&e.constructor==Uint8Array||e.length===n.length){if(n.constructor!==Float32Array&&e.constructor!==Uint8Array||n.length/16==e.length/4)return h(t,e,n,r);console.log("Colors and instances must have same length")}else console.log("Colors and instances must have same length")},this.addObjectInstances=function(t,e,n,r,a){if(!r){throw"Matrices can not be null"}if(!n){throw"Colors can not be null"}(r.constructor==Float32Array&&n.constructor==Float32Array||n.length===r.length)&&(r.constructor!==Float32Array&&n.constructor!==Float32Array||r.length/16==n.length/4)?h(d.uploadMesh(t,e),n,r,a):console.log("Colors and instances must have same length")},this.updateColor=function(t,e){if(p.hasOwnProperty(t)){let n=p[t];if(n.isInstance){let r=t-n.firstIdx,a=u(e);i.bindBuffer(i.ARRAY_BUFFER,n.colorBufferId),i.bufferSubData(i.ARRAY_BUFFER,4*r,a),i.bindBuffer(i.ARRAY_BUFFER,null)}else n.color=e}},this.setVisibility=function(t,e){p.hasOwnProperty(t)&&(p[t].visible=e)},this.addLines=function(t,e){let n=i.createBuffer();i.bindBuffer(i.ARRAY_BUFFER,n),i.bufferData(i.ARRAY_BUFFER,new Float32Array(t),i.STATIC_DRAW),e||(e=s.fromValues(1,1,1,1)),_.push({verticesBufferId:n,count:t.length/3,vertexSize:12,color:e})},this.addTexture=function(t,e,n){let r=i.createTexture();i.bindTexture(i.TEXTURE_2D,r),i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,!0),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e),(n=null!==n&&void 0!==n&&n)?(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST)):(i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR)),i.bindTexture(i.TEXTURE_2D,null),T[t]=r,d.draw()},this.clearBatches=function(){for(let t=0;t<b.length;t++){let e=p[b[t]];i.deleteBuffer(e.verticesBufferId),i.deleteBuffer(e.elementsBufferId)}p={},b=[]},this.draw=function(){if(O||i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),0==p.length&&0==_.length)return;c.create();let e=c.create(),n=I,a=c.create(),o=c.create(),u=c.create();c.perspective(a,45,y.width/y.height,.1,1e5);let s=null,h=null,E=null,g=null,x=null,P=null,S=null,N=!1;i.activeTexture(i.TEXTURE0);for(let _=0;_<b.length;_++){let y=p[b[_]];if(!y.visible)continue;let I=null;if(y.programId||(I=m),y.programId===r.DEFAULT_PROGRAM&&d.drawPicking)I=v;else if(y.programId===r.INSTACE_PROGRAM)I=M;else{if(!R.hasOwnProperty(y.programId)){console.log("Error! Program not found!");continue}I=R[y.programId]}if(s!==I){t((s=I).attribs),i.useProgram(s.program);let e=l.fromValues(0,0,0);i.uniform3fv(s.lightPositionUniform,e),i.uniform1f(s.unlitUniform,0)}s.isInstance?c.identity(e):c.copy(e,y.transform);let w=c.create();c.scale(e,e,d.scale),c.multiply(e,d.rotation,e),c.multiply(o,n,e),c.multiply(u,a,o),c.invert(w,o),c.transpose(w,w),i.uniformMatrix4fv(s.modelViewUniform,!1,o),i.uniformMatrix4fv(s.modelViewProjectionUniform,!1,u),i.uniformMatrix4fv(s.normalMatrixUniform,!1,w);if(h!==y.mesh.verticesBufferId&&(i.bindBuffer(i.ARRAY_BUFFER,y.mesh.verticesBufferId),i.vertexAttribPointer(s.positionVertex,3,i.FLOAT,!1,32,0),i.vertexAttribPointer(s.normalVertex,3,i.FLOAT,!1,32,12),i.vertexAttribPointer(s.texcoord,2,i.FLOAT,!1,32,24),h=y.mesh.verticesBufferId),s.isInstance){if(g!==y.modelBufferId){i.bindBuffer(i.ARRAY_BUFFER,y.modelBufferId);for(let t=0;t<4;t++)i.vertexAttribPointer(s.model+t,4,i.FLOAT,!1,64,16*t);f(s.modelAttribs,1),g=y.modelBufferId}if(x!==y.colorBufferId){i.bindBuffer(i.ARRAY_BUFFER,y.colorBufferId),i.vertexAttribPointer(s.colorInstance,4,i.UNSIGNED_BYTE,!0,4,0),f([s.colorInstance],1),x=y.colorBufferId}if(S!==y.pickBufferId){i.bindBuffer(i.ARRAY_BUFFER,y.pickBufferId),i.vertexAttribPointer(s.pickingInstance,4,i.UNSIGNED_BYTE,!0,4,0),f([s.pickingInstance],1),S=y.pickBufferId}}if(E!==y.mesh.elementsBufferId&&(i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,y.mesh.elementsBufferId),E=y.mesh.elementsBufferId),y.textureName&&T.hasOwnProperty(y.textureName)){let t=T[y.textureName];P!==t&&(i.uniform1i(I.texSamplerUniform,0),i.bindTexture(i.TEXTURE_2D,t),i.uniform1f(s.useTextureUniform,1),P=t)}else P!==A&&(i.uniform1i(I.texSamplerUniform,0),i.bindTexture(i.TEXTURE_2D,A),i.uniform1f(s.useTextureUniform,0),P=A);s.isInstance?!y.useBlending&&N?(i.disable(i.BLEND),N=!1):y.useBlending&&!N&&(i.enable(i.BLEND),N=!0):(y.color.a>=1&&N?(i.disable(i.BLEND),N=!1):y.color.a<1&&!N&&(i.enable(i.BLEND),N=!0),i.uniform4fv(s.colorUniform,y.color)),d.drawPicking&&!s.isInstance&&i.uniform4fv(I.pickingUniform,y.id),s.isInstance?U.drawElementsInstancedANGLE(i.TRIANGLES,y.mesh.count,i.UNSIGNED_SHORT,0,y.instanceCount):i.drawElements(i.TRIANGLES,y.mesh.count,i.UNSIGNED_SHORT,0)}_.length>0&&(s=m,i.useProgram(s.program),c.identity(e),c.multiply(o,n,e),c.multiply(u,a,o),i.uniform1f(s.unlitUniform,1),i.uniformMatrix4fv(s.modelViewUniform,!1,o),i.uniformMatrix4fv(s.modelViewProjectionUniform,!1,u));for(let t=0;t<_.length;t++){let e=_[t];i.uniform1i(s.texSamplerUniform,0),i.bindTexture(i.TEXTURE_2D,A),i.uniform1f(s.useTextureUniform,0),i.uniform4fv(s.colorUniform,e.color),i.bindBuffer(i.ARRAY_BUFFER,e.verticesBufferId),i.vertexAttribPointer(s.positionVertex,3,i.FLOAT,!1,e.vertexSize,0),i.vertexAttribPointer(s.normalVertex,3,i.FLOAT,!1,e.vertexSize,0),i.vertexAttribPointer(s.texcoord,2,i.FLOAT,!1,e.vertexSize,0),i.drawArrays(i.LINES,0,e.count)}i.bindTexture(i.TEXTURE_2D,null),i.useProgram(null),t([]),w=[]},this.updateViewBounds=function(){let t=y.element.getBoundingClientRect();y.element.width=t.width,y.element.height=t.height,y.width=t.width,y.height=t.height},this.onResize=function(t){y.element&&(d.updateViewBounds(),m&&(i.viewport(0,0,y.width,y.height),t&&d.draw()))},this.setDisableClear=function(t){O=t},this.setBackgroundColor=function(t,e,n,r){P.r=t,P.g=e,P.b=n,P.a=r,i&&i.clearColor(t,e,n,r)},this.setContext=function(t){i=t},this.setDummyTexture=function(t){A=t},this.getSharedRenderer=function(){let t=new r;return t.loadExtensions(),t.setContext(i),t.setDummyTexture(A),t.setCanvasElement(y.element),t.addProgram(m,r.DEFAULT_PROGRAM),t.addProgram(M,r.INSTACE_PROGRAM),t.addProgram(v,r.PICKING_PROGRAM),t.addProgram(E,r.INSTANCE_PICKING_PROGRAM),t},this.loadExtensions=function(){i.getExtension("ANGLE_instanced_arrays")&&(console.log("Context has ANGLE_instanced_arrays"),U=i.getExtension("ANGLE_instanced_arrays"),g=!0),i.getExtension("WEBGL_draw_buffers")&&(x=!0)},this.setCanvasElement=function(t){y.element=t,d.updateViewBounds()},this.load=function(t){d.setCanvasElement(t),i=t.getContext("webgl"),d.loadExtensions(),i.viewport(0,0,y.width,y.height),d.loadShaders(a.VERTEX_SHADER_SOURCE,a.FRAGMENT_SHADER_SOURCE,r.DEFAULT_PROGRAM),g&&d.loadShaders(a.INSTANCE_VERTEX_SHADER_SOURCE,a.FRAGMENT_SHADER_SOURCE,r.INSTACE_PROGRAM),x&&d.loadShaders(a.VERTEX_SHADER_SOURCE,a.PICK_FRAGMENT_SHADER_SOURCE,r.PICKING_PROGRAM),x&&g&&d.loadShaders(a.INSTANCE_VERTEX_SHADER_SOURCE,a.PICK_FRAGMENT_SHADER_SOURCE,r.INSTANCE_PICKING_PROGRAM),i.clearColor(P.r,P.g,P.b,P.a),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.DEPTH_TEST),A=i.createTexture(),i.bindTexture(i.TEXTURE_2D,A);let e=[];for(let t=0;t<16;t++)e.push(0);return i.texImage2D(i.TEXTURE_2D,0,i.RGBA,2,2,0,i.RGBA,i.UNSIGNED_BYTE,new Uint8Array(e)),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.bindTexture(i.TEXTURE_2D,null),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),i.depthFunc(i.LESS),!0},this.setDrawPicking=function(t){x&&(d.drawPicking=t,d.drawPicking?(m=R[r.PICKING_PROGRAM],M=R[r.INSTANCE_PICKING_PROGRAM],i&&d.setBackgroundColor(0,0,0,0)):(m=R[r.DEFAULT_PROGRAM],M=R[r.INSTACE_PROGRAM]))},this.getContext=function(){return i},this.setNextId=function(t){N=t},this.setViewMatrix=function(t){I=c.clone(t)},this.setScale=function(t){d.scale=l.clone(t)}}const a=t("./shaders"),o=t("./shaderbuilder");t("./framebuffer");let i=null;const u=t("gl-matrix"),l=u.vec3,s=u.vec4,c=u.mat4;r.DEFAULT_PROGRAM="_default",r.INSTACE_PROGRAM="_instance",r.PICKING_PROGRAM="_picking",r.INSTANCE_PICKING_PROGRAM="_instance_picking",e.exports=r},{"./framebuffer":3,"./shaderbuilder":8,"./shaders":9,"gl-matrix":6}],8:[function(t,e,n){"use strict";function r(t,e,n){let r=n.createShader(e);return n.shaderSource(r,t),n.compileShader(r),n.getShaderParameter(r,n.COMPILE_STATUS)?r:(console.log(n.getShaderInfoLog(r)),null)}n.createProgram=function(t,e,n){let a=r(t,n.VERTEX_SHADER,n),o=r(e,n.FRAGMENT_SHADER,n);if(a&&o){let t=n.createProgram();return n.attachShader(t,a),n.attachShader(t,o),n.linkProgram(t),n.getProgramParameter(t,n.LINK_STATUS)?t:(console.log("Error initing shader program"),null)}return null}},{}],9:[function(t,e,n){n.VERTEX_SHADER_SOURCE=`\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 texcoord;\n\nuniform highp mat4 modelView;\nuniform highp mat4 modelViewProjection;\nuniform highp mat4 normalMatrix;\nuniform vec4 color;\nuniform highp vec4 picking;\n\nvarying vec4 vPicking;\nvarying vec4 currentColor;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vTexcoord;\n\n\nvoid main (void)\n{\n    gl_Position =  modelViewProjection * vec4(position, 1.0);\n    \n    currentColor = color;\n\n    vTexcoord = texcoord;\n\n    vPicking = picking;\n    vec4 vPosition4 = modelView * vec4(position, 1.0);\n    vPosition = vPosition4.xyz / vPosition4.w;\n    \n    vNormal = mat3(normalMatrix) * normal;\n    vNormal = normalize(vNormal);\n}\n`,n.INSTANCE_VERTEX_SHADER_SOURCE=`\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 texcoord;\nattribute highp mat4 model;\nattribute vec4 colorInstance;\nattribute vec4 pickingInstance;\n\nuniform highp mat4 modelViewProjection;\nuniform highp mat4 modelView;\nuniform highp mat4 normalMatrix;\nuniform vec4 color;\n\nvarying highp vec4 vPicking;\nvarying vec4 currentColor;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vTexcoord;\n\n\nvoid main (void)\n{\n    gl_Position =  modelViewProjection * model * vec4(position, 1.0);\n    \n    currentColor = colorInstance;\n\n    vTexcoord = texcoord;\n\n    vec4 vPosition4 = modelView  * model * vec4(position, 1.0);\n    vPosition = vPosition4.xyz / vPosition4.w;\n    \n    vPicking = pickingInstance;\n    vNormal = mat3(modelView) * mat3(model) * normal;\n    vNormal = normalize(vNormal);\n}\n\n`,n.FRAGMENT_SHADER_SOURCE=`\nprecision mediump float;\nvarying vec4 currentColor;\nvarying vec3 vNormal;\nvarying vec2 vTexcoord;\nvarying vec3 vPosition;\nuniform vec3 lightPosition;\nuniform sampler2D texSampler;\nuniform float useTexture;\nuniform float unlit;\n\nvoid main(void)\n{\n    if(unlit >0.0)\n    {\n        gl_FragColor = currentColor;\n    }\n    else\n    {\n        vec3 lightDir = normalize(lightPosition - vPosition);\n    \n        // Ambient\n        vec3 ambient = vec3(0.1);\n        float d = abs(dot(vNormal, lightDir));\n        \n        // Diffuse\n        vec3 diffuse = vec3(d);\n        \n        vec3 illumination = diffuse + ambient;\n        if(useTexture == 0.0)\n        {\n            gl_FragColor = vec4(illumination * currentColor.rgb, currentColor.a);\n        }\n        else\n        {\n            vec4 texel = texture2D(texSampler, vTexcoord);\n            gl_FragColor = vec4(illumination * currentColor.rgb * texel.rgb, currentColor.a);            \n        }\n    }\n}\n`,n.PICK_FRAGMENT_SHADER_SOURCE=`\n#extension GL_EXT_draw_buffers : require \n\nprecision highp float;\n\nvarying vec4 currentColor;\nvarying vec3 vNormal;\nvarying vec2 vTexcoord;\nvarying vec3 vPosition;\nvarying vec4 vPicking;\n\nuniform vec3 lightPosition;\nuniform sampler2D texSampler;\nuniform float useTexture;\nuniform float unlit;\n\nvoid main(void)\n{\n    if(unlit >0.0)\n    {\n        gl_FragData[1] = currentColor;\n    }\n    else\n    {\n        vec3 lightDir = normalize(lightPosition - vPosition);\n        \n        // Ambient\n        vec3 ambient = vec3(0.1);\n        float d = abs(dot(vNormal, lightDir));\n        \n        // Diffuse\n        vec3 diffuse = vec3(d);\n        \n        vec3 illumination = diffuse + ambient;\n        if(useTexture == 0.0)\n        {\n            gl_FragData[1] = vec4(illumination * currentColor.rgb, currentColor.a);\n        }\n        else\n        {\n            vec4 texel = texture2D(texSampler, vTexcoord);\n            gl_FragData[1] = vec4(illumination * currentColor.rgb * texel.rgb, currentColor.a);            \n        }\n    }\n    gl_FragData[0] = vPicking;\n}\n`,n.FRAMEBUFFER_VERTEX_SHADER_SOURCE=`\nattribute vec2 position;\nvarying vec2 vPosition;\nuniform vec2 size;\nvarying vec2 pos;\n\nvoid main (void)\n{\n    gl_Position = vec4(position, 0, 1);\n    pos = (position + vec2(1)) * 0.5;\n}\n`,n.FRAMEBUFFER_FRAGMENT_SHADER_SOURCE=`\nprecision mediump float;\nvarying vec2 pos; \nuniform sampler2D texSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(texSampler, pos);\n}\n`},{}],10:[function(t,e,n){"use strict";e.exports=function(){let t=this,e=new Date;this.elapsedTime=function(){let t=parseFloat(e.getTime()),n=(new Date).getTime();return((n=parseFloat(n))-t)/1e3},this.restart=function(){e=new Date},this.tick=function(e){console.log(e+" "+t.elapsedTime()),t.restart()}}},{}]},{},[1]);

!function t(a,e,n){function r(l,i){if(!e[l]){if(!a[l]){var u="function"==typeof require&&require;if(!i&&u)return u(l,!0);if(o)return o(l,!0);var s=new Error("Cannot find module '"+l+"'");throw s.code="MODULE_NOT_FOUND",s}var c=e[l]={exports:{}};a[l][0].call(c.exports,function(t){var e=a[l][1][t];return r(e||t)},c,c.exports,t,a,e,n)}return e[l].exports}for(var o="function"==typeof require&&require,l=0;l<n.length;l++)r(n[l]);return r}({1:[function(t,a,e){let n=t("./gl-matrix.js");window.vec2=n.vec2,window.vec3=n.vec3,window.vec4=n.vec4,window.mat3=n.mat3,window.mat4=n.mat4;t("./renderer.js"),t("./shaders.js"),t("./camera.js"),t("./timer"),t("./lvrl/examine"),t("./lvrl/fly"),t("./lvrl/util")},{"./camera.js":2,"./gl-matrix.js":3,"./lvrl/examine":4,"./lvrl/fly":5,"./lvrl/util":6,"./renderer.js":7,"./shaders.js":8,"./timer":9}],2:[function(t,a,e){"use strict";window.Camera=function(){var t=this;let a=new Examine,e=new Fly,n=null,r={x:0,y:0,mousePress:!1},o={yawIntensity:0,pitchIntensity:0,pivot:vec3.fromValues(0,0,0),angularVelocity:0,zoomIntensity:0,maximumZoom:0,velocity:vec3.fromValues(0,0,0),forward:0,backward:0,left:0,right:0,up:0,down:0},l=!1,i=1,u=0;this.rotate=function(t,a){o.yawIntensity=t,o.pitchIntensity=a},this.zoom=function(t){o.zoomIntensity=t},this.setViewMatrix=function(t){l=!0,n.setViewMatrix(t)},this.getViewMatrix=function(){return n.getViewMatrix()},this.setCamera=function(t,a,e){let r=mat4.create();mat4.lookAt(r,t,a,e),n.setViewMatrix(r),o.pivot=vec3.clone(a),o.worldUp=vec3.clone(e),l=!0},this.setFlyMode=function(){if(u=1,n){let t=n.getViewMatrix();e.setViewMatrix(t),e.applyRestrictions(o.worldUp)}n=e},this.setExamineMode=function(){if(u=0,n){let t=n.getViewMatrix();a.setViewMatrix(t)}n=a},this.installCamera=function(a,e){let i=new Timer;a&&(a.addEventListener("mousedown",function(t){r.mousePress=!0,r.x=t.clientX,r.y=t.clientY}),a.addEventListener("mouseup",function(t){r.mousePress=!1}),a.addEventListener("mousemove",function(a){r.mousePress&&(t.rotate(-r.x+a.clientX,-r.y+a.clientY),r.x=a.clientX,r.y=a.clientY)}),a.addEventListener("wheel",function(a){let e=0;a.deltaMode==WheelEvent.DOM_DELTA_PIXEL?e=a.deltaY:a.deltaMode==WheelEvent.DOM_DELTA_LINE?e=33*a.deltaY:a.deltaY>0?e=10:a.delta<0&&(e=-10),t.zoom(.001*e)}),window.addEventListener("keydown",function(t){(!document.activeElement||"textarea"!==document.activeElement.tagName&&"input"!==document.activeElement.tagName)&&(!t.shiftKey||"W"!==t.key&&"w"!==t.key&&"ArrowUp"!==t.key?!t.shiftKey||"S"!==t.key&&"s"!==t.key&&"ArrowDown"!==t.key?"W"===t.key||"w"===t.key||"ArrowUp"===t.key?o.forward=1:"S"===t.key||"s"===t.key||"ArrowDown"===t.key?o.backward=1:"A"===t.key||"a"===t.key||"ArrowLeft"===t.key?o.left=1:"D"!==t.key&&"d"!==t.key&&"ArrowRight"!==t.key||(o.right=1):o.down=1:o.up=1)}),window.addEventListener("keyup",function(t){"W"===t.key||"w"===t.key||"ArrowUp"===t.key?(o.up=0,o.forward=0):"S"===t.key||"s"===t.key||"ArrowDown"===t.key?(o.backward=0,o.down=0):"A"===t.key||"a"===t.key||"ArrowLeft"===t.key?o.left=0:"D"!==t.key&&"d"!==t.key&&"ArrowRight"!==t.key||(o.right=0)}));let u=function(){let t=i.elapsedTime();e&&(n.update(t,o)||l)&&(e(n.getViewMatrix(),t),l=!1),window.requestAnimationFrame(u),i.restart()};e&&e(n.getViewMatrix(),0),u()},this.setVelocity=function(t){i=t,o.velocity=vec3.fromValues(1*i,1*i,1*i)};!function(){t.setExamineMode();let a=vec3.fromValues(0,0,-5),e=vec3.fromValues(0,0,0),r=vec3.fromValues(0,1,0),l=mat4.create();mat4.lookAt(l,a,e,r),n.setViewMatrix(l),o.pivot=vec3.clone(e),o.worldUp=vec3.clone(r),o.angularVelocity=30,o.maximumZoom=1,o.velocity=vec3.fromValues(1,1,1)}()}},{}],3:[function(t,a,e){!function(t,n){if("object"==typeof e&&"object"==typeof a)a.exports=n();else if("function"==typeof define&&define.amd)define([],n);else{var r=n();for(var o in r)("object"==typeof e?e:t)[o]=r[o]}}(this,function(){return function(t){function a(n){if(e[n])return e[n].exports;var r=e[n]={exports:{},id:n,loaded:!1};return t[n].call(r.exports,r,r.exports,a),r.loaded=!0,r.exports}var e={};return a.m=t,a.c=e,a.p="",a(0)}([function(t,a,e){a.glMatrix=e(1),a.mat2=e(2),a.mat2d=e(3),a.mat3=e(4),a.mat4=e(5),a.quat=e(6),a.vec2=e(9),a.vec3=e(7),a.vec4=e(8)},function(t,a){var e={};e.EPSILON=1e-6,e.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,e.RANDOM=Math.random,e.ENABLE_SIMD=!1,e.SIMD_AVAILABLE=e.ARRAY_TYPE===this.Float32Array&&"undefined"!=typeof SIMD,e.USE_SIMD=e.ENABLE_SIMD&&e.SIMD_AVAILABLE,e.setMatrixArrayType=function(t){e.ARRAY_TYPE=t};var n=Math.PI/180;e.toRadian=function(t){return t*n},e.equals=function(t,a){return Math.abs(t-a)<=e.EPSILON*Math.max(1,Math.abs(t),Math.abs(a))},t.exports=e},function(t,a,e){var n=e(1),r={};r.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.clone=function(t){var a=new n.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},r.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},r.fromValues=function(t,a,e,r){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=a,o[2]=e,o[3]=r,o},r.set=function(t,a,e,n,r){return t[0]=a,t[1]=e,t[2]=n,t[3]=r,t},r.transpose=function(t,a){if(t===a){var e=a[1];t[1]=a[2],t[2]=e}else t[0]=a[0],t[1]=a[2],t[2]=a[1],t[3]=a[3];return t},r.invert=function(t,a){var e=a[0],n=a[1],r=a[2],o=a[3],l=e*o-r*n;return l?(l=1/l,t[0]=o*l,t[1]=-n*l,t[2]=-r*l,t[3]=e*l,t):null},r.adjoint=function(t,a){var e=a[0];return t[0]=a[3],t[1]=-a[1],t[2]=-a[2],t[3]=e,t},r.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},r.multiply=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=a[3],i=e[0],u=e[1],s=e[2],c=e[3];return t[0]=n*i+o*u,t[1]=r*i+l*u,t[2]=n*s+o*c,t[3]=r*s+l*c,t},r.mul=r.multiply,r.rotate=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=a[3],i=Math.sin(e),u=Math.cos(e);return t[0]=n*u+o*i,t[1]=r*u+l*i,t[2]=n*-i+o*u,t[3]=r*-i+l*u,t},r.scale=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=a[3],i=e[0],u=e[1];return t[0]=n*i,t[1]=r*i,t[2]=o*u,t[3]=l*u,t},r.fromRotation=function(t,a){var e=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t},r.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t},r.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},r.LDU=function(t,a,e,n){return t[2]=n[2]/n[0],e[0]=n[0],e[1]=n[1],e[3]=n[3]-t[2]*e[1],[t,a,e]},r.add=function(t,a,e){return t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t[3]=a[3]+e[3],t},r.subtract=function(t,a,e){return t[0]=a[0]-e[0],t[1]=a[1]-e[1],t[2]=a[2]-e[2],t[3]=a[3]-e[3],t},r.sub=r.subtract,r.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},r.equals=function(t,a){var e=t[0],r=t[1],o=t[2],l=t[3],i=a[0],u=a[1],s=a[2],c=a[3];return Math.abs(e-i)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-s)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(l-c)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(c))},r.multiplyScalar=function(t,a,e){return t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e,t[3]=a[3]*e,t},r.multiplyScalarAndAdd=function(t,a,e,n){return t[0]=a[0]+e[0]*n,t[1]=a[1]+e[1]*n,t[2]=a[2]+e[2]*n,t[3]=a[3]+e[3]*n,t},t.exports=r},function(t,a,e){var n=e(1),r={};r.create=function(){var t=new n.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.clone=function(t){var a=new n.ARRAY_TYPE(6);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a},r.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},r.fromValues=function(t,a,e,r,o,l){var i=new n.ARRAY_TYPE(6);return i[0]=t,i[1]=a,i[2]=e,i[3]=r,i[4]=o,i[5]=l,i},r.set=function(t,a,e,n,r,o,l){return t[0]=a,t[1]=e,t[2]=n,t[3]=r,t[4]=o,t[5]=l,t},r.invert=function(t,a){var e=a[0],n=a[1],r=a[2],o=a[3],l=a[4],i=a[5],u=e*o-n*r;return u?(u=1/u,t[0]=o*u,t[1]=-n*u,t[2]=-r*u,t[3]=e*u,t[4]=(r*i-o*l)*u,t[5]=(n*l-e*i)*u,t):null},r.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},r.multiply=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=a[3],i=a[4],u=a[5],s=e[0],c=e[1],M=e[2],f=e[3],m=e[4],h=e[5];return t[0]=n*s+o*c,t[1]=r*s+l*c,t[2]=n*M+o*f,t[3]=r*M+l*f,t[4]=n*m+o*h+i,t[5]=r*m+l*h+u,t},r.mul=r.multiply,r.rotate=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=a[3],i=a[4],u=a[5],s=Math.sin(e),c=Math.cos(e);return t[0]=n*c+o*s,t[1]=r*c+l*s,t[2]=n*-s+o*c,t[3]=r*-s+l*c,t[4]=i,t[5]=u,t},r.scale=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=a[3],i=a[4],u=a[5],s=e[0],c=e[1];return t[0]=n*s,t[1]=r*s,t[2]=o*c,t[3]=l*c,t[4]=i,t[5]=u,t},r.translate=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=a[3],i=a[4],u=a[5],s=e[0],c=e[1];return t[0]=n,t[1]=r,t[2]=o,t[3]=l,t[4]=n*s+o*c+i,t[5]=r*s+l*c+u,t},r.fromRotation=function(t,a){var e=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=e,t[2]=-e,t[3]=n,t[4]=0,t[5]=0,t},r.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=a[1],t[4]=0,t[5]=0,t},r.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=a[0],t[5]=a[1],t},r.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},r.add=function(t,a,e){return t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t[3]=a[3]+e[3],t[4]=a[4]+e[4],t[5]=a[5]+e[5],t},r.subtract=function(t,a,e){return t[0]=a[0]-e[0],t[1]=a[1]-e[1],t[2]=a[2]-e[2],t[3]=a[3]-e[3],t[4]=a[4]-e[4],t[5]=a[5]-e[5],t},r.sub=r.subtract,r.multiplyScalar=function(t,a,e){return t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e,t[3]=a[3]*e,t[4]=a[4]*e,t[5]=a[5]*e,t},r.multiplyScalarAndAdd=function(t,a,e,n){return t[0]=a[0]+e[0]*n,t[1]=a[1]+e[1]*n,t[2]=a[2]+e[2]*n,t[3]=a[3]+e[3]*n,t[4]=a[4]+e[4]*n,t[5]=a[5]+e[5]*n,t},r.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]},r.equals=function(t,a){var e=t[0],r=t[1],o=t[2],l=t[3],i=t[4],u=t[5],s=a[0],c=a[1],M=a[2],f=a[3],m=a[4],h=a[5];return Math.abs(e-s)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(r-c)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(o-M)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(M))&&Math.abs(l-f)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(f))&&Math.abs(i-m)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(m))&&Math.abs(u-h)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(h))},t.exports=r},function(t,a,e){var n=e(1),r={};r.create=function(){var t=new n.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat4=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[4],t[4]=a[5],t[5]=a[6],t[6]=a[8],t[7]=a[9],t[8]=a[10],t},r.clone=function(t){var a=new n.ARRAY_TYPE(9);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a},r.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},r.fromValues=function(t,a,e,r,o,l,i,u,s){var c=new n.ARRAY_TYPE(9);return c[0]=t,c[1]=a,c[2]=e,c[3]=r,c[4]=o,c[5]=l,c[6]=i,c[7]=u,c[8]=s,c},r.set=function(t,a,e,n,r,o,l,i,u,s){return t[0]=a,t[1]=e,t[2]=n,t[3]=r,t[4]=o,t[5]=l,t[6]=i,t[7]=u,t[8]=s,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.transpose=function(t,a){if(t===a){var e=a[1],n=a[2],r=a[5];t[1]=a[3],t[2]=a[6],t[3]=e,t[5]=a[7],t[6]=n,t[7]=r}else t[0]=a[0],t[1]=a[3],t[2]=a[6],t[3]=a[1],t[4]=a[4],t[5]=a[7],t[6]=a[2],t[7]=a[5],t[8]=a[8];return t},r.invert=function(t,a){var e=a[0],n=a[1],r=a[2],o=a[3],l=a[4],i=a[5],u=a[6],s=a[7],c=a[8],M=c*l-i*s,f=-c*o+i*u,m=s*o-l*u,h=e*M+n*f+r*m;return h?(h=1/h,t[0]=M*h,t[1]=(-c*n+r*s)*h,t[2]=(i*n-r*l)*h,t[3]=f*h,t[4]=(c*e-r*u)*h,t[5]=(-i*e+r*o)*h,t[6]=m*h,t[7]=(-s*e+n*u)*h,t[8]=(l*e-n*o)*h,t):null},r.adjoint=function(t,a){var e=a[0],n=a[1],r=a[2],o=a[3],l=a[4],i=a[5],u=a[6],s=a[7],c=a[8];return t[0]=l*c-i*s,t[1]=r*s-n*c,t[2]=n*i-r*l,t[3]=i*u-o*c,t[4]=e*c-r*u,t[5]=r*o-e*i,t[6]=o*s-l*u,t[7]=n*u-e*s,t[8]=e*l-n*o,t},r.determinant=function(t){var a=t[0],e=t[1],n=t[2],r=t[3],o=t[4],l=t[5],i=t[6],u=t[7],s=t[8];return a*(s*o-l*u)+e*(-s*r+l*i)+n*(u*r-o*i)},r.multiply=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=a[3],i=a[4],u=a[5],s=a[6],c=a[7],M=a[8],f=e[0],m=e[1],h=e[2],x=e[3],I=e[4],d=e[5],S=e[6],D=e[7],v=e[8];return t[0]=f*n+m*l+h*s,t[1]=f*r+m*i+h*c,t[2]=f*o+m*u+h*M,t[3]=x*n+I*l+d*s,t[4]=x*r+I*i+d*c,t[5]=x*o+I*u+d*M,t[6]=S*n+D*l+v*s,t[7]=S*r+D*i+v*c,t[8]=S*o+D*u+v*M,t},r.mul=r.multiply,r.translate=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=a[3],i=a[4],u=a[5],s=a[6],c=a[7],M=a[8],f=e[0],m=e[1];return t[0]=n,t[1]=r,t[2]=o,t[3]=l,t[4]=i,t[5]=u,t[6]=f*n+m*l+s,t[7]=f*r+m*i+c,t[8]=f*o+m*u+M,t},r.rotate=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=a[3],i=a[4],u=a[5],s=a[6],c=a[7],M=a[8],f=Math.sin(e),m=Math.cos(e);return t[0]=m*n+f*l,t[1]=m*r+f*i,t[2]=m*o+f*u,t[3]=m*l-f*n,t[4]=m*i-f*r,t[5]=m*u-f*o,t[6]=s,t[7]=c,t[8]=M,t},r.scale=function(t,a,e){var n=e[0],r=e[1];return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=r*a[3],t[4]=r*a[4],t[5]=r*a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t},r.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=a[0],t[7]=a[1],t[8]=1,t},r.fromRotation=function(t,a){var e=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=e,t[2]=0,t[3]=-e,t[4]=n,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=a[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},r.fromMat2d=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=0,t[3]=a[2],t[4]=a[3],t[5]=0,t[6]=a[4],t[7]=a[5],t[8]=1,t},r.fromQuat=function(t,a){var e=a[0],n=a[1],r=a[2],o=a[3],l=e+e,i=n+n,u=r+r,s=e*l,c=n*l,M=n*i,f=r*l,m=r*i,h=r*u,x=o*l,I=o*i,d=o*u;return t[0]=1-M-h,t[3]=c-d,t[6]=f+I,t[1]=c+d,t[4]=1-s-h,t[7]=m-x,t[2]=f-I,t[5]=m+x,t[8]=1-s-M,t},r.normalFromMat4=function(t,a){var e=a[0],n=a[1],r=a[2],o=a[3],l=a[4],i=a[5],u=a[6],s=a[7],c=a[8],M=a[9],f=a[10],m=a[11],h=a[12],x=a[13],I=a[14],d=a[15],S=e*i-n*l,D=e*u-r*l,v=e*s-o*l,F=n*u-r*i,E=n*s-o*i,p=r*s-o*u,b=c*x-M*h,w=c*I-f*h,A=c*d-m*h,R=M*I-f*x,g=M*d-m*x,y=f*d-m*I,T=S*y-D*g+v*R+F*A-E*w+p*b;return T?(T=1/T,t[0]=(i*y-u*g+s*R)*T,t[1]=(u*A-l*y-s*w)*T,t[2]=(l*g-i*A+s*b)*T,t[3]=(r*g-n*y-o*R)*T,t[4]=(e*y-r*A+o*w)*T,t[5]=(n*A-e*g-o*b)*T,t[6]=(x*p-I*E+d*F)*T,t[7]=(I*v-h*p-d*D)*T,t[8]=(h*E-x*v+d*S)*T,t):null},r.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},r.add=function(t,a,e){return t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t[3]=a[3]+e[3],t[4]=a[4]+e[4],t[5]=a[5]+e[5],t[6]=a[6]+e[6],t[7]=a[7]+e[7],t[8]=a[8]+e[8],t},r.subtract=function(t,a,e){return t[0]=a[0]-e[0],t[1]=a[1]-e[1],t[2]=a[2]-e[2],t[3]=a[3]-e[3],t[4]=a[4]-e[4],t[5]=a[5]-e[5],t[6]=a[6]-e[6],t[7]=a[7]-e[7],t[8]=a[8]-e[8],t},r.sub=r.subtract,r.multiplyScalar=function(t,a,e){return t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e,t[3]=a[3]*e,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*e,t},r.multiplyScalarAndAdd=function(t,a,e,n){return t[0]=a[0]+e[0]*n,t[1]=a[1]+e[1]*n,t[2]=a[2]+e[2]*n,t[3]=a[3]+e[3]*n,t[4]=a[4]+e[4]*n,t[5]=a[5]+e[5]*n,t[6]=a[6]+e[6]*n,t[7]=a[7]+e[7]*n,t[8]=a[8]+e[8]*n,t},r.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]},r.equals=function(t,a){var e=t[0],r=t[1],o=t[2],l=t[3],i=t[4],u=t[5],s=t[6],c=t[7],M=t[8],f=a[0],m=a[1],h=a[2],x=a[3],I=a[4],d=a[5],S=a[6],D=a[7],v=a[8];return Math.abs(e-f)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(f))&&Math.abs(r-m)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(o-h)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(h))&&Math.abs(l-x)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(x))&&Math.abs(i-I)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(I))&&Math.abs(u-d)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(d))&&Math.abs(s-S)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(S))&&Math.abs(c-D)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(D))&&Math.abs(M-v)<=n.EPSILON*Math.max(1,Math.abs(M),Math.abs(v))},t.exports=r},function(t,a,e){var n=e(1),r={scalar:{},SIMD:{}};r.create=function(){var t=new n.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.clone=function(t){var a=new n.ARRAY_TYPE(16);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a[4]=t[4],a[5]=t[5],a[6]=t[6],a[7]=t[7],a[8]=t[8],a[9]=t[9],a[10]=t[10],a[11]=t[11],a[12]=t[12],a[13]=t[13],a[14]=t[14],a[15]=t[15],a},r.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},r.fromValues=function(t,a,e,r,o,l,i,u,s,c,M,f,m,h,x,I){var d=new n.ARRAY_TYPE(16);return d[0]=t,d[1]=a,d[2]=e,d[3]=r,d[4]=o,d[5]=l,d[6]=i,d[7]=u,d[8]=s,d[9]=c,d[10]=M,d[11]=f,d[12]=m,d[13]=h,d[14]=x,d[15]=I,d},r.set=function(t,a,e,n,r,o,l,i,u,s,c,M,f,m,h,x,I){return t[0]=a,t[1]=e,t[2]=n,t[3]=r,t[4]=o,t[5]=l,t[6]=i,t[7]=u,t[8]=s,t[9]=c,t[10]=M,t[11]=f,t[12]=m,t[13]=h,t[14]=x,t[15]=I,t},r.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.scalar.transpose=function(t,a){if(t===a){var e=a[1],n=a[2],r=a[3],o=a[6],l=a[7],i=a[11];t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=e,t[6]=a[9],t[7]=a[13],t[8]=n,t[9]=o,t[11]=a[14],t[12]=r,t[13]=l,t[14]=i}else t[0]=a[0],t[1]=a[4],t[2]=a[8],t[3]=a[12],t[4]=a[1],t[5]=a[5],t[6]=a[9],t[7]=a[13],t[8]=a[2],t[9]=a[6],t[10]=a[10],t[11]=a[14],t[12]=a[3],t[13]=a[7],t[14]=a[11],t[15]=a[15];return t},r.SIMD.transpose=function(t,a){var e,n,r,o,l,i,u,s,c,M;return e=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),r=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12),l=SIMD.Float32x4.shuffle(e,n,0,1,4,5),i=SIMD.Float32x4.shuffle(r,o,0,1,4,5),u=SIMD.Float32x4.shuffle(l,i,0,2,4,6),s=SIMD.Float32x4.shuffle(l,i,1,3,5,7),SIMD.Float32x4.store(t,0,u),SIMD.Float32x4.store(t,4,s),l=SIMD.Float32x4.shuffle(e,n,2,3,6,7),i=SIMD.Float32x4.shuffle(r,o,2,3,6,7),c=SIMD.Float32x4.shuffle(l,i,0,2,4,6),M=SIMD.Float32x4.shuffle(l,i,1,3,5,7),SIMD.Float32x4.store(t,8,c),SIMD.Float32x4.store(t,12,M),t},r.transpose=n.USE_SIMD?r.SIMD.transpose:r.scalar.transpose,r.scalar.invert=function(t,a){var e=a[0],n=a[1],r=a[2],o=a[3],l=a[4],i=a[5],u=a[6],s=a[7],c=a[8],M=a[9],f=a[10],m=a[11],h=a[12],x=a[13],I=a[14],d=a[15],S=e*i-n*l,D=e*u-r*l,v=e*s-o*l,F=n*u-r*i,E=n*s-o*i,p=r*s-o*u,b=c*x-M*h,w=c*I-f*h,A=c*d-m*h,R=M*I-f*x,g=M*d-m*x,y=f*d-m*I,T=S*y-D*g+v*R+F*A-E*w+p*b;return T?(T=1/T,t[0]=(i*y-u*g+s*R)*T,t[1]=(r*g-n*y-o*R)*T,t[2]=(x*p-I*E+d*F)*T,t[3]=(f*E-M*p-m*F)*T,t[4]=(u*A-l*y-s*w)*T,t[5]=(e*y-r*A+o*w)*T,t[6]=(I*v-h*p-d*D)*T,t[7]=(c*p-f*v+m*D)*T,t[8]=(l*g-i*A+s*b)*T,t[9]=(n*A-e*g-o*b)*T,t[10]=(h*E-x*v+d*S)*T,t[11]=(M*v-c*E-m*S)*T,t[12]=(i*w-l*R-u*b)*T,t[13]=(e*R-n*w+r*b)*T,t[14]=(x*D-h*F-I*S)*T,t[15]=(c*F-M*D+f*S)*T,t):null},r.SIMD.invert=function(t,a){var e,n,r,o,l,i,u,s,c,M,f=SIMD.Float32x4.load(a,0),m=SIMD.Float32x4.load(a,4),h=SIMD.Float32x4.load(a,8),x=SIMD.Float32x4.load(a,12);return l=SIMD.Float32x4.shuffle(f,m,0,1,4,5),n=SIMD.Float32x4.shuffle(h,x,0,1,4,5),e=SIMD.Float32x4.shuffle(l,n,0,2,4,6),n=SIMD.Float32x4.shuffle(n,l,1,3,5,7),l=SIMD.Float32x4.shuffle(f,m,2,3,6,7),o=SIMD.Float32x4.shuffle(h,x,2,3,6,7),r=SIMD.Float32x4.shuffle(l,o,0,2,4,6),o=SIMD.Float32x4.shuffle(o,l,1,3,5,7),l=SIMD.Float32x4.mul(r,o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),i=SIMD.Float32x4.mul(n,l),u=SIMD.Float32x4.mul(e,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.sub(SIMD.Float32x4.mul(n,l),i),u=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,l),u),u=SIMD.Float32x4.swizzle(u,2,3,0,1),l=SIMD.Float32x4.mul(n,r),l=SIMD.Float32x4.swizzle(l,1,0,3,2),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),i),c=SIMD.Float32x4.mul(e,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(o,l)),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,l),c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),l=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(n,2,3,0,1),o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),r=SIMD.Float32x4.swizzle(r,2,3,0,1),i=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,l),i),s=SIMD.Float32x4.mul(e,l),l=SIMD.Float32x4.swizzle(l,2,3,0,1),i=SIMD.Float32x4.sub(i,SIMD.Float32x4.mul(r,l)),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(e,l),s),s=SIMD.Float32x4.swizzle(s,2,3,0,1),l=SIMD.Float32x4.mul(e,n),l=SIMD.Float32x4.swizzle(l,1,0,3,2),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),s),c=SIMD.Float32x4.sub(SIMD.Float32x4.mul(r,l),c),l=SIMD.Float32x4.swizzle(l,2,3,0,1),s=SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,l),s),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(r,l)),l=SIMD.Float32x4.mul(e,o),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(r,l)),s=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,l),s),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(r,l),u),s=SIMD.Float32x4.sub(s,SIMD.Float32x4.mul(n,l)),l=SIMD.Float32x4.mul(e,r),l=SIMD.Float32x4.swizzle(l,1,0,3,2),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(o,l),u),c=SIMD.Float32x4.sub(c,SIMD.Float32x4.mul(n,l)),l=SIMD.Float32x4.swizzle(l,2,3,0,1),u=SIMD.Float32x4.sub(u,SIMD.Float32x4.mul(o,l)),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(n,l),c),M=SIMD.Float32x4.mul(e,i),M=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(M,2,3,0,1),M),M=SIMD.Float32x4.add(SIMD.Float32x4.swizzle(M,1,0,3,2),M),l=SIMD.Float32x4.reciprocalApproximation(M),M=SIMD.Float32x4.sub(SIMD.Float32x4.add(l,l),SIMD.Float32x4.mul(M,SIMD.Float32x4.mul(l,l))),(M=SIMD.Float32x4.swizzle(M,0,0,0,0))?(SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(M,i)),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(M,u)),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(M,s)),SIMD.Float32x4.store(t,12,SIMD.Float32x4.mul(M,c)),t):null},r.invert=n.USE_SIMD?r.SIMD.invert:r.scalar.invert,r.scalar.adjoint=function(t,a){var e=a[0],n=a[1],r=a[2],o=a[3],l=a[4],i=a[5],u=a[6],s=a[7],c=a[8],M=a[9],f=a[10],m=a[11],h=a[12],x=a[13],I=a[14],d=a[15];return t[0]=i*(f*d-m*I)-M*(u*d-s*I)+x*(u*m-s*f),t[1]=-(n*(f*d-m*I)-M*(r*d-o*I)+x*(r*m-o*f)),t[2]=n*(u*d-s*I)-i*(r*d-o*I)+x*(r*s-o*u),t[3]=-(n*(u*m-s*f)-i*(r*m-o*f)+M*(r*s-o*u)),t[4]=-(l*(f*d-m*I)-c*(u*d-s*I)+h*(u*m-s*f)),t[5]=e*(f*d-m*I)-c*(r*d-o*I)+h*(r*m-o*f),t[6]=-(e*(u*d-s*I)-l*(r*d-o*I)+h*(r*s-o*u)),t[7]=e*(u*m-s*f)-l*(r*m-o*f)+c*(r*s-o*u),t[8]=l*(M*d-m*x)-c*(i*d-s*x)+h*(i*m-s*M),t[9]=-(e*(M*d-m*x)-c*(n*d-o*x)+h*(n*m-o*M)),t[10]=e*(i*d-s*x)-l*(n*d-o*x)+h*(n*s-o*i),t[11]=-(e*(i*m-s*M)-l*(n*m-o*M)+c*(n*s-o*i)),t[12]=-(l*(M*I-f*x)-c*(i*I-u*x)+h*(i*f-u*M)),t[13]=e*(M*I-f*x)-c*(n*I-r*x)+h*(n*f-r*M),t[14]=-(e*(i*I-u*x)-l*(n*I-r*x)+h*(n*u-r*i)),t[15]=e*(i*f-u*M)-l*(n*f-r*M)+c*(n*u-r*i),t},r.SIMD.adjoint=function(t,a){var e,n,r,o,l,i,u,s,c,M,f,m,h;return e=SIMD.Float32x4.load(a,0),n=SIMD.Float32x4.load(a,4),r=SIMD.Float32x4.load(a,8),o=SIMD.Float32x4.load(a,12),c=SIMD.Float32x4.shuffle(e,n,0,1,4,5),i=SIMD.Float32x4.shuffle(r,o,0,1,4,5),l=SIMD.Float32x4.shuffle(c,i,0,2,4,6),i=SIMD.Float32x4.shuffle(i,c,1,3,5,7),c=SIMD.Float32x4.shuffle(e,n,2,3,6,7),s=SIMD.Float32x4.shuffle(r,o,2,3,6,7),u=SIMD.Float32x4.shuffle(c,s,0,2,4,6),s=SIMD.Float32x4.shuffle(s,c,1,3,5,7),c=SIMD.Float32x4.mul(u,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),M=SIMD.Float32x4.mul(i,c),f=SIMD.Float32x4.mul(l,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.sub(SIMD.Float32x4.mul(i,c),M),f=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),f),f=SIMD.Float32x4.swizzle(f,2,3,0,1),c=SIMD.Float32x4.mul(i,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),M),h=SIMD.Float32x4.mul(l,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(s,c)),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),h),h=SIMD.Float32x4.swizzle(h,2,3,0,1),c=SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,3,0,1),s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),u=SIMD.Float32x4.swizzle(u,2,3,0,1),M=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),M),m=SIMD.Float32x4.mul(l,c),c=SIMD.Float32x4.swizzle(c,2,3,0,1),M=SIMD.Float32x4.sub(M,SIMD.Float32x4.mul(u,c)),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,c),m),m=SIMD.Float32x4.swizzle(m,2,3,0,1),c=SIMD.Float32x4.mul(l,i),c=SIMD.Float32x4.swizzle(c,1,0,3,2),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),m),h=SIMD.Float32x4.sub(SIMD.Float32x4.mul(u,c),h),c=SIMD.Float32x4.swizzle(c,2,3,0,1),m=SIMD.Float32x4.sub(SIMD.Float32x4.mul(s,c),m),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(u,c)),c=SIMD.Float32x4.mul(l,s),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(u,c)),m=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,c),m),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(u,c),f),m=SIMD.Float32x4.sub(m,SIMD.Float32x4.mul(i,c)),c=SIMD.Float32x4.mul(l,u),c=SIMD.Float32x4.swizzle(c,1,0,3,2),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(s,c),f),h=SIMD.Float32x4.sub(h,SIMD.Float32x4.mul(i,c)),c=SIMD.Float32x4.swizzle(c,2,3,0,1),f=SIMD.Float32x4.sub(f,SIMD.Float32x4.mul(s,c)),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(i,c),h),SIMD.Float32x4.store(t,0,M),SIMD.Float32x4.store(t,4,f),SIMD.Float32x4.store(t,8,m),SIMD.Float32x4.store(t,12,h),t},r.adjoint=n.USE_SIMD?r.SIMD.adjoint:r.scalar.adjoint,r.determinant=function(t){var a=t[0],e=t[1],n=t[2],r=t[3],o=t[4],l=t[5],i=t[6],u=t[7],s=t[8],c=t[9],M=t[10],f=t[11],m=t[12],h=t[13],x=t[14],I=t[15];return(a*l-e*o)*(M*I-f*x)-(a*i-n*o)*(c*I-f*h)+(a*u-r*o)*(c*x-M*h)+(e*i-n*l)*(s*I-f*m)-(e*u-r*l)*(s*x-M*m)+(n*u-r*i)*(s*h-c*m)},r.SIMD.multiply=function(t,a,e){var n=SIMD.Float32x4.load(a,0),r=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),l=SIMD.Float32x4.load(a,12),i=SIMD.Float32x4.load(e,0),u=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(i,3,3,3,3),l))));SIMD.Float32x4.store(t,0,u);var s=SIMD.Float32x4.load(e,4),c=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(s,3,3,3,3),l))));SIMD.Float32x4.store(t,4,c);var M=SIMD.Float32x4.load(e,8),f=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(M,3,3,3,3),l))));SIMD.Float32x4.store(t,8,f);var m=SIMD.Float32x4.load(e,12),h=SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,0,0,0,0),n),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,1,1,1,1),r),SIMD.Float32x4.add(SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,2,2,2,2),o),SIMD.Float32x4.mul(SIMD.Float32x4.swizzle(m,3,3,3,3),l))));return SIMD.Float32x4.store(t,12,h),t},r.scalar.multiply=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=a[3],i=a[4],u=a[5],s=a[6],c=a[7],M=a[8],f=a[9],m=a[10],h=a[11],x=a[12],I=a[13],d=a[14],S=a[15],D=e[0],v=e[1],F=e[2],E=e[3];return t[0]=D*n+v*i+F*M+E*x,t[1]=D*r+v*u+F*f+E*I,t[2]=D*o+v*s+F*m+E*d,t[3]=D*l+v*c+F*h+E*S,D=e[4],v=e[5],F=e[6],E=e[7],t[4]=D*n+v*i+F*M+E*x,t[5]=D*r+v*u+F*f+E*I,t[6]=D*o+v*s+F*m+E*d,t[7]=D*l+v*c+F*h+E*S,D=e[8],v=e[9],F=e[10],E=e[11],t[8]=D*n+v*i+F*M+E*x,t[9]=D*r+v*u+F*f+E*I,t[10]=D*o+v*s+F*m+E*d,t[11]=D*l+v*c+F*h+E*S,D=e[12],v=e[13],F=e[14],E=e[15],t[12]=D*n+v*i+F*M+E*x,t[13]=D*r+v*u+F*f+E*I,t[14]=D*o+v*s+F*m+E*d,t[15]=D*l+v*c+F*h+E*S,t},r.multiply=n.USE_SIMD?r.SIMD.multiply:r.scalar.multiply,r.mul=r.multiply,r.scalar.translate=function(t,a,e){var n,r,o,l,i,u,s,c,M,f,m,h,x=e[0],I=e[1],d=e[2];return a===t?(t[12]=a[0]*x+a[4]*I+a[8]*d+a[12],t[13]=a[1]*x+a[5]*I+a[9]*d+a[13],t[14]=a[2]*x+a[6]*I+a[10]*d+a[14],t[15]=a[3]*x+a[7]*I+a[11]*d+a[15]):(n=a[0],r=a[1],o=a[2],l=a[3],i=a[4],u=a[5],s=a[6],c=a[7],M=a[8],f=a[9],m=a[10],h=a[11],t[0]=n,t[1]=r,t[2]=o,t[3]=l,t[4]=i,t[5]=u,t[6]=s,t[7]=c,t[8]=M,t[9]=f,t[10]=m,t[11]=h,t[12]=n*x+i*I+M*d+a[12],t[13]=r*x+u*I+f*d+a[13],t[14]=o*x+s*I+m*d+a[14],t[15]=l*x+c*I+h*d+a[15]),t},r.SIMD.translate=function(t,a,e){var n=SIMD.Float32x4.load(a,0),r=SIMD.Float32x4.load(a,4),o=SIMD.Float32x4.load(a,8),l=SIMD.Float32x4.load(a,12),i=SIMD.Float32x4(e[0],e[1],e[2],0);a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11]),n=SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(i,0,0,0,0)),r=SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(i,1,1,1,1)),o=SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(i,2,2,2,2));var u=SIMD.Float32x4.add(n,SIMD.Float32x4.add(r,SIMD.Float32x4.add(o,l)));return SIMD.Float32x4.store(t,12,u),t},r.translate=n.USE_SIMD?r.SIMD.translate:r.scalar.translate,r.scalar.scale=function(t,a,e){var n=e[0],r=e[1],o=e[2];return t[0]=a[0]*n,t[1]=a[1]*n,t[2]=a[2]*n,t[3]=a[3]*n,t[4]=a[4]*r,t[5]=a[5]*r,t[6]=a[6]*r,t[7]=a[7]*r,t[8]=a[8]*o,t[9]=a[9]*o,t[10]=a[10]*o,t[11]=a[11]*o,t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},r.SIMD.scale=function(t,a,e){var n,r,o,l=SIMD.Float32x4(e[0],e[1],e[2],0);return n=SIMD.Float32x4.load(a,0),SIMD.Float32x4.store(t,0,SIMD.Float32x4.mul(n,SIMD.Float32x4.swizzle(l,0,0,0,0))),r=SIMD.Float32x4.load(a,4),SIMD.Float32x4.store(t,4,SIMD.Float32x4.mul(r,SIMD.Float32x4.swizzle(l,1,1,1,1))),o=SIMD.Float32x4.load(a,8),SIMD.Float32x4.store(t,8,SIMD.Float32x4.mul(o,SIMD.Float32x4.swizzle(l,2,2,2,2))),t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15],t},r.scale=n.USE_SIMD?r.SIMD.scale:r.scalar.scale,r.rotate=function(t,a,e,r){var o,l,i,u,s,c,M,f,m,h,x,I,d,S,D,v,F,E,p,b,w,A,R,g,y=r[0],T=r[1],_=r[2],P=Math.sqrt(y*y+T*T+_*_);return Math.abs(P)<n.EPSILON?null:(P=1/P,y*=P,T*=P,_*=P,o=Math.sin(e),l=Math.cos(e),i=1-l,u=a[0],s=a[1],c=a[2],M=a[3],f=a[4],m=a[5],h=a[6],x=a[7],I=a[8],d=a[9],S=a[10],D=a[11],v=y*y*i+l,F=T*y*i+_*o,E=_*y*i-T*o,p=y*T*i-_*o,b=T*T*i+l,w=_*T*i+y*o,A=y*_*i+T*o,R=T*_*i-y*o,g=_*_*i+l,t[0]=u*v+f*F+I*E,t[1]=s*v+m*F+d*E,t[2]=c*v+h*F+S*E,t[3]=M*v+x*F+D*E,t[4]=u*p+f*b+I*w,t[5]=s*p+m*b+d*w,t[6]=c*p+h*b+S*w,t[7]=M*p+x*b+D*w,t[8]=u*A+f*R+I*g,t[9]=s*A+m*R+d*g,t[10]=c*A+h*R+S*g,t[11]=M*A+x*R+D*g,a!==t&&(t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t)},r.scalar.rotateX=function(t,a,e){var n=Math.sin(e),r=Math.cos(e),o=a[4],l=a[5],i=a[6],u=a[7],s=a[8],c=a[9],M=a[10],f=a[11];return a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[4]=o*r+s*n,t[5]=l*r+c*n,t[6]=i*r+M*n,t[7]=u*r+f*n,t[8]=s*r-o*n,t[9]=c*r-l*n,t[10]=M*r-i*n,t[11]=f*r-u*n,t},r.SIMD.rotateX=function(t,a,e){var n=SIMD.Float32x4.splat(Math.sin(e)),r=SIMD.Float32x4.splat(Math.cos(e));a!==t&&(t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,4),l=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,4,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(l,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,r),SIMD.Float32x4.mul(o,n))),t},r.rotateX=n.USE_SIMD?r.SIMD.rotateX:r.scalar.rotateX,r.scalar.rotateY=function(t,a,e){var n=Math.sin(e),r=Math.cos(e),o=a[0],l=a[1],i=a[2],u=a[3],s=a[8],c=a[9],M=a[10],f=a[11];return a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*r-s*n,t[1]=l*r-c*n,t[2]=i*r-M*n,t[3]=u*r-f*n,t[8]=o*n+s*r,t[9]=l*n+c*r,t[10]=i*n+M*r,t[11]=u*n+f*r,t},r.SIMD.rotateY=function(t,a,e){var n=SIMD.Float32x4.splat(Math.sin(e)),r=SIMD.Float32x4.splat(Math.cos(e));a!==t&&(t[4]=a[4],t[5]=a[5],t[6]=a[6],t[7]=a[7],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,0),l=SIMD.Float32x4.load(a,8);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.sub(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(l,n))),SIMD.Float32x4.store(t,8,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,n),SIMD.Float32x4.mul(l,r))),t},r.rotateY=n.USE_SIMD?r.SIMD.rotateY:r.scalar.rotateY,r.scalar.rotateZ=function(t,a,e){var n=Math.sin(e),r=Math.cos(e),o=a[0],l=a[1],i=a[2],u=a[3],s=a[4],c=a[5],M=a[6],f=a[7];return a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]),t[0]=o*r+s*n,t[1]=l*r+c*n,t[2]=i*r+M*n,t[3]=u*r+f*n,t[4]=s*r-o*n,t[5]=c*r-l*n,t[6]=M*r-i*n,t[7]=f*r-u*n,t},r.SIMD.rotateZ=function(t,a,e){var n=SIMD.Float32x4.splat(Math.sin(e)),r=SIMD.Float32x4.splat(Math.cos(e));a!==t&&(t[8]=a[8],t[9]=a[9],t[10]=a[10],t[11]=a[11],t[12]=a[12],t[13]=a[13],t[14]=a[14],t[15]=a[15]);var o=SIMD.Float32x4.load(a,0),l=SIMD.Float32x4.load(a,4);return SIMD.Float32x4.store(t,0,SIMD.Float32x4.add(SIMD.Float32x4.mul(o,r),SIMD.Float32x4.mul(l,n))),SIMD.Float32x4.store(t,4,SIMD.Float32x4.sub(SIMD.Float32x4.mul(l,r),SIMD.Float32x4.mul(o,n))),t},r.rotateZ=n.USE_SIMD?r.SIMD.rotateZ:r.scalar.rotateZ,r.fromTranslation=function(t,a){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=a[0],t[13]=a[1],t[14]=a[2],t[15]=1,t},r.fromScaling=function(t,a){return t[0]=a[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=a[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=a[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotation=function(t,a,e){var r,o,l,i=e[0],u=e[1],s=e[2],c=Math.sqrt(i*i+u*u+s*s);return Math.abs(c)<n.EPSILON?null:(c=1/c,i*=c,u*=c,s*=c,r=Math.sin(a),o=Math.cos(a),l=1-o,t[0]=i*i*l+o,t[1]=u*i*l+s*r,t[2]=s*i*l-u*r,t[3]=0,t[4]=i*u*l-s*r,t[5]=u*u*l+o,t[6]=s*u*l+i*r,t[7]=0,t[8]=i*s*l+u*r,t[9]=u*s*l-i*r,t[10]=s*s*l+o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},r.fromXRotation=function(t,a){var e=Math.sin(a),n=Math.cos(a);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromYRotation=function(t,a){var e=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=n,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromZRotation=function(t,a){var e=Math.sin(a),n=Math.cos(a);return t[0]=n,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=n,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.fromRotationTranslation=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=a[3],i=n+n,u=r+r,s=o+o,c=n*i,M=n*u,f=n*s,m=r*u,h=r*s,x=o*s,I=l*i,d=l*u,S=l*s;return t[0]=1-(m+x),t[1]=M+S,t[2]=f-d,t[3]=0,t[4]=M-S,t[5]=1-(c+x),t[6]=h+I,t[7]=0,t[8]=f+d,t[9]=h-I,t[10]=1-(c+m),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},r.getTranslation=function(t,a){return t[0]=a[12],t[1]=a[13],t[2]=a[14],t},r.getScaling=function(t,a){var e=a[0],n=a[1],r=a[2],o=a[4],l=a[5],i=a[6],u=a[8],s=a[9],c=a[10];return t[0]=Math.sqrt(e*e+n*n+r*r),t[1]=Math.sqrt(o*o+l*l+i*i),t[2]=Math.sqrt(u*u+s*s+c*c),t},r.getRotation=function(t,a){var e=a[0]+a[5]+a[10],n=0;return e>0?(n=2*Math.sqrt(e+1),t[3]=.25*n,t[0]=(a[6]-a[9])/n,t[1]=(a[8]-a[2])/n,t[2]=(a[1]-a[4])/n):a[0]>a[5]&a[0]>a[10]?(n=2*Math.sqrt(1+a[0]-a[5]-a[10]),t[3]=(a[6]-a[9])/n,t[0]=.25*n,t[1]=(a[1]+a[4])/n,t[2]=(a[8]+a[2])/n):a[5]>a[10]?(n=2*Math.sqrt(1+a[5]-a[0]-a[10]),t[3]=(a[8]-a[2])/n,t[0]=(a[1]+a[4])/n,t[1]=.25*n,t[2]=(a[6]+a[9])/n):(n=2*Math.sqrt(1+a[10]-a[0]-a[5]),t[3]=(a[1]-a[4])/n,t[0]=(a[8]+a[2])/n,t[1]=(a[6]+a[9])/n,t[2]=.25*n),t},r.fromRotationTranslationScale=function(t,a,e,n){var r=a[0],o=a[1],l=a[2],i=a[3],u=r+r,s=o+o,c=l+l,M=r*u,f=r*s,m=r*c,h=o*s,x=o*c,I=l*c,d=i*u,S=i*s,D=i*c,v=n[0],F=n[1],E=n[2];return t[0]=(1-(h+I))*v,t[1]=(f+D)*v,t[2]=(m-S)*v,t[3]=0,t[4]=(f-D)*F,t[5]=(1-(M+I))*F,t[6]=(x+d)*F,t[7]=0,t[8]=(m+S)*E,t[9]=(x-d)*E,t[10]=(1-(M+h))*E,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},r.fromRotationTranslationScaleOrigin=function(t,a,e,n,r){var o=a[0],l=a[1],i=a[2],u=a[3],s=o+o,c=l+l,M=i+i,f=o*s,m=o*c,h=o*M,x=l*c,I=l*M,d=i*M,S=u*s,D=u*c,v=u*M,F=n[0],E=n[1],p=n[2],b=r[0],w=r[1],A=r[2];return t[0]=(1-(x+d))*F,t[1]=(m+v)*F,t[2]=(h-D)*F,t[3]=0,t[4]=(m-v)*E,t[5]=(1-(f+d))*E,t[6]=(I+S)*E,t[7]=0,t[8]=(h+D)*p,t[9]=(I-S)*p,t[10]=(1-(f+x))*p,t[11]=0,t[12]=e[0]+b-(t[0]*b+t[4]*w+t[8]*A),t[13]=e[1]+w-(t[1]*b+t[5]*w+t[9]*A),t[14]=e[2]+A-(t[2]*b+t[6]*w+t[10]*A),t[15]=1,t},r.fromQuat=function(t,a){var e=a[0],n=a[1],r=a[2],o=a[3],l=e+e,i=n+n,u=r+r,s=e*l,c=n*l,M=n*i,f=r*l,m=r*i,h=r*u,x=o*l,I=o*i,d=o*u;return t[0]=1-M-h,t[1]=c+d,t[2]=f-I,t[3]=0,t[4]=c-d,t[5]=1-s-h,t[6]=m+x,t[7]=0,t[8]=f+I,t[9]=m-x,t[10]=1-s-M,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},r.frustum=function(t,a,e,n,r,o,l){var i=1/(e-a),u=1/(r-n),s=1/(o-l);return t[0]=2*o*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*u,t[6]=0,t[7]=0,t[8]=(e+a)*i,t[9]=(r+n)*u,t[10]=(l+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=l*o*2*s,t[15]=0,t},r.perspective=function(t,a,e,n,r){var o=1/Math.tan(a/2),l=1/(n-r);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(r+n)*l,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*r*n*l,t[15]=0,t},r.perspectiveFromFieldOfView=function(t,a,e,n){var r=Math.tan(a.upDegrees*Math.PI/180),o=Math.tan(a.downDegrees*Math.PI/180),l=Math.tan(a.leftDegrees*Math.PI/180),i=Math.tan(a.rightDegrees*Math.PI/180),u=2/(l+i),s=2/(r+o);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(l-i)*u*.5,t[9]=(r-o)*s*.5,t[10]=n/(e-n),t[11]=-1,t[12]=0,t[13]=0,t[14]=n*e/(e-n),t[15]=0,t},r.ortho=function(t,a,e,n,r,o,l){var i=1/(a-e),u=1/(n-r),s=1/(o-l);return t[0]=-2*i,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(a+e)*i,t[13]=(r+n)*u,t[14]=(l+o)*s,t[15]=1,t},r.lookAt=function(t,a,e,o){var l,i,u,s,c,M,f,m,h,x,I=a[0],d=a[1],S=a[2],D=o[0],v=o[1],F=o[2],E=e[0],p=e[1],b=e[2];return Math.abs(I-E)<n.EPSILON&&Math.abs(d-p)<n.EPSILON&&Math.abs(S-b)<n.EPSILON?r.identity(t):(f=I-E,m=d-p,h=S-b,x=1/Math.sqrt(f*f+m*m+h*h),f*=x,m*=x,h*=x,l=v*h-F*m,i=F*f-D*h,u=D*m-v*f,(x=Math.sqrt(l*l+i*i+u*u))?(l*=x=1/x,i*=x,u*=x):(l=0,i=0,u=0),s=m*u-h*i,c=h*l-f*u,M=f*i-m*l,(x=Math.sqrt(s*s+c*c+M*M))?(s*=x=1/x,c*=x,M*=x):(s=0,c=0,M=0),t[0]=l,t[1]=s,t[2]=f,t[3]=0,t[4]=i,t[5]=c,t[6]=m,t[7]=0,t[8]=u,t[9]=M,t[10]=h,t[11]=0,t[12]=-(l*I+i*d+u*S),t[13]=-(s*I+c*d+M*S),t[14]=-(f*I+m*d+h*S),t[15]=1,t)},r.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},r.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},r.add=function(t,a,e){return t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t[3]=a[3]+e[3],t[4]=a[4]+e[4],t[5]=a[5]+e[5],t[6]=a[6]+e[6],t[7]=a[7]+e[7],t[8]=a[8]+e[8],t[9]=a[9]+e[9],t[10]=a[10]+e[10],t[11]=a[11]+e[11],t[12]=a[12]+e[12],t[13]=a[13]+e[13],t[14]=a[14]+e[14],t[15]=a[15]+e[15],t},r.subtract=function(t,a,e){return t[0]=a[0]-e[0],t[1]=a[1]-e[1],t[2]=a[2]-e[2],t[3]=a[3]-e[3],t[4]=a[4]-e[4],t[5]=a[5]-e[5],t[6]=a[6]-e[6],t[7]=a[7]-e[7],t[8]=a[8]-e[8],t[9]=a[9]-e[9],t[10]=a[10]-e[10],t[11]=a[11]-e[11],t[12]=a[12]-e[12],t[13]=a[13]-e[13],t[14]=a[14]-e[14],t[15]=a[15]-e[15],t},r.sub=r.subtract,r.multiplyScalar=function(t,a,e){return t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e,t[3]=a[3]*e,t[4]=a[4]*e,t[5]=a[5]*e,t[6]=a[6]*e,t[7]=a[7]*e,t[8]=a[8]*e,t[9]=a[9]*e,t[10]=a[10]*e,t[11]=a[11]*e,t[12]=a[12]*e,t[13]=a[13]*e,t[14]=a[14]*e,t[15]=a[15]*e,t},r.multiplyScalarAndAdd=function(t,a,e,n){return t[0]=a[0]+e[0]*n,t[1]=a[1]+e[1]*n,t[2]=a[2]+e[2]*n,t[3]=a[3]+e[3]*n,t[4]=a[4]+e[4]*n,t[5]=a[5]+e[5]*n,t[6]=a[6]+e[6]*n,t[7]=a[7]+e[7]*n,t[8]=a[8]+e[8]*n,t[9]=a[9]+e[9]*n,t[10]=a[10]+e[10]*n,t[11]=a[11]+e[11]*n,t[12]=a[12]+e[12]*n,t[13]=a[13]+e[13]*n,t[14]=a[14]+e[14]*n,t[15]=a[15]+e[15]*n,t},r.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]&&t[4]===a[4]&&t[5]===a[5]&&t[6]===a[6]&&t[7]===a[7]&&t[8]===a[8]&&t[9]===a[9]&&t[10]===a[10]&&t[11]===a[11]&&t[12]===a[12]&&t[13]===a[13]&&t[14]===a[14]&&t[15]===a[15]},r.equals=function(t,a){var e=t[0],r=t[1],o=t[2],l=t[3],i=t[4],u=t[5],s=t[6],c=t[7],M=t[8],f=t[9],m=t[10],h=t[11],x=t[12],I=t[13],d=t[14],S=t[15],D=a[0],v=a[1],F=a[2],E=a[3],p=a[4],b=a[5],w=a[6],A=a[7],R=a[8],g=a[9],y=a[10],T=a[11],_=a[12],P=a[13],z=a[14],U=a[15];return Math.abs(e-D)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(D))&&Math.abs(r-v)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(v))&&Math.abs(o-F)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(F))&&Math.abs(l-E)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(E))&&Math.abs(i-p)<=n.EPSILON*Math.max(1,Math.abs(i),Math.abs(p))&&Math.abs(u-b)<=n.EPSILON*Math.max(1,Math.abs(u),Math.abs(b))&&Math.abs(s-w)<=n.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(c-A)<=n.EPSILON*Math.max(1,Math.abs(c),Math.abs(A))&&Math.abs(M-R)<=n.EPSILON*Math.max(1,Math.abs(M),Math.abs(R))&&Math.abs(f-g)<=n.EPSILON*Math.max(1,Math.abs(f),Math.abs(g))&&Math.abs(m-y)<=n.EPSILON*Math.max(1,Math.abs(m),Math.abs(y))&&Math.abs(h-T)<=n.EPSILON*Math.max(1,Math.abs(h),Math.abs(T))&&Math.abs(x-_)<=n.EPSILON*Math.max(1,Math.abs(x),Math.abs(_))&&Math.abs(I-P)<=n.EPSILON*Math.max(1,Math.abs(I),Math.abs(P))&&Math.abs(d-z)<=n.EPSILON*Math.max(1,Math.abs(d),Math.abs(z))&&Math.abs(S-U)<=n.EPSILON*Math.max(1,Math.abs(S),Math.abs(U))},t.exports=r},function(t,a,e){var n=e(1),r=e(4),o=e(7),l=e(8),i={};i.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},i.rotationTo=function(){var t=o.create(),a=o.fromValues(1,0,0),e=o.fromValues(0,1,0);return function(n,r,l){var u=o.dot(r,l);return u<-.999999?(o.cross(t,a,r),o.length(t)<1e-6&&o.cross(t,e,r),o.normalize(t,t),i.setAxisAngle(n,t,Math.PI),n):u>.999999?(n[0]=0,n[1]=0,n[2]=0,n[3]=1,n):(o.cross(t,r,l),n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=1+u,i.normalize(n,n))}}(),i.setAxes=function(){var t=r.create();return function(a,e,n,r){return t[0]=n[0],t[3]=n[1],t[6]=n[2],t[1]=r[0],t[4]=r[1],t[7]=r[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],i.normalize(a,i.fromMat3(a,t))}}(),i.clone=l.clone,i.fromValues=l.fromValues,i.copy=l.copy,i.set=l.set,i.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},i.setAxisAngle=function(t,a,e){e*=.5;var n=Math.sin(e);return t[0]=n*a[0],t[1]=n*a[1],t[2]=n*a[2],t[3]=Math.cos(e),t},i.getAxisAngle=function(t,a){var e=2*Math.acos(a[3]),n=Math.sin(e/2);return 0!=n?(t[0]=a[0]/n,t[1]=a[1]/n,t[2]=a[2]/n):(t[0]=1,t[1]=0,t[2]=0),e},i.add=l.add,i.multiply=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=a[3],i=e[0],u=e[1],s=e[2],c=e[3];return t[0]=n*c+l*i+r*s-o*u,t[1]=r*c+l*u+o*i-n*s,t[2]=o*c+l*s+n*u-r*i,t[3]=l*c-n*i-r*u-o*s,t},i.mul=i.multiply,i.scale=l.scale,i.rotateX=function(t,a,e){e*=.5;var n=a[0],r=a[1],o=a[2],l=a[3],i=Math.sin(e),u=Math.cos(e);return t[0]=n*u+l*i,t[1]=r*u+o*i,t[2]=o*u-r*i,t[3]=l*u-n*i,t},i.rotateY=function(t,a,e){e*=.5;var n=a[0],r=a[1],o=a[2],l=a[3],i=Math.sin(e),u=Math.cos(e);return t[0]=n*u-o*i,t[1]=r*u+l*i,t[2]=o*u+n*i,t[3]=l*u-r*i,t},i.rotateZ=function(t,a,e){e*=.5;var n=a[0],r=a[1],o=a[2],l=a[3],i=Math.sin(e),u=Math.cos(e);return t[0]=n*u+r*i,t[1]=r*u-n*i,t[2]=o*u+l*i,t[3]=l*u-o*i,t},i.calculateW=function(t,a){var e=a[0],n=a[1],r=a[2];return t[0]=e,t[1]=n,t[2]=r,t[3]=Math.sqrt(Math.abs(1-e*e-n*n-r*r)),t},i.dot=l.dot,i.lerp=l.lerp,i.slerp=function(t,a,e,n){var r,o,l,i,u,s=a[0],c=a[1],M=a[2],f=a[3],m=e[0],h=e[1],x=e[2],I=e[3];return(o=s*m+c*h+M*x+f*I)<0&&(o=-o,m=-m,h=-h,x=-x,I=-I),1-o>1e-6?(r=Math.acos(o),l=Math.sin(r),i=Math.sin((1-n)*r)/l,u=Math.sin(n*r)/l):(i=1-n,u=n),t[0]=i*s+u*m,t[1]=i*c+u*h,t[2]=i*M+u*x,t[3]=i*f+u*I,t},i.sqlerp=function(){var t=i.create(),a=i.create();return function(e,n,r,o,l,u){return i.slerp(t,n,l,u),i.slerp(a,r,o,u),i.slerp(e,t,a,2*u*(1-u)),e}}(),i.invert=function(t,a){var e=a[0],n=a[1],r=a[2],o=a[3],l=e*e+n*n+r*r+o*o,i=l?1/l:0;return t[0]=-e*i,t[1]=-n*i,t[2]=-r*i,t[3]=o*i,t},i.conjugate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=a[3],t},i.length=l.length,i.len=i.length,i.squaredLength=l.squaredLength,i.sqrLen=i.squaredLength,i.normalize=l.normalize,i.fromMat3=function(t,a){var e,n=a[0]+a[4]+a[8];if(n>0)e=Math.sqrt(n+1),t[3]=.5*e,e=.5/e,t[0]=(a[5]-a[7])*e,t[1]=(a[6]-a[2])*e,t[2]=(a[1]-a[3])*e;else{var r=0;a[4]>a[0]&&(r=1),a[8]>a[3*r+r]&&(r=2);var o=(r+1)%3,l=(r+2)%3;e=Math.sqrt(a[3*r+r]-a[3*o+o]-a[3*l+l]+1),t[r]=.5*e,e=.5/e,t[3]=(a[3*o+l]-a[3*l+o])*e,t[o]=(a[3*o+r]+a[3*r+o])*e,t[l]=(a[3*l+r]+a[3*r+l])*e}return t},i.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},i.exactEquals=l.exactEquals,i.equals=l.equals,t.exports=i},function(t,a,e){var n=e(1),r={};r.create=function(){var t=new n.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t},r.clone=function(t){var a=new n.ARRAY_TYPE(3);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a},r.fromValues=function(t,a,e){var r=new n.ARRAY_TYPE(3);return r[0]=t,r[1]=a,r[2]=e,r},r.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t},r.set=function(t,a,e,n){return t[0]=a,t[1]=e,t[2]=n,t},r.add=function(t,a,e){return t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t},r.subtract=function(t,a,e){return t[0]=a[0]-e[0],t[1]=a[1]-e[1],t[2]=a[2]-e[2],t},r.sub=r.subtract,r.multiply=function(t,a,e){return t[0]=a[0]*e[0],t[1]=a[1]*e[1],t[2]=a[2]*e[2],t},r.mul=r.multiply,r.divide=function(t,a,e){return t[0]=a[0]/e[0],t[1]=a[1]/e[1],t[2]=a[2]/e[2],t},r.div=r.divide,r.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t},r.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t},r.min=function(t,a,e){return t[0]=Math.min(a[0],e[0]),t[1]=Math.min(a[1],e[1]),t[2]=Math.min(a[2],e[2]),t},r.max=function(t,a,e){return t[0]=Math.max(a[0],e[0]),t[1]=Math.max(a[1],e[1]),t[2]=Math.max(a[2],e[2]),t},r.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t},r.scale=function(t,a,e){return t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e,t},r.scaleAndAdd=function(t,a,e,n){return t[0]=a[0]+e[0]*n,t[1]=a[1]+e[1]*n,t[2]=a[2]+e[2]*n,t},r.distance=function(t,a){var e=a[0]-t[0],n=a[1]-t[1],r=a[2]-t[2];return Math.sqrt(e*e+n*n+r*r)},r.dist=r.distance,r.squaredDistance=function(t,a){var e=a[0]-t[0],n=a[1]-t[1],r=a[2]-t[2];return e*e+n*n+r*r},r.sqrDist=r.squaredDistance,r.length=function(t){var a=t[0],e=t[1],n=t[2];return Math.sqrt(a*a+e*e+n*n)},r.len=r.length,r.squaredLength=function(t){var a=t[0],e=t[1],n=t[2];return a*a+e*e+n*n},r.sqrLen=r.squaredLength,r.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t},r.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t},r.normalize=function(t,a){var e=a[0],n=a[1],r=a[2],o=e*e+n*n+r*r;return o>0&&(o=1/Math.sqrt(o),t[0]=a[0]*o,t[1]=a[1]*o,t[2]=a[2]*o),t},r.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]},r.cross=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=e[0],i=e[1],u=e[2];return t[0]=r*u-o*i,t[1]=o*l-n*u,t[2]=n*i-r*l,t},r.lerp=function(t,a,e,n){var r=a[0],o=a[1],l=a[2];return t[0]=r+n*(e[0]-r),t[1]=o+n*(e[1]-o),t[2]=l+n*(e[2]-l),t},r.hermite=function(t,a,e,n,r,o){var l=o*o,i=l*(2*o-3)+1,u=l*(o-2)+o,s=l*(o-1),c=l*(3-2*o);return t[0]=a[0]*i+e[0]*u+n[0]*s+r[0]*c,t[1]=a[1]*i+e[1]*u+n[1]*s+r[1]*c,t[2]=a[2]*i+e[2]*u+n[2]*s+r[2]*c,t},r.bezier=function(t,a,e,n,r,o){var l=1-o,i=l*l,u=o*o,s=i*l,c=3*o*i,M=3*u*l,f=u*o;return t[0]=a[0]*s+e[0]*c+n[0]*M+r[0]*f,t[1]=a[1]*s+e[1]*c+n[1]*M+r[1]*f,t[2]=a[2]*s+e[2]*c+n[2]*M+r[2]*f,t},r.random=function(t,a){a=a||1;var e=2*n.RANDOM()*Math.PI,r=2*n.RANDOM()-1,o=Math.sqrt(1-r*r)*a;return t[0]=Math.cos(e)*o,t[1]=Math.sin(e)*o,t[2]=r*a,t},r.transformMat4=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=e[3]*n+e[7]*r+e[11]*o+e[15];return l=l||1,t[0]=(e[0]*n+e[4]*r+e[8]*o+e[12])/l,t[1]=(e[1]*n+e[5]*r+e[9]*o+e[13])/l,t[2]=(e[2]*n+e[6]*r+e[10]*o+e[14])/l,t},r.transformMat3=function(t,a,e){var n=a[0],r=a[1],o=a[2];return t[0]=n*e[0]+r*e[3]+o*e[6],t[1]=n*e[1]+r*e[4]+o*e[7],t[2]=n*e[2]+r*e[5]+o*e[8],t},r.transformQuat=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=e[0],i=e[1],u=e[2],s=e[3],c=s*n+i*o-u*r,M=s*r+u*n-l*o,f=s*o+l*r-i*n,m=-l*n-i*r-u*o;return t[0]=c*s+m*-l+M*-u-f*-i,t[1]=M*s+m*-i+f*-l-c*-u,t[2]=f*s+m*-u+c*-i-M*-l,t},r.rotateX=function(t,a,e,n){var r=[],o=[];return r[0]=a[0]-e[0],r[1]=a[1]-e[1],r[2]=a[2]-e[2],o[0]=r[0],o[1]=r[1]*Math.cos(n)-r[2]*Math.sin(n),o[2]=r[1]*Math.sin(n)+r[2]*Math.cos(n),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},r.rotateY=function(t,a,e,n){var r=[],o=[];return r[0]=a[0]-e[0],r[1]=a[1]-e[1],r[2]=a[2]-e[2],o[0]=r[2]*Math.sin(n)+r[0]*Math.cos(n),o[1]=r[1],o[2]=r[2]*Math.cos(n)-r[0]*Math.sin(n),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},r.rotateZ=function(t,a,e,n){var r=[],o=[];return r[0]=a[0]-e[0],r[1]=a[1]-e[1],r[2]=a[2]-e[2],o[0]=r[0]*Math.cos(n)-r[1]*Math.sin(n),o[1]=r[0]*Math.sin(n)+r[1]*Math.cos(n),o[2]=r[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},r.forEach=function(){var t=r.create();return function(a,e,n,r,o,l){var i,u;for(e||(e=3),n||(n=0),u=r?Math.min(r*e+n,a.length):a.length,i=n;i<u;i+=e)t[0]=a[i],t[1]=a[i+1],t[2]=a[i+2],o(t,t,l),a[i]=t[0],a[i+1]=t[1],a[i+2]=t[2];return a}}(),r.angle=function(t,a){var e=r.fromValues(t[0],t[1],t[2]),n=r.fromValues(a[0],a[1],a[2]);r.normalize(e,e),r.normalize(n,n);var o=r.dot(e,n);return o>1?0:o<-1?Math.PI:Math.acos(o)},r.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},r.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]},r.equals=function(t,a){var e=t[0],r=t[1],o=t[2],l=a[0],i=a[1],u=a[2];return Math.abs(e-l)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(l))&&Math.abs(r-i)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(o-u)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(u))},t.exports=r},function(t,a,e){var n=e(1),r={};r.create=function(){var t=new n.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t},r.clone=function(t){var a=new n.ARRAY_TYPE(4);return a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=t[3],a},r.fromValues=function(t,a,e,r){var o=new n.ARRAY_TYPE(4);return o[0]=t,o[1]=a,o[2]=e,o[3]=r,o},r.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t[2]=a[2],t[3]=a[3],t},r.set=function(t,a,e,n,r){return t[0]=a,t[1]=e,t[2]=n,t[3]=r,t},r.add=function(t,a,e){return t[0]=a[0]+e[0],t[1]=a[1]+e[1],t[2]=a[2]+e[2],t[3]=a[3]+e[3],t},r.subtract=function(t,a,e){return t[0]=a[0]-e[0],t[1]=a[1]-e[1],t[2]=a[2]-e[2],t[3]=a[3]-e[3],t},r.sub=r.subtract,r.multiply=function(t,a,e){return t[0]=a[0]*e[0],t[1]=a[1]*e[1],t[2]=a[2]*e[2],t[3]=a[3]*e[3],t},r.mul=r.multiply,r.divide=function(t,a,e){return t[0]=a[0]/e[0],t[1]=a[1]/e[1],t[2]=a[2]/e[2],t[3]=a[3]/e[3],t},r.div=r.divide,r.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t[2]=Math.ceil(a[2]),t[3]=Math.ceil(a[3]),t},r.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t[2]=Math.floor(a[2]),t[3]=Math.floor(a[3]),t},r.min=function(t,a,e){return t[0]=Math.min(a[0],e[0]),t[1]=Math.min(a[1],e[1]),t[2]=Math.min(a[2],e[2]),t[3]=Math.min(a[3],e[3]),t},r.max=function(t,a,e){return t[0]=Math.max(a[0],e[0]),t[1]=Math.max(a[1],e[1]),t[2]=Math.max(a[2],e[2]),t[3]=Math.max(a[3],e[3]),t},r.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t[2]=Math.round(a[2]),t[3]=Math.round(a[3]),t},r.scale=function(t,a,e){return t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e,t[3]=a[3]*e,t},r.scaleAndAdd=function(t,a,e,n){return t[0]=a[0]+e[0]*n,t[1]=a[1]+e[1]*n,t[2]=a[2]+e[2]*n,t[3]=a[3]+e[3]*n,t},r.distance=function(t,a){var e=a[0]-t[0],n=a[1]-t[1],r=a[2]-t[2],o=a[3]-t[3];return Math.sqrt(e*e+n*n+r*r+o*o)},r.dist=r.distance,r.squaredDistance=function(t,a){var e=a[0]-t[0],n=a[1]-t[1],r=a[2]-t[2],o=a[3]-t[3];return e*e+n*n+r*r+o*o},r.sqrDist=r.squaredDistance,r.length=function(t){var a=t[0],e=t[1],n=t[2],r=t[3];return Math.sqrt(a*a+e*e+n*n+r*r)},r.len=r.length,r.squaredLength=function(t){var a=t[0],e=t[1],n=t[2],r=t[3];return a*a+e*e+n*n+r*r},r.sqrLen=r.squaredLength,r.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t[2]=-a[2],t[3]=-a[3],t},r.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t[2]=1/a[2],t[3]=1/a[3],t},r.normalize=function(t,a){var e=a[0],n=a[1],r=a[2],o=a[3],l=e*e+n*n+r*r+o*o;return l>0&&(l=1/Math.sqrt(l),t[0]=e*l,t[1]=n*l,t[2]=r*l,t[3]=o*l),t},r.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]+t[2]*a[2]+t[3]*a[3]},r.lerp=function(t,a,e,n){var r=a[0],o=a[1],l=a[2],i=a[3];return t[0]=r+n*(e[0]-r),t[1]=o+n*(e[1]-o),t[2]=l+n*(e[2]-l),t[3]=i+n*(e[3]-i),t},r.random=function(t,a){return a=a||1,t[0]=n.RANDOM(),t[1]=n.RANDOM(),t[2]=n.RANDOM(),t[3]=n.RANDOM(),r.normalize(t,t),r.scale(t,t,a),t},r.transformMat4=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=a[3];return t[0]=e[0]*n+e[4]*r+e[8]*o+e[12]*l,t[1]=e[1]*n+e[5]*r+e[9]*o+e[13]*l,t[2]=e[2]*n+e[6]*r+e[10]*o+e[14]*l,t[3]=e[3]*n+e[7]*r+e[11]*o+e[15]*l,t},r.transformQuat=function(t,a,e){var n=a[0],r=a[1],o=a[2],l=e[0],i=e[1],u=e[2],s=e[3],c=s*n+i*o-u*r,M=s*r+u*n-l*o,f=s*o+l*r-i*n,m=-l*n-i*r-u*o;return t[0]=c*s+m*-l+M*-u-f*-i,t[1]=M*s+m*-i+f*-l-c*-u,t[2]=f*s+m*-u+c*-i-M*-l,t[3]=a[3],t},r.forEach=function(){var t=r.create();return function(a,e,n,r,o,l){var i,u;for(e||(e=4),n||(n=0),u=r?Math.min(r*e+n,a.length):a.length,i=n;i<u;i+=e)t[0]=a[i],t[1]=a[i+1],t[2]=a[i+2],t[3]=a[i+3],o(t,t,l),a[i]=t[0],a[i+1]=t[1],a[i+2]=t[2],a[i+3]=t[3];return a}}(),r.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},r.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]&&t[2]===a[2]&&t[3]===a[3]},r.equals=function(t,a){var e=t[0],r=t[1],o=t[2],l=t[3],i=a[0],u=a[1],s=a[2],c=a[3];return Math.abs(e-i)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(r-u)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(o-s)<=n.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))&&Math.abs(l-c)<=n.EPSILON*Math.max(1,Math.abs(l),Math.abs(c))},t.exports=r},function(t,a,e){var n=e(1),r={};r.create=function(){var t=new n.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t},r.clone=function(t){var a=new n.ARRAY_TYPE(2);return a[0]=t[0],a[1]=t[1],a},r.fromValues=function(t,a){var e=new n.ARRAY_TYPE(2);return e[0]=t,e[1]=a,e},r.copy=function(t,a){return t[0]=a[0],t[1]=a[1],t},r.set=function(t,a,e){return t[0]=a,t[1]=e,t},r.add=function(t,a,e){return t[0]=a[0]+e[0],t[1]=a[1]+e[1],t},r.subtract=function(t,a,e){return t[0]=a[0]-e[0],t[1]=a[1]-e[1],t},r.sub=r.subtract,r.multiply=function(t,a,e){return t[0]=a[0]*e[0],t[1]=a[1]*e[1],t},r.mul=r.multiply,r.divide=function(t,a,e){return t[0]=a[0]/e[0],t[1]=a[1]/e[1],t},r.div=r.divide,r.ceil=function(t,a){return t[0]=Math.ceil(a[0]),t[1]=Math.ceil(a[1]),t},r.floor=function(t,a){return t[0]=Math.floor(a[0]),t[1]=Math.floor(a[1]),t},r.min=function(t,a,e){return t[0]=Math.min(a[0],e[0]),t[1]=Math.min(a[1],e[1]),t},r.max=function(t,a,e){return t[0]=Math.max(a[0],e[0]),t[1]=Math.max(a[1],e[1]),t},r.round=function(t,a){return t[0]=Math.round(a[0]),t[1]=Math.round(a[1]),t},r.scale=function(t,a,e){return t[0]=a[0]*e,t[1]=a[1]*e,t},r.scaleAndAdd=function(t,a,e,n){return t[0]=a[0]+e[0]*n,t[1]=a[1]+e[1]*n,t},r.distance=function(t,a){var e=a[0]-t[0],n=a[1]-t[1];return Math.sqrt(e*e+n*n)},r.dist=r.distance,r.squaredDistance=function(t,a){var e=a[0]-t[0],n=a[1]-t[1];return e*e+n*n},r.sqrDist=r.squaredDistance,r.length=function(t){var a=t[0],e=t[1];return Math.sqrt(a*a+e*e)},r.len=r.length,r.squaredLength=function(t){var a=t[0],e=t[1];return a*a+e*e},r.sqrLen=r.squaredLength,r.negate=function(t,a){return t[0]=-a[0],t[1]=-a[1],t},r.inverse=function(t,a){return t[0]=1/a[0],t[1]=1/a[1],t},r.normalize=function(t,a){var e=a[0],n=a[1],r=e*e+n*n;return r>0&&(r=1/Math.sqrt(r),t[0]=a[0]*r,t[1]=a[1]*r),t},r.dot=function(t,a){return t[0]*a[0]+t[1]*a[1]},r.cross=function(t,a,e){var n=a[0]*e[1]-a[1]*e[0];return t[0]=t[1]=0,t[2]=n,t},r.lerp=function(t,a,e,n){var r=a[0],o=a[1];return t[0]=r+n*(e[0]-r),t[1]=o+n*(e[1]-o),t},r.random=function(t,a){a=a||1;var e=2*n.RANDOM()*Math.PI;return t[0]=Math.cos(e)*a,t[1]=Math.sin(e)*a,t},r.transformMat2=function(t,a,e){var n=a[0],r=a[1];return t[0]=e[0]*n+e[2]*r,t[1]=e[1]*n+e[3]*r,t},r.transformMat2d=function(t,a,e){var n=a[0],r=a[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t},r.transformMat3=function(t,a,e){var n=a[0],r=a[1];return t[0]=e[0]*n+e[3]*r+e[6],t[1]=e[1]*n+e[4]*r+e[7],t},r.transformMat4=function(t,a,e){var n=a[0],r=a[1];return t[0]=e[0]*n+e[4]*r+e[12],t[1]=e[1]*n+e[5]*r+e[13],t},r.forEach=function(){var t=r.create();return function(a,e,n,r,o,l){var i,u;for(e||(e=2),n||(n=0),u=r?Math.min(r*e+n,a.length):a.length,i=n;i<u;i+=e)t[0]=a[i],t[1]=a[i+1],o(t,t,l),a[i]=t[0],a[i+1]=t[1];return a}}(),r.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},r.exactEquals=function(t,a){return t[0]===a[0]&&t[1]===a[1]},r.equals=function(t,a){var e=t[0],r=t[1],o=a[0],l=a[1];return Math.abs(e-o)<=n.EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(r-l)<=n.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))},t.exports=r}])})},{}],4:[function(t,a,e){"use strict";window.Examine=function(){var t=!1,a=mat4.create(),e=mat4.create();this.setViewMatrix=function(n){t=!1,a=mat4.clone(n),e=mat4.clone(n)},this.getViewMatrix=function(){return a},this.update=function(n,r){if(Utils.epsilonEqual(r.yawIntensity,0,1e-5)&&Utils.epsilonEqual(r.pitchIntensity,0,1e-5)&&Utils.epsilonEqual(r.zoomIntensity,0,1e-5)&&!t)return!1;{let o=mat4.clone(a);if(t&&(o=mat4.clone(e)),!Utils.epsilonEqual(r.yawIntensity,0,1e-5)||!Utils.epsilonEqual(r.pitchIntensity,0,1e-5)){let t=vec3.fromValues(r.pivot[0],r.pivot[1],r.pivot[2]);vec3.transformMat4(t,t,o);let a=mat4.create();mat4.translate(a,a,t);let e=mat4.create(),l=vec3.fromValues(-t[0],-t[1],-t[2]);if(mat4.translate(e,e,l),!r.lockUpRotation){let t=Utils.radians(r.yawIntensity*r.angularVelocity*n),l=vec4.fromValues(r.worldUp[0],r.worldUp[1],r.worldUp[2],0);vec4.transformMat4(l,l,o);let i=vec3.fromValues(l[0],l[1],l[2]);vec3.normalize(i,i);let u=mat4.create();mat4.rotate(u,u,t,i),mat4.multiply(o,e,o),mat4.multiply(o,u,o),mat4.multiply(o,a,o)}if(!r.lockRightRotation){let t=mat4.create();mat4.invert(t,o);let l=vec3.fromValues(-t[8],-t[9],-t[10]);vec3.normalize(l,l);let i=Utils.degrees(Math.acos(vec3.dot(r.worldUp,l))),u=r.pitchIntensity*r.angularVelocity*n,s=i+u;if(s<180&&s>0){let t=mat4.create();mat4.rotate(t,t,Utils.radians(u),vec3.fromValues(1,0,0)),mat4.multiply(o,e,o),mat4.multiply(o,t,o),mat4.multiply(o,a,o)}}r.yawIntensity=0,r.pitchIntensity=0}if(!Utils.epsilonEqual(r.zoomIntensity,0,1e-5)){let t=mat4.create();mat4.invert(t,o);let a=vec3.fromValues(t[12],t[13],t[14]),e=vec3.fromValues(r.pivot[0],r.pivot[1],r.pivot[2]);if(!(Utils.epsilonEqual(a[0],e[0],1e-5)&&Utils.epsilonEqual(a[1],e[1],1e-5)&&Utils.epsilonEqual(a[2],e[2],1e-5))){let t=vec3.create();vec3.normalize(t,vec3.fromValues(e[0]-a[0],e[1]-a[1],e[2]-a[2]));let n=vec3.distance(e,a),l=n*r.zoomIntensity;if(n+l>r.maximumZoom){let a=mat4.create();mat4.translate(a,a,vec3.fromValues(t[0]*l,t[1]*l,t[2]*l)),mat4.multiply(o,o,a)}}r.zoomIntensity=0}return a=mat4.clone(o),!0}}}},{}],5:[function(t,a,e){"use strict";window.Fly=function(){var t=mat4.create(),a=vec3.fromValues(0,0,-1);this.setFowardDirection=function(t){a=vec3.clone(t)},this.setViewMatrix=function(a){t=mat4.clone(a)},this.getViewMatrix=function(){return t},this.update=function(e,n){if(Utils.epsilonEqual(n.yawIntensity,0,1e-5)&&Utils.epsilonEqual(n.pitchIntensity,0,1e-5)&&Utils.epsilonEqual(n.forward,0,1e-5)&&Utils.epsilonEqual(n.backward,0,1e-5)&&Utils.epsilonEqual(n.left,0,1e-5)&&Utils.epsilonEqual(n.right,0,1e-5)&&Utils.epsilonEqual(n.up,0,1e-5)&&Utils.epsilonEqual(n.down,0,1e-5))return!1;let r=mat4.clone(t),o=vec4.fromValues(n.worldUp[0],n.worldUp[1],n.worldUp[2],0);vec4.transformMat4(o,o,r);let l=vec3.fromValues(o[0],o[1],o[2]);if(vec3.normalize(l,l),!Utils.epsilonEqual(n.yawIntensity,0,1e-5)||!Utils.epsilonEqual(n.pitchIntensity,0,1e-5)){if(!n.lockUpRotation){let t=mat4.create();mat4.rotate(t,t,Utils.radians(n.yawIntensity*n.angularVelocity*e),l),mat4.multiply(r,t,r)}if(!n.lockRightRotation){let t=mat4.create();mat4.invert(t,r);let a=vec3.fromValues(-t[8],-t[9],-t[10]);vec3.normalize(a,a);let o=Utils.degrees(Math.acos(vec3.dot(n.worldUp,a))),l=n.pitchIntensity*n.angularVelocity*e,i=o+l;if(i<179&&i>1){let t=mat4.create();mat4.rotate(t,t,Utils.radians(l),vec3.fromValues(1,0,0)),mat4.multiply(r,t,r)}}n.yawIntensity=0,n.pitchIntensity=0}let i=vec3.create();i[0]=n.velocity[0]*(n.left-n.right)*e,i[1]=n.velocity[1]*(n.down-n.up)*e,i[2]=n.velocity[2]*(n.backward-n.forward)*e;let u=vec3.clone(a);vec3.normalize(u,u);let s=vec3.create();vec3.cross(s,u,l),vec3.normalize(s,s);let c=vec3.create();vec3.cross(c,s,u),vec3.normalize(c,c);let M=vec3.fromValues(u[0]*i[2]+c[0]*i[1]+s[0]*i[0],u[1]*i[2]+c[1]*i[1]+s[1]*i[0],u[2]*i[2]+c[2]*i[1]+s[2]*i[0]),f=mat4.create();return mat4.translate(f,f,M),mat4.multiply(r,f,r),t=mat4.clone(r),!0},this.applyRestrictions=function(a){let e=mat4.create();mat4.invert(e,t);let n=e[15],r=vec3.fromValues(e[12]/n,e[13]/n,e[14]/n),o=vec3.fromValues(-e[8],-e[9],-e[10]),l=vec3.fromValues(r[0]+o[0],r[1]+o[1],r[2]+o[2]);mat4.lookAt(t,r,l,a)}}},{}],6:[function(t,a,e){window.Utils={},window.Utils.epsilonEqual=function(t,a,e){return Math.abs(t-a)<e},window.Utils.degrees=function(t){return t*(180/Math.PI)},window.Utils.radians=function(t){return t*Math.PI/180}},{}],7:[function(t,a,e){"use strict";function n(){function t(t){for(let a=I.length-1;a>=0;a--){let e=I[a],n=t.indexOf(e);n<0&&(r.disableVertexAttribArray(e),I.splice(n,1))}for(let a=0;a<t.length;a++){let e=t[a];r.enableVertexAttribArray(e),I.push(e)}let a=Object.keys(d);for(let e=0;e<a.length;e++){let n=a[e];t.indexOf(n)<0&&d[n]>0&&(r.vertexAttribDivisor(n,0),d[n]=0)}}function a(t,a){for(let e=0;e<t.length;e++){let n=t[e];d.hasOwnProperty(n)?d[n]!==a&&(r.vertexAttribDivisor(n,a),d[n]=a):(r.vertexAttribDivisor(n,a),d[n]=a)}}let e=this,o=null,l=null,i={},u=null,s=[],c=[],M={},f=!1,m={r:.5,g:.5,b:.5,a:1},h={width:0,height:0,element:void 0},x=mat4.create();this.translation=vec3.create(),this.scale=vec3.fromValues(1,1,1),this.rotation=mat4.create();let I=[],d={};this.buildShader=function(t,a){let e=r.createShader(a);return r.shaderSource(e,t),r.compileShader(e),r.getShaderParameter(e,r.COMPILE_STATUS)?e:(console.log(r.getShaderInfoLog(e)),null)},this.loadShaders=function(t,a,u){let s=u||"_default";r.useProgram(null);let c=e.buildShader(t,r.VERTEX_SHADER),M=e.buildShader(a,r.FRAGMENT_SHADER);if(c&&M){let t=r.createProgram();if(r.attachShader(t,c),r.attachShader(t,M),r.linkProgram(t),!r.getProgramParameter(t,r.LINK_STATUS))return void console.log("Error initing shader program");r.useProgram(t);let a=r.getAttribLocation(t,"position"),e=r.getAttribLocation(t,"normal"),u=r.getAttribLocation(t,"texcoord"),f=r.getAttribLocation(t,"model"),m=r.getAttribLocation(t,"colorInstance"),h=[];a>=0&&h.push(a),e>=0&&h.push(e),u>=0&&h.push(u),m>=0&&h.push(m);let x=[];f>=0&&(h.push(f),x.push(f),h.push(f+1),x.push(f+1),h.push(f+2),x.push(f+2),h.push(f+3),x.push(f+3));let I={program:t,positionVertex:a,normalVertex:e,texcoord:u,model:f,colorInstance:m,modelViewProjectionUniform:r.getUniformLocation(t,"modelViewProjection"),modelViewUniform:r.getUniformLocation(t,"modelView"),normalMatrixUniform:r.getUniformLocation(t,"normalMatrix"),lightPositionUniform:r.getUniformLocation(t,"lightPosition"),colorUniform:r.getUniformLocation(t,"color"),useTextureUniform:r.getUniformLocation(t,"useTexture"),unlitUniform:r.getUniformLocation(t,"unlit"),texSamplerUniform:r.getUniformLocation(t,"texSampler"),id:s,attribs:h,modelAttribs:x,isInstance:s===n.INSTACE_PROGRAM};s===n.DEFAULT_PROGRAM?o=I:s===n.INSTACE_PROGRAM&&(l=I),i[s]=I,r.useProgram(null),console.log("succesfully loaded shaders")}else console.log("Error loading shaders")},this.uploadBuffer=function(t){let a=r.createBuffer();return r.bindBuffer(r.ARRAY_BUFFER,a),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),r.STATIC_DRAW),a},this.addObject=function(t,a,e,o,l){let i=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,i),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),r.STATIC_DRAW);let u=mat4.create();o&&mat4.copy(u,o);let c=vec4.fromValues(.8,.8,.8,1);e||(c=vec4.clone(e));let M=r.createBuffer();r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,M),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),r.STATIC_DRAW),s.push({verticesBufferId:i,elementsBufferId:M,transform:u,count:a.length,color:e,textureName:l,programId:n.DEFAULT_PROGRAM})},this.addObjectInstances=function(t,a,e,o,l){if(e.length!==o.length)return void console.log("Colors and instances must have same length");let i=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,i),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),r.STATIC_DRAW);let u=r.createBuffer();if(r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,u),r.bufferData(r.ELEMENT_ARRAY_BUFFER,new Uint16Array(a),r.STATIC_DRAW),f){let t=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,t);let c=new Float32Array(16*o.length);for(let t=0;t<o.length;t++){let a=o[t];for(let e=0;e<16;e++)c[16*t+e]=a[e]}r.bufferData(r.ARRAY_BUFFER,c,r.STATIC_DRAW);let M=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,M);let f=new Float32Array(4*e.length);for(let t=0;t<e.length;t++){let a=e[t];for(let e=0;e<4;e++)f[4*t+e]=a[e]}r.bufferData(r.ARRAY_BUFFER,f,r.STATIC_DRAW),s.push({verticesBufferId:i,elementsBufferId:u,modelBufferId:t,count:a.length,instanceCount:o.length,colorBufferId:M,textureName:l,programId:n.INSTACE_PROGRAM})}else for(let t=0;t<o.length;t++){let r=mat4.clone(o[t]),c=vec4.clone(e[t]);s.push({verticesBufferId:i,elementsBufferId:u,transform:r,count:a.length,color:c,textureName:l,programId:n.DEFAULT_PROGRAM})}},this.addLines=function(t,a){let e=r.createBuffer();r.bindBuffer(r.ARRAY_BUFFER,e),r.bufferData(r.ARRAY_BUFFER,new Float32Array(t),r.STATIC_DRAW),a||(a=vec4.fromValues(1,1,1,1)),c.push({verticesBufferId:e,count:t.length/3,vertexSize:12,color:a})},this.addTexture=function(t,a,n){let o=r.createTexture();r.bindTexture(r.TEXTURE_2D,o),r.pixelStorei(r.UNPACK_FLIP_Y_WEBGL,!0),r.texImage2D(r.TEXTURE_2D,0,r.RGBA,r.RGBA,r.UNSIGNED_BYTE,a),(n=null!==n&&void 0!==n&&n)?(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST)):(r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR)),r.bindTexture(r.TEXTURE_2D,null),M[t]=o,e.draw()},this.clearBatches=function(){for(let t=0;t<s.length;t++){let a=s[t];r.deleteBuffer(a.verticesBufferId),r.deleteBuffer(a.elementsBufferId)}s=[]},this.draw=function(){if(r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),0==s.length&&0==c.length)return;let n=mat4.create(),l=x,f=mat4.create(),m=mat4.create(),I=mat4.create();mat4.perspective(f,45,h.width/h.height,.1,1e5);let d=null,S=null,D=null,v=null;r.activeTexture(r.TEXTURE0);for(let c=0;c<s.length;c++){let h=s[c],x=null;if(h.programId){if(!i.hasOwnProperty(h.programId)){console.log("Program not found!");continue}x=i[h.programId]}else x=o;if(d!==x){t((d=x).attribs),r.useProgram(d.program);let a=vec3.fromValues(0,0,0);r.uniform3fv(d.lightPositionUniform,a),r.uniform1f(d.unlitUniform,0)}d.isInstance||mat4.copy(n,h.transform);let F=mat4.create();mat4.scale(n,n,e.scale),mat4.multiply(n,e.rotation,n),mat4.multiply(m,l,n),mat4.multiply(I,f,m),mat4.invert(F,m),mat4.transpose(F,F),r.uniformMatrix4fv(d.modelViewUniform,!1,m),r.uniformMatrix4fv(d.modelViewProjectionUniform,!1,I),r.uniformMatrix4fv(d.normalMatrixUniform,!1,F);if(S!==h.verticesBufferId){if(r.bindBuffer(r.ARRAY_BUFFER,h.verticesBufferId),r.vertexAttribPointer(d.positionVertex,3,r.FLOAT,!1,32,0),r.vertexAttribPointer(d.normalVertex,3,r.FLOAT,!1,32,12),r.vertexAttribPointer(d.texcoord,2,r.FLOAT,!1,32,24),d.isInstance){r.bindBuffer(r.ARRAY_BUFFER,h.modelBufferId);for(let t=0;t<4;t++)r.vertexAttribPointer(d.model+t,4,r.FLOAT,!1,64,16*t);a(d.modelAttribs,1);r.bindBuffer(r.ARRAY_BUFFER,h.colorBufferId),r.vertexAttribPointer(d.colorInstance,4,r.FLOAT,!1,16,0),a(d.colorInstance,1)}S=h.verticesBufferId}if(D!==h.elementsBufferId&&(r.bindBuffer(r.ELEMENT_ARRAY_BUFFER,h.elementsBufferId),D=h.elementsBufferId),h.textureName&&M.hasOwnProperty(h.textureName)){let t=M[h.textureName];v!==t&&(r.uniform1i(x.texSamplerUniform,0),r.bindTexture(r.TEXTURE_2D,t),r.uniform1f(d.useTextureUniform,1),t=t)}else v!==u&&(r.uniform1i(x.texSamplerUniform,0),r.bindTexture(r.TEXTURE_2D,u),r.uniform1f(d.useTextureUniform,0),d.isInstance||r.uniform4fv(d.colorUniform,h.color),v=u);d.isInstance?r.drawElementsInstanced(r.TRIANGLES,h.count,r.UNSIGNED_SHORT,0,h.instanceCount):r.drawElements(r.TRIANGLES,h.count,r.UNSIGNED_SHORT,0)}r.uniform1f(d.unlitUniform,1);for(let t=0;t<c.length;t++){let a=c[t];r.uniform1i(program.texSamplerUniform,0),r.bindTexture(r.TEXTURE_2D,u),r.uniform1f(d.useTextureUniform,0),r.bindBuffer(r.ARRAY_BUFFER,a.verticesBufferId),r.vertexAttribPointer(d.positionVertex,3,r.FLOAT,!1,a.vertexSize,0),r.vertexAttribPointer(d.normalVertex,3,r.FLOAT,!1,a.vertexSize,0),r.vertexAttribPointer(d.texcoord,2,r.FLOAT,!1,a.vertexSize,0),r.drawArrays(r.LINES,0,a.count)}r.bindTexture(r.TEXTURE_2D,null),r.useProgram(null)},this.updateViewBounds=function(){let t=h.element.getBoundingClientRect();h.width=t.width,h.height=t.height},this.onResize=function(){h.element&&(e.updateViewBounds(),o&&e.draw())},this.setBackgroundColor=function(t,a,e){m.r=t,m.g=a,m.b=e,r&&r.clearColor(t,a,e,1)},this.load=function(t){if(h.element=t,r=t.getContext("webgl2"))f=!0;else if(!(r=t.getContext("webgl")))return!1;e.updateViewBounds(),window.addEventListener("resize",t=>{e.onResize()}),e.loadShaders(VERTEX_SHADER_SOURCE,FRAGMENT_SHADER_SOURCE,n.DEFAULT_PROGRAM),f&&e.loadShaders(INSTANCE_VERTEX_SHADER_SOURCE,FRAGMENT_SHADER_SOURCE,n.INSTACE_PROGRAM),r.clearColor(m.r,m.g,m.b,m.a),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),console.log("Init complete"),r.enable(r.DEPTH_TEST),u=r.createTexture(),r.bindTexture(r.TEXTURE_2D,u);let a=[];for(let t=0;t<16;t++)a.push(0);return r.texImage2D(r.TEXTURE_2D,0,r.RGBA,2,2,0,r.RGBA,r.UNSIGNED_BYTE,new Uint8Array(a)),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,r.NEAREST),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.NEAREST),r.bindTexture(r.TEXTURE_2D,null),!0},this.setViewMatrix=function(t){x=mat4.clone(t)},this.setScale=function(t){e.scale=vec3.clone(t)}}let r=null;n.DEFAULT_PROGRAM="_default",n.INSTACE_PROGRAM="_instance",window.Renderer=n},{}],8:[function(t,a,e){window.VERTEX_SHADER_SOURCE=`\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 texcoord;\n\nuniform highp mat4 modelView;\nuniform highp mat4 modelViewProjection;\nuniform highp mat4 normalMatrix;\nuniform vec4 color;\n\nvarying vec4 currentColor;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vTexcoord;\n\n\nvoid main (void)\n{\n    gl_Position =  modelViewProjection * vec4(position, 1.0);\n    \n    currentColor = color;\n\n    vTexcoord = texcoord;\n\n    vec4 vPosition4 = modelView * vec4(position, 1.0);\n    vPosition = vPosition4.xyz / vPosition4.w;\n    \n    vNormal = mat3(normalMatrix) * normal;\n    vNormal = normalize(vNormal);\n}\n`,window.FRAGMENT_SHADER_SOURCE=`\nprecision mediump float;\nvarying vec4 currentColor;\nvarying vec3 vNormal;\nvarying vec2 vTexcoord;\nvarying vec3 vPosition;\nuniform vec3 lightPosition;\nuniform sampler2D texSampler;\nuniform float useTexture;\nuniform float unlit;\n\nvoid main(void)\n{\n    if(unlit >0.0)\n    {\n        gl_FragColor = currentColor;\n    }\n    else\n    {\n        vec3 lightDir = normalize(lightPosition - vPosition);\n    \n        // Ambient\n        vec3 ambient = vec3(0.1);\n        float d = abs(dot(vNormal, lightDir));\n        \n        // Diffuse\n        vec3 diffuse = vec3(d);\n        \n        vec3 illumination = diffuse + ambient;\n        if(useTexture == 0.0)\n        {\n            gl_FragColor = vec4(illumination * currentColor.rgb, currentColor.a);\n            // gl_FragColor = vec4(vNormal, 1.0);\n        }\n        else\n        {\n            vec4 texel = texture2D(texSampler, vTexcoord);\n            gl_FragColor = vec4(illumination * currentColor.rgb * texel.rgb, currentColor.a);\n            \n            // gl_FragColor = vec4(vTexcoord, 0, currentColor.a);\n        }\n    }\n}\n`,window.INSTANCE_VERTEX_SHADER_SOURCE=`\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 texcoord;\nattribute highp mat4 model;\nattribute vec4 colorInstance;\n\nuniform highp mat4 modelViewProjection;\nuniform highp mat4 modelView;\nuniform highp mat4 normalMatrix;\nuniform vec4 color;\n\nvarying vec4 currentColor;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vTexcoord;\n\n\nvoid main (void)\n{\n    gl_Position =  modelViewProjection * model * vec4(position, 1.0);\n    \n    currentColor = colorInstance;\n\n    vTexcoord = texcoord;\n\n    vec4 vPosition4 = modelView  * model * vec4(position, 1.0);\n    vPosition = vPosition4.xyz / vPosition4.w;\n    \n    vNormal = mat3(modelView) * mat3(model) * normal;\n    vNormal = normalize(vNormal);\n}\n\n`},{}],9:[function(t,a,e){"use strict";window.Timer=function(){let t=this,a=new Date;this.elapsedTime=function(){let t=parseFloat(a.getTime()),e=(new Date).getTime();return((e=parseFloat(e))-t)/1e3},this.restart=function(){a=new Date},this.tick=function(a){console.log(a+" "+t.elapsedTime()),t.restart()}}},{}]},{},[1]);

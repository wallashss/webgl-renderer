!function t(n,e,r){function a(i,u){if(!e[i]){if(!n[i]){var l="function"==typeof require&&require;if(!u&&l)return l(i,!0);if(o)return o(i,!0);var s=new Error("Cannot find module '"+i+"'");throw s.code="MODULE_NOT_FOUND",s}var c=e[i]={exports:{}};n[i][0].call(c.exports,function(t){var e=n[i][1][t];return a(e||t)},c,c.exports,t,n,e,r)}return e[i].exports}for(var o="function"==typeof require&&require,i=0;i<r.length;i++)a(r[i]);return a}({1:[function(t,n,e){window.Renderer=t("./renderer"),window.Camera=t("./camera")},{"./camera":2,"./renderer":6}],2:[function(t,n,e){"use strict";const r=t("gl-matrix"),a=r.vec3,o=r.mat4,i=t("./lvrl/fly"),u=t("./lvrl/examine"),l=t("./timer");n.exports=function(){var t=this;let n=new u,e=new i,r=null,s={x:0,y:0,mousePress:!1},c={yawIntensity:0,pitchIntensity:0,pivot:a.fromValues(0,0,0),angularVelocity:0,zoomIntensity:0,maximumZoom:0,velocity:a.fromValues(0,0,0),forward:0,backward:0,left:0,right:0,up:0,down:0},f=!1,h=1,m=0;this.rotate=function(t,n){c.yawIntensity=t,c.pitchIntensity=n},this.zoom=function(t){c.zoomIntensity=t},this.setViewMatrix=function(t){f=!0,r.setViewMatrix(t)},this.getViewMatrix=function(){return r.getViewMatrix()},this.setCamera=function(t,n,e){let i=o.create();o.lookAt(i,t,n,e),r.setViewMatrix(i),c.pivot=a.clone(n),c.worldUp=a.clone(e),f=!0},this.setFlyMode=function(){if(m=1,r){let t=r.getViewMatrix();e.setViewMatrix(t),e.applyRestrictions(c.worldUp)}r=e},this.setExamineMode=function(){if(m=0,r){let t=r.getViewMatrix();n.setViewMatrix(t)}r=n},this.installCamera=function(n,e){let a=new l;n&&(n.addEventListener("mousedown",function(t){s.mousePress=!0,s.x=t.clientX,s.y=t.clientY}),n.addEventListener("mouseup",function(t){s.mousePress=!1}),n.addEventListener("mousemove",function(n){s.mousePress&&(t.rotate(-s.x+n.clientX,-s.y+n.clientY),s.x=n.clientX,s.y=n.clientY)}),n.addEventListener("wheel",function(n){let e=0;n.deltaMode==WheelEvent.DOM_DELTA_PIXEL?e=n.deltaY:n.deltaMode==WheelEvent.DOM_DELTA_LINE?e=33*n.deltaY:n.deltaY>0?e=10:n.delta<0&&(e=-10),t.zoom(.001*e)}),window.addEventListener("keydown",function(t){(!document.activeElement||"textarea"!==document.activeElement.tagName&&"input"!==document.activeElement.tagName)&&(!t.shiftKey||"W"!==t.key&&"w"!==t.key&&"ArrowUp"!==t.key?!t.shiftKey||"S"!==t.key&&"s"!==t.key&&"ArrowDown"!==t.key?"W"===t.key||"w"===t.key||"ArrowUp"===t.key?c.forward=1:"S"===t.key||"s"===t.key||"ArrowDown"===t.key?c.backward=1:"A"===t.key||"a"===t.key||"ArrowLeft"===t.key?c.left=1:"D"!==t.key&&"d"!==t.key&&"ArrowRight"!==t.key||(c.right=1):c.down=1:c.up=1)}),window.addEventListener("keyup",function(t){"W"===t.key||"w"===t.key||"ArrowUp"===t.key?(c.up=0,c.forward=0):"S"===t.key||"s"===t.key||"ArrowDown"===t.key?(c.backward=0,c.down=0):"A"===t.key||"a"===t.key||"ArrowLeft"===t.key?c.left=0:"D"!==t.key&&"d"!==t.key&&"ArrowRight"!==t.key||(c.right=0)}));let o=function(){let t=a.elapsedTime();e&&(r.update(t,c)||f)&&(e(r.getViewMatrix(),t),f=!1),window.requestAnimationFrame(o),a.restart()};e&&e(r.getViewMatrix(),0),o()},this.setVelocity=function(t){h=t,c.velocity=a.fromValues(1*h,1*h,1*h)};!function(){t.setExamineMode();let n=a.fromValues(0,0,-5),e=a.fromValues(0,0,0),i=a.fromValues(0,1,0),u=o.create();o.lookAt(u,n,e,i),r.setViewMatrix(u),c.pivot=a.clone(e),c.worldUp=a.clone(i),c.angularVelocity=30,c.maximumZoom=1,c.velocity=a.fromValues(1,1,1)}()}},{"./lvrl/examine":3,"./lvrl/fly":4,"./timer":8,"gl-matrix":5}],3:[function(t,n,e){"use strict";const r=t("gl-matrix"),a=r.vec3,o=r.vec4,i=r.mat4,u=r.glMatrix;n.exports=function(){var t=!1,n=i.create(),e=i.create();this.setViewMatrix=function(r){t=!1,n=i.clone(r),e=i.clone(r)},this.getViewMatrix=function(){return n},this.update=function(r,l){if(u.equals(l.yawIntensity,0)&&u.equals(l.pitchIntensity,0)&&u.equals(l.zoomIntensity,0)&&!t)return!1;{let s=i.clone(n);if(t&&(s=i.clone(e)),!u.equals(l.yawIntensity,0)||!u.equals(l.pitchIntensity,0)){let t=a.fromValues(l.pivot[0],l.pivot[1],l.pivot[2]);a.transformMat4(t,t,s);let n=i.create();i.translate(n,n,t);let e=i.create(),c=a.fromValues(-t[0],-t[1],-t[2]);if(i.translate(e,e,c),!l.lockUpRotation){let t=u.toRadian(l.yawIntensity*l.angularVelocity*r),c=o.fromValues(l.worldUp[0],l.worldUp[1],l.worldUp[2],0);o.transformMat4(c,c,s);let f=a.fromValues(c[0],c[1],c[2]);a.normalize(f,f);let h=i.create();i.rotate(h,h,t,f),i.multiply(s,e,s),i.multiply(s,h,s),i.multiply(s,n,s)}if(!l.lockRightRotation){let t=i.create();i.invert(t,s);let o=a.fromValues(-t[8],-t[9],-t[10]);a.normalize(o,o);let c=Math.acos(a.dot(l.worldUp,o)),f=u.toRadian(l.pitchIntensity*l.angularVelocity*r),h=c+f;if(h<Math.PI&&h>0){let t=i.create();i.rotate(t,t,f,a.fromValues(1,0,0)),i.multiply(s,e,s),i.multiply(s,t,s),i.multiply(s,n,s)}}l.yawIntensity=0,l.pitchIntensity=0}if(!u.equals(l.zoomIntensity,0)){let t=i.create();i.invert(t,s);let n=a.fromValues(t[12],t[13],t[14]),e=a.fromValues(l.pivot[0],l.pivot[1],l.pivot[2]);if(!(u.equals(n[0],e[0])&&u.equals(n[1],e[1])&&u.equals(n[2],e[2]))){let t=a.create();a.normalize(t,a.fromValues(e[0]-n[0],e[1]-n[1],e[2]-n[2]));let r=a.distance(e,n),o=r*l.zoomIntensity;if(r+o>l.maximumZoom){let n=i.create();i.translate(n,n,a.fromValues(t[0]*o,t[1]*o,t[2]*o)),i.multiply(s,s,n)}}l.zoomIntensity=0}return n=i.clone(s),!0}}}},{"gl-matrix":5}],4:[function(t,n,e){"use strict";const r=t("gl-matrix"),a=r.vec3,o=r.vec4,i=r.mat4,u=r.glMatrix;n.exports=function(){let t=i.create(),n=a.fromValues(0,0,-1);const e=u.toRadian(179);this.setFowardDirection=function(t){n=a.clone(t)},this.setViewMatrix=function(n){t=i.clone(n)},this.getViewMatrix=function(){return t},this.update=function(r,l){if(u.equals(l.yawIntensity,0)&&u.equals(l.pitchIntensity,0)&&u.equals(l.forward,0)&&u.equals(l.backward,0)&&u.equals(l.left,0)&&u.equals(l.right,0)&&u.equals(l.up,0)&&u.equals(l.down,0))return!1;let s=i.clone(t),c=o.fromValues(l.worldUp[0],l.worldUp[1],l.worldUp[2],0);o.transformMat4(c,c,s);let f=a.fromValues(c[0],c[1],c[2]);if(a.normalize(f,f),!u.equals(l.yawIntensity,0)||!u.equals(l.pitchIntensity,0)){if(!l.lockUpRotation){let t=i.create();i.rotate(t,t,u.toRadian(l.yawIntensity*l.angularVelocity*r),f),i.multiply(s,t,s)}if(!l.lockRightRotation){let t=i.create();i.invert(t,s);let n=a.fromValues(-t[8],-t[9],-t[10]);a.normalize(n,n);let o=Math.acos(a.dot(l.worldUp,n)),c=u.toRadian(l.pitchIntensity*l.angularVelocity*r),f=o+c;if(f<e&&f>1){let t=i.create();i.rotate(t,t,c,a.fromValues(1,0,0)),i.multiply(s,t,s)}}l.yawIntensity=0,l.pitchIntensity=0}let h=a.create();h[0]=l.velocity[0]*(l.left-l.right)*r,h[1]=l.velocity[1]*(l.down-l.up)*r,h[2]=l.velocity[2]*(l.backward-l.forward)*r;let m=a.clone(n);a.normalize(m,m);let M=a.create();a.cross(M,m,f),a.normalize(M,M);let d=a.create();a.cross(d,M,m),a.normalize(d,d);let v=a.fromValues(m[0]*h[2]+d[0]*h[1]+M[0]*h[0],m[1]*h[2]+d[1]*h[1]+M[1]*h[0],m[2]*h[2]+d[2]*h[1]+M[2]*h[0]),p=i.create();return i.translate(p,p,v),i.multiply(s,p,s),t=i.clone(s),!0},this.applyRestrictions=function(n){let e=i.create();i.invert(e,t);let r=e[15],o=a.fromValues(e[12]/r,e[13]/r,e[14]/r),u=a.fromValues(-e[8],-e[9],-e[10]),l=a.fromValues(o[0]+u[0],o[1]+u[1],o[2]+u[2]);i.lookAt(t,o,l,n)}}},{"gl-matrix":5}],5:[function(t,n,e){!function(t,r){if("object"==typeof e&&"object"==typeof n)n.exports=r();else if("function"==typeof define&&define.amd)define([],r);else{var a=r();for(var o in a)("object"==typeof e?e:t)[o]=a[o]}}(this,function(){return function(t){function n(r){if(e[r])return e[r].exports;var a=e[r]={i:r,l:!1,exports:{}};return t[r].call(a.exports,a,a.exports,n),a.l=!0,a.exports}var e={};return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)},n.p="",n(n.s=4)}([function(t,n,e){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.setMatrixArrayType=function(t){n.ARRAY_TYPE=a=t},n.toRadian=function(t){return t*o},n.equals=function(t,n){return Math.abs(t-n)<=r*Math.max(1,Math.abs(t),Math.abs(n))};var r=n.EPSILON=1e-6,a=n.ARRAY_TYPE="undefined"!=typeof Float32Array?Float32Array:Array,o=(n.RANDOM=Math.random,Math.PI/180)},function(t,n,e){"use strict";function r(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],l=n[5],s=n[6],c=n[7],f=n[8],h=e[0],m=e[1],M=e[2],d=e[3],v=e[4],p=e[5],b=e[6],E=e[7],A=e[8];return t[0]=h*r+m*i+M*s,t[1]=h*a+m*u+M*c,t[2]=h*o+m*l+M*f,t[3]=d*r+v*i+p*s,t[4]=d*a+v*u+p*c,t[5]=d*o+v*l+p*f,t[6]=b*r+E*i+A*s,t[7]=b*a+E*u+A*c,t[8]=b*o+E*l+A*f,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t}Object.defineProperty(n,"__esModule",{value:!0}),n.sub=n.mul=void 0,n.create=function(){var t=new o.ARRAY_TYPE(9);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat4=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[4],t[4]=n[5],t[5]=n[6],t[6]=n[8],t[7]=n[9],t[8]=n[10],t},n.clone=function(t){var n=new o.ARRAY_TYPE(9);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},n.fromValues=function(t,n,e,r,a,i,u,l,s){var c=new o.ARRAY_TYPE(9);return c[0]=t,c[1]=n,c[2]=e,c[3]=r,c[4]=a,c[5]=i,c[6]=u,c[7]=l,c[8]=s,c},n.set=function(t,n,e,r,a,o,i,u,l,s){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],a=n[5];t[1]=n[3],t[2]=n[6],t[3]=e,t[5]=n[7],t[6]=r,t[7]=a}else t[0]=n[0],t[1]=n[3],t[2]=n[6],t[3]=n[1],t[4]=n[4],t[5]=n[7],t[6]=n[2],t[7]=n[5],t[8]=n[8];return t},n.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],l=n[6],s=n[7],c=n[8],f=c*i-u*s,h=-c*o+u*l,m=s*o-i*l,M=e*f+r*h+a*m;return M?(M=1/M,t[0]=f*M,t[1]=(-c*r+a*s)*M,t[2]=(u*r-a*i)*M,t[3]=h*M,t[4]=(c*e-a*l)*M,t[5]=(-u*e+a*o)*M,t[6]=m*M,t[7]=(-s*e+r*l)*M,t[8]=(i*e-r*o)*M,t):null},n.adjoint=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],l=n[6],s=n[7],c=n[8];return t[0]=i*c-u*s,t[1]=a*s-r*c,t[2]=r*u-a*i,t[3]=u*l-o*c,t[4]=e*c-a*l,t[5]=a*o-e*u,t[6]=o*s-i*l,t[7]=r*l-e*s,t[8]=e*i-r*o,t},n.determinant=function(t){var n=t[0],e=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8];return n*(s*o-i*l)+e*(-s*a+i*u)+r*(l*a-o*u)},n.multiply=r,n.translate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],l=n[5],s=n[6],c=n[7],f=n[8],h=e[0],m=e[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=u,t[5]=l,t[6]=h*r+m*i+s,t[7]=h*a+m*u+c,t[8]=h*o+m*l+f,t},n.rotate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],l=n[5],s=n[6],c=n[7],f=n[8],h=Math.sin(e),m=Math.cos(e);return t[0]=m*r+h*i,t[1]=m*a+h*u,t[2]=m*o+h*l,t[3]=m*i-h*r,t[4]=m*u-h*a,t[5]=m*l-h*o,t[6]=s,t[7]=c,t[8]=f,t},n.scale=function(t,n,e){var r=e[0],a=e[1];return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=a*n[3],t[4]=a*n[4],t[5]=a*n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=1,t[5]=0,t[6]=n[0],t[7]=n[1],t[8]=1,t},n.fromRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=-e,t[4]=r,t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=n[1],t[5]=0,t[6]=0,t[7]=0,t[8]=1,t},n.fromMat2d=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=0,t[3]=n[2],t[4]=n[3],t[5]=0,t[6]=n[4],t[7]=n[5],t[8]=1,t},n.fromQuat=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e+e,u=r+r,l=a+a,s=e*i,c=r*i,f=r*u,h=a*i,m=a*u,M=a*l,d=o*i,v=o*u,p=o*l;return t[0]=1-f-M,t[3]=c-p,t[6]=h+v,t[1]=c+p,t[4]=1-s-M,t[7]=m-d,t[2]=h-v,t[5]=m+d,t[8]=1-s-f,t},n.normalFromMat4=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],l=n[6],s=n[7],c=n[8],f=n[9],h=n[10],m=n[11],M=n[12],d=n[13],v=n[14],p=n[15],b=e*u-r*i,E=e*l-a*i,A=e*s-o*i,R=r*l-a*u,x=r*s-o*u,y=a*s-o*l,g=c*d-f*M,w=c*v-h*M,T=c*p-m*M,_=f*v-h*d,P=f*p-m*d,I=h*p-m*v,S=b*I-E*P+A*_+R*T-x*w+y*g;return S?(S=1/S,t[0]=(u*I-l*P+s*_)*S,t[1]=(l*T-i*I-s*w)*S,t[2]=(i*P-u*T+s*g)*S,t[3]=(a*P-r*I-o*_)*S,t[4]=(e*I-a*T+o*w)*S,t[5]=(r*T-e*P-o*g)*S,t[6]=(d*y-v*x+p*R)*S,t[7]=(v*A-M*y-p*E)*S,t[8]=(M*x-d*A+p*b)*S,t):null},n.projection=function(t,n,e){return t[0]=2/n,t[1]=0,t[2]=0,t[3]=0,t[4]=-2/e,t[5]=0,t[6]=-1,t[7]=1,t[8]=1,t},n.str=function(t){return"mat3("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2))},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t},n.subtract=a,n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],f=t[8],h=n[0],m=n[1],M=n[2],d=n[3],v=n[4],p=n[5],b=n[6],E=n[7],A=n[8];return Math.abs(e-h)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(h))&&Math.abs(r-m)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(m))&&Math.abs(a-M)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(M))&&Math.abs(i-d)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(d))&&Math.abs(u-v)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(v))&&Math.abs(l-p)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(p))&&Math.abs(s-b)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(b))&&Math.abs(c-E)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(E))&&Math.abs(f-A)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(A))};var o=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}(e(0));n.mul=r,n.sub=a},function(t,n,e){"use strict";function r(){var t=new M.ARRAY_TYPE(3);return t[0]=0,t[1]=0,t[2]=0,t}function a(t){var n=t[0],e=t[1],r=t[2];return Math.sqrt(n*n+e*e+r*r)}function o(t,n,e){var r=new M.ARRAY_TYPE(3);return r[0]=t,r[1]=n,r[2]=e,r}function i(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t}function u(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t}function l(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t}function s(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return Math.sqrt(e*e+r*r+a*a)}function c(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2];return e*e+r*r+a*a}function f(t){var n=t[0],e=t[1],r=t[2];return n*n+e*e+r*r}function h(t,n){var e=n[0],r=n[1],a=n[2],o=e*e+r*r+a*a;return o>0&&(o=1/Math.sqrt(o),t[0]=n[0]*o,t[1]=n[1]*o,t[2]=n[2]*o),t}function m(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}Object.defineProperty(n,"__esModule",{value:!0}),n.forEach=n.sqrLen=n.len=n.sqrDist=n.dist=n.div=n.mul=n.sub=void 0,n.create=r,n.clone=function(t){var n=new M.ARRAY_TYPE(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n},n.length=a,n.fromValues=o,n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t},n.set=function(t,n,e,r){return t[0]=n,t[1]=e,t[2]=r,t},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t},n.subtract=i,n.multiply=u,n.divide=l,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t},n.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t},n.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t},n.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t},n.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t},n.distance=s,n.squaredDistance=c,n.squaredLength=f,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t},n.normalize=h,n.dot=m,n.cross=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],l=e[2];return t[0]=a*l-o*u,t[1]=o*i-r*l,t[2]=r*u-a*i,t},n.lerp=function(t,n,e,r){var a=n[0],o=n[1],i=n[2];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t[2]=i+r*(e[2]-i),t},n.hermite=function(t,n,e,r,a,o){var i=o*o,u=i*(2*o-3)+1,l=i*(o-2)+o,s=i*(o-1),c=i*(3-2*o);return t[0]=n[0]*u+e[0]*l+r[0]*s+a[0]*c,t[1]=n[1]*u+e[1]*l+r[1]*s+a[1]*c,t[2]=n[2]*u+e[2]*l+r[2]*s+a[2]*c,t},n.bezier=function(t,n,e,r,a,o){var i=1-o,u=i*i,l=o*o,s=u*i,c=3*o*u,f=3*l*i,h=l*o;return t[0]=n[0]*s+e[0]*c+r[0]*f+a[0]*h,t[1]=n[1]*s+e[1]*c+r[1]*f+a[1]*h,t[2]=n[2]*s+e[2]*c+r[2]*f+a[2]*h,t},n.random=function(t,n){n=n||1;var e=2*M.RANDOM()*Math.PI,r=2*M.RANDOM()-1,a=Math.sqrt(1-r*r)*n;return t[0]=Math.cos(e)*a,t[1]=Math.sin(e)*a,t[2]=r*n,t},n.transformMat4=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[3]*r+e[7]*a+e[11]*o+e[15];return i=i||1,t[0]=(e[0]*r+e[4]*a+e[8]*o+e[12])/i,t[1]=(e[1]*r+e[5]*a+e[9]*o+e[13])/i,t[2]=(e[2]*r+e[6]*a+e[10]*o+e[14])/i,t},n.transformMat3=function(t,n,e){var r=n[0],a=n[1],o=n[2];return t[0]=r*e[0]+a*e[3]+o*e[6],t[1]=r*e[1]+a*e[4]+o*e[7],t[2]=r*e[2]+a*e[5]+o*e[8],t},n.transformQuat=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],l=e[2],s=e[3],c=s*r+u*o-l*a,f=s*a+l*r-i*o,h=s*o+i*a-u*r,m=-i*r-u*a-l*o;return t[0]=c*s+m*-i+f*-l-h*-u,t[1]=f*s+m*-u+h*-i-c*-l,t[2]=h*s+m*-l+c*-u-f*-i,t},n.rotateX=function(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0],o[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),o[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},n.rotateY=function(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),o[1]=a[1],o[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},n.rotateZ=function(t,n,e,r){var a=[],o=[];return a[0]=n[0]-e[0],a[1]=n[1]-e[1],a[2]=n[2]-e[2],o[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),o[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),o[2]=a[2],t[0]=o[0]+e[0],t[1]=o[1]+e[1],t[2]=o[2]+e[2],t},n.angle=function(t,n){var e=o(t[0],t[1],t[2]),r=o(n[0],n[1],n[2]);h(e,e),h(r,r);var a=m(e,r);return a>1?0:a<-1?Math.PI:Math.acos(a)},n.str=function(t){return"vec3("+t[0]+", "+t[1]+", "+t[2]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],o=n[0],i=n[1],u=n[2];return Math.abs(e-o)<=M.EPSILON*Math.max(1,Math.abs(e),Math.abs(o))&&Math.abs(r-i)<=M.EPSILON*Math.max(1,Math.abs(r),Math.abs(i))&&Math.abs(a-u)<=M.EPSILON*Math.max(1,Math.abs(a),Math.abs(u))};var M=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}(e(0));n.sub=i,n.mul=u,n.div=l,n.dist=s,n.sqrDist=c,n.len=a,n.sqrLen=f,n.forEach=function(){var t=r();return function(n,e,r,a,o,i){var u=void 0,l=void 0;for(e||(e=3),r||(r=0),l=a?Math.min(a*e+r,n.length):n.length,u=r;u<l;u+=e)t[0]=n[u],t[1]=n[u+1],t[2]=n[u+2],o(t,t,i),n[u]=t[0],n[u+1]=t[1],n[u+2]=t[2];return n}}()},function(t,n,e){"use strict";function r(){var t=new m.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}function o(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t[2]=n[2]*e[2],t[3]=n[3]*e[3],t}function i(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t[2]=n[2]/e[2],t[3]=n[3]/e[3],t}function u(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t}function l(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2],o=n[3]-t[3];return Math.sqrt(e*e+r*r+a*a+o*o)}function s(t,n){var e=n[0]-t[0],r=n[1]-t[1],a=n[2]-t[2],o=n[3]-t[3];return e*e+r*r+a*a+o*o}function c(t){var n=t[0],e=t[1],r=t[2],a=t[3];return Math.sqrt(n*n+e*e+r*r+a*a)}function f(t){var n=t[0],e=t[1],r=t[2],a=t[3];return n*n+e*e+r*r+a*a}function h(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e*e+r*r+a*a+o*o;return i>0&&(i=1/Math.sqrt(i),t[0]=e*i,t[1]=r*i,t[2]=a*i,t[3]=o*i),t}Object.defineProperty(n,"__esModule",{value:!0}),n.forEach=n.sqrLen=n.len=n.sqrDist=n.dist=n.div=n.mul=n.sub=void 0,n.create=r,n.clone=function(t){var n=new m.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},n.fromValues=function(t,n,e,r){var a=new m.ARRAY_TYPE(4);return a[0]=t,a[1]=n,a[2]=e,a[3]=r,a},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},n.set=function(t,n,e,r,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},n.subtract=a,n.multiply=o,n.divide=i,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t[2]=Math.ceil(n[2]),t[3]=Math.ceil(n[3]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t[2]=Math.floor(n[2]),t[3]=Math.floor(n[3]),t},n.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t[2]=Math.min(n[2],e[2]),t[3]=Math.min(n[3],e[3]),t},n.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t[2]=Math.max(n[2],e[2]),t[3]=Math.max(n[3],e[3]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t[2]=Math.round(n[2]),t[3]=Math.round(n[3]),t},n.scale=u,n.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t},n.distance=l,n.squaredDistance=s,n.length=c,n.squaredLength=f,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=-n[3],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t[2]=1/n[2],t[3]=1/n[3],t},n.normalize=h,n.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]+t[3]*n[3]},n.lerp=function(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=n[3];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t[2]=i+r*(e[2]-i),t[3]=u+r*(e[3]-u),t},n.random=function(t,n){return n=n||1,t[0]=m.RANDOM(),t[1]=m.RANDOM(),t[2]=m.RANDOM(),t[3]=m.RANDOM(),h(t,t),u(t,t,n),t},n.transformMat4=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3];return t[0]=e[0]*r+e[4]*a+e[8]*o+e[12]*i,t[1]=e[1]*r+e[5]*a+e[9]*o+e[13]*i,t[2]=e[2]*r+e[6]*a+e[10]*o+e[14]*i,t[3]=e[3]*r+e[7]*a+e[11]*o+e[15]*i,t},n.transformQuat=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=e[0],u=e[1],l=e[2],s=e[3],c=s*r+u*o-l*a,f=s*a+l*r-i*o,h=s*o+i*a-u*r,m=-i*r-u*a-l*o;return t[0]=c*s+m*-i+f*-l-h*-u,t[1]=f*s+m*-u+h*-i-c*-l,t[2]=h*s+m*-l+c*-u-f*-i,t[3]=n[3],t},n.str=function(t){return"vec4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],o=t[3],i=n[0],u=n[1],l=n[2],s=n[3];return Math.abs(e-i)<=m.EPSILON*Math.max(1,Math.abs(e),Math.abs(i))&&Math.abs(r-u)<=m.EPSILON*Math.max(1,Math.abs(r),Math.abs(u))&&Math.abs(a-l)<=m.EPSILON*Math.max(1,Math.abs(a),Math.abs(l))&&Math.abs(o-s)<=m.EPSILON*Math.max(1,Math.abs(o),Math.abs(s))};var m=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}(e(0));n.sub=a,n.mul=o,n.div=i,n.dist=l,n.sqrDist=s,n.len=c,n.sqrLen=f,n.forEach=function(){var t=r();return function(n,e,r,a,o,i){var u=void 0,l=void 0;for(e||(e=4),r||(r=0),l=a?Math.min(a*e+r,n.length):n.length,u=r;u<l;u+=e)t[0]=n[u],t[1]=n[u+1],t[2]=n[u+2],t[3]=n[u+3],o(t,t,i),n[u]=t[0],n[u+1]=t[1],n[u+2]=t[2],n[u+3]=t[3];return n}}()},function(t,n,e){"use strict";function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}Object.defineProperty(n,"__esModule",{value:!0}),n.vec4=n.vec3=n.vec2=n.quat=n.mat4=n.mat3=n.mat2d=n.mat2=n.glMatrix=void 0;var a=r(e(0)),o=r(e(5)),i=r(e(6)),u=r(e(1)),l=r(e(7)),s=r(e(8)),c=r(e(9)),f=r(e(2)),h=r(e(3));n.glMatrix=a,n.mat2=o,n.mat2d=i,n.mat3=u,n.mat4=l,n.quat=s,n.vec2=c,n.vec3=f,n.vec4=h},function(t,n,e){"use strict";function r(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],l=e[1],s=e[2],c=e[3];return t[0]=r*u+o*l,t[1]=a*u+i*l,t[2]=r*s+o*c,t[3]=a*s+i*c,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t}Object.defineProperty(n,"__esModule",{value:!0}),n.sub=n.mul=void 0,n.create=function(){var t=new o.ARRAY_TYPE(4);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.clone=function(t){var n=new o.ARRAY_TYPE(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t},n.fromValues=function(t,n,e,r){var a=new o.ARRAY_TYPE(4);return a[0]=t,a[1]=n,a[2]=e,a[3]=r,a},n.set=function(t,n,e,r,a){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t},n.transpose=function(t,n){if(t===n){var e=n[1];t[1]=n[2],t[2]=e}else t[0]=n[0],t[1]=n[2],t[2]=n[1],t[3]=n[3];return t},n.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e*o-a*r;return i?(i=1/i,t[0]=o*i,t[1]=-r*i,t[2]=-a*i,t[3]=e*i,t):null},n.adjoint=function(t,n){var e=n[0];return t[0]=n[3],t[1]=-n[1],t[2]=-n[2],t[3]=e,t},n.determinant=function(t){return t[0]*t[3]-t[2]*t[1]},n.multiply=r,n.rotate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),l=Math.cos(e);return t[0]=r*l+o*u,t[1]=a*l+i*u,t[2]=r*-u+o*l,t[3]=a*-u+i*l,t},n.scale=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],l=e[1];return t[0]=r*u,t[1]=a*u,t[2]=o*l,t[3]=i*l,t},n.fromRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t},n.str=function(t){return"mat2("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2))},n.LDU=function(t,n,e,r){return t[2]=r[2]/r[0],e[0]=r[0],e[1]=r[1],e[3]=r[3]-t[2]*e[1],[t,n,e]},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t},n.subtract=a,n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],i=t[3],u=n[0],l=n[1],s=n[2],c=n[3];return Math.abs(e-u)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(u))&&Math.abs(r-l)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(l))&&Math.abs(a-s)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(s))&&Math.abs(i-c)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(c))},n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t};var o=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}(e(0));n.mul=r,n.sub=a},function(t,n,e){"use strict";function r(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],l=n[5],s=e[0],c=e[1],f=e[2],h=e[3],m=e[4],M=e[5];return t[0]=r*s+o*c,t[1]=a*s+i*c,t[2]=r*f+o*h,t[3]=a*f+i*h,t[4]=r*m+o*M+u,t[5]=a*m+i*M+l,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t}Object.defineProperty(n,"__esModule",{value:!0}),n.sub=n.mul=void 0,n.create=function(){var t=new o.ARRAY_TYPE(6);return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.clone=function(t){var n=new o.ARRAY_TYPE(6);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t},n.fromValues=function(t,n,e,r,a,i){var u=new o.ARRAY_TYPE(6);return u[0]=t,u[1]=n,u[2]=e,u[3]=r,u[4]=a,u[5]=i,u},n.set=function(t,n,e,r,a,o,i){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t},n.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],l=e*o-r*a;return l?(l=1/l,t[0]=o*l,t[1]=-r*l,t[2]=-a*l,t[3]=e*l,t[4]=(a*u-o*i)*l,t[5]=(r*i-e*u)*l,t):null},n.determinant=function(t){return t[0]*t[3]-t[1]*t[2]},n.multiply=r,n.rotate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],l=n[5],s=Math.sin(e),c=Math.cos(e);return t[0]=r*c+o*s,t[1]=a*c+i*s,t[2]=r*-s+o*c,t[3]=a*-s+i*c,t[4]=u,t[5]=l,t},n.scale=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],l=n[5],s=e[0],c=e[1];return t[0]=r*s,t[1]=a*s,t[2]=o*c,t[3]=i*c,t[4]=u,t[5]=l,t},n.translate=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],l=n[5],s=e[0],c=e[1];return t[0]=r,t[1]=a,t[2]=o,t[3]=i,t[4]=r*s+o*c+u,t[5]=a*s+i*c+l,t},n.fromRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=-e,t[3]=r,t[4]=0,t[5]=0,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=n[1],t[4]=0,t[5]=0,t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=n[0],t[5]=n[1],t},n.str=function(t){return"mat2d("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+1)},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t},n.subtract=a,n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],i=t[3],u=t[4],l=t[5],s=n[0],c=n[1],f=n[2],h=n[3],m=n[4],M=n[5];return Math.abs(e-s)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(s))&&Math.abs(r-c)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(c))&&Math.abs(a-f)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(f))&&Math.abs(i-h)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(h))&&Math.abs(u-m)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(m))&&Math.abs(l-M)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(M))};var o=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}(e(0));n.mul=r,n.sub=a},function(t,n,e){"use strict";function r(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=n[4],l=n[5],s=n[6],c=n[7],f=n[8],h=n[9],m=n[10],M=n[11],d=n[12],v=n[13],p=n[14],b=n[15],E=e[0],A=e[1],R=e[2],x=e[3];return t[0]=E*r+A*u+R*f+x*d,t[1]=E*a+A*l+R*h+x*v,t[2]=E*o+A*s+R*m+x*p,t[3]=E*i+A*c+R*M+x*b,E=e[4],A=e[5],R=e[6],x=e[7],t[4]=E*r+A*u+R*f+x*d,t[5]=E*a+A*l+R*h+x*v,t[6]=E*o+A*s+R*m+x*p,t[7]=E*i+A*c+R*M+x*b,E=e[8],A=e[9],R=e[10],x=e[11],t[8]=E*r+A*u+R*f+x*d,t[9]=E*a+A*l+R*h+x*v,t[10]=E*o+A*s+R*m+x*p,t[11]=E*i+A*c+R*M+x*b,E=e[12],A=e[13],R=e[14],x=e[15],t[12]=E*r+A*u+R*f+x*d,t[13]=E*a+A*l+R*h+x*v,t[14]=E*o+A*s+R*m+x*p,t[15]=E*i+A*c+R*M+x*b,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t[2]=n[2]-e[2],t[3]=n[3]-e[3],t[4]=n[4]-e[4],t[5]=n[5]-e[5],t[6]=n[6]-e[6],t[7]=n[7]-e[7],t[8]=n[8]-e[8],t[9]=n[9]-e[9],t[10]=n[10]-e[10],t[11]=n[11]-e[11],t[12]=n[12]-e[12],t[13]=n[13]-e[13],t[14]=n[14]-e[14],t[15]=n[15]-e[15],t}Object.defineProperty(n,"__esModule",{value:!0}),n.sub=n.mul=void 0,n.create=function(){var t=new o.ARRAY_TYPE(16);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.clone=function(t){var n=new o.ARRAY_TYPE(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},n.fromValues=function(t,n,e,r,a,i,u,l,s,c,f,h,m,M,d,v){var p=new o.ARRAY_TYPE(16);return p[0]=t,p[1]=n,p[2]=e,p[3]=r,p[4]=a,p[5]=i,p[6]=u,p[7]=l,p[8]=s,p[9]=c,p[10]=f,p[11]=h,p[12]=m,p[13]=M,p[14]=d,p[15]=v,p},n.set=function(t,n,e,r,a,o,i,u,l,s,c,f,h,m,M,d,v){return t[0]=n,t[1]=e,t[2]=r,t[3]=a,t[4]=o,t[5]=i,t[6]=u,t[7]=l,t[8]=s,t[9]=c,t[10]=f,t[11]=h,t[12]=m,t[13]=M,t[14]=d,t[15]=v,t},n.identity=function(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.transpose=function(t,n){if(t===n){var e=n[1],r=n[2],a=n[3],o=n[6],i=n[7],u=n[11];t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=e,t[6]=n[9],t[7]=n[13],t[8]=r,t[9]=o,t[11]=n[14],t[12]=a,t[13]=i,t[14]=u}else t[0]=n[0],t[1]=n[4],t[2]=n[8],t[3]=n[12],t[4]=n[1],t[5]=n[5],t[6]=n[9],t[7]=n[13],t[8]=n[2],t[9]=n[6],t[10]=n[10],t[11]=n[14],t[12]=n[3],t[13]=n[7],t[14]=n[11],t[15]=n[15];return t},n.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],l=n[6],s=n[7],c=n[8],f=n[9],h=n[10],m=n[11],M=n[12],d=n[13],v=n[14],p=n[15],b=e*u-r*i,E=e*l-a*i,A=e*s-o*i,R=r*l-a*u,x=r*s-o*u,y=a*s-o*l,g=c*d-f*M,w=c*v-h*M,T=c*p-m*M,_=f*v-h*d,P=f*p-m*d,I=h*p-m*v,S=b*I-E*P+A*_+R*T-x*w+y*g;return S?(S=1/S,t[0]=(u*I-l*P+s*_)*S,t[1]=(a*P-r*I-o*_)*S,t[2]=(d*y-v*x+p*R)*S,t[3]=(h*x-f*y-m*R)*S,t[4]=(l*T-i*I-s*w)*S,t[5]=(e*I-a*T+o*w)*S,t[6]=(v*A-M*y-p*E)*S,t[7]=(c*y-h*A+m*E)*S,t[8]=(i*P-u*T+s*g)*S,t[9]=(r*T-e*P-o*g)*S,t[10]=(M*x-d*A+p*b)*S,t[11]=(f*A-c*x-m*b)*S,t[12]=(u*w-i*_-l*g)*S,t[13]=(e*_-r*w+a*g)*S,t[14]=(d*E-M*R-v*b)*S,t[15]=(c*R-f*E+h*b)*S,t):null},n.adjoint=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=n[4],u=n[5],l=n[6],s=n[7],c=n[8],f=n[9],h=n[10],m=n[11],M=n[12],d=n[13],v=n[14],p=n[15];return t[0]=u*(h*p-m*v)-f*(l*p-s*v)+d*(l*m-s*h),t[1]=-(r*(h*p-m*v)-f*(a*p-o*v)+d*(a*m-o*h)),t[2]=r*(l*p-s*v)-u*(a*p-o*v)+d*(a*s-o*l),t[3]=-(r*(l*m-s*h)-u*(a*m-o*h)+f*(a*s-o*l)),t[4]=-(i*(h*p-m*v)-c*(l*p-s*v)+M*(l*m-s*h)),t[5]=e*(h*p-m*v)-c*(a*p-o*v)+M*(a*m-o*h),t[6]=-(e*(l*p-s*v)-i*(a*p-o*v)+M*(a*s-o*l)),t[7]=e*(l*m-s*h)-i*(a*m-o*h)+c*(a*s-o*l),t[8]=i*(f*p-m*d)-c*(u*p-s*d)+M*(u*m-s*f),t[9]=-(e*(f*p-m*d)-c*(r*p-o*d)+M*(r*m-o*f)),t[10]=e*(u*p-s*d)-i*(r*p-o*d)+M*(r*s-o*u),t[11]=-(e*(u*m-s*f)-i*(r*m-o*f)+c*(r*s-o*u)),t[12]=-(i*(f*v-h*d)-c*(u*v-l*d)+M*(u*h-l*f)),t[13]=e*(f*v-h*d)-c*(r*v-a*d)+M*(r*h-a*f),t[14]=-(e*(u*v-l*d)-i*(r*v-a*d)+M*(r*l-a*u)),t[15]=e*(u*h-l*f)-i*(r*h-a*f)+c*(r*l-a*u),t},n.determinant=function(t){var n=t[0],e=t[1],r=t[2],a=t[3],o=t[4],i=t[5],u=t[6],l=t[7],s=t[8],c=t[9],f=t[10],h=t[11],m=t[12],M=t[13],d=t[14],v=t[15];return(n*i-e*o)*(f*v-h*d)-(n*u-r*o)*(c*v-h*M)+(n*l-a*o)*(c*d-f*M)+(e*u-r*i)*(s*v-h*m)-(e*l-a*i)*(s*d-f*m)+(r*l-a*u)*(s*M-c*m)},n.multiply=r,n.translate=function(t,n,e){var r=e[0],a=e[1],o=e[2],i=void 0,u=void 0,l=void 0,s=void 0,c=void 0,f=void 0,h=void 0,m=void 0,M=void 0,d=void 0,v=void 0,p=void 0;return n===t?(t[12]=n[0]*r+n[4]*a+n[8]*o+n[12],t[13]=n[1]*r+n[5]*a+n[9]*o+n[13],t[14]=n[2]*r+n[6]*a+n[10]*o+n[14],t[15]=n[3]*r+n[7]*a+n[11]*o+n[15]):(i=n[0],u=n[1],l=n[2],s=n[3],c=n[4],f=n[5],h=n[6],m=n[7],M=n[8],d=n[9],v=n[10],p=n[11],t[0]=i,t[1]=u,t[2]=l,t[3]=s,t[4]=c,t[5]=f,t[6]=h,t[7]=m,t[8]=M,t[9]=d,t[10]=v,t[11]=p,t[12]=i*r+c*a+M*o+n[12],t[13]=u*r+f*a+d*o+n[13],t[14]=l*r+h*a+v*o+n[14],t[15]=s*r+m*a+p*o+n[15]),t},n.scale=function(t,n,e){var r=e[0],a=e[1],o=e[2];return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=n[3]*r,t[4]=n[4]*a,t[5]=n[5]*a,t[6]=n[6]*a,t[7]=n[7]*a,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=n[11]*o,t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],t},n.rotate=function(t,n,e,r){var a=r[0],i=r[1],u=r[2],l=Math.sqrt(a*a+i*i+u*u),s=void 0,c=void 0,f=void 0,h=void 0,m=void 0,M=void 0,d=void 0,v=void 0,p=void 0,b=void 0,E=void 0,A=void 0,R=void 0,x=void 0,y=void 0,g=void 0,w=void 0,T=void 0,_=void 0,P=void 0,I=void 0,S=void 0,O=void 0,L=void 0;return Math.abs(l)<o.EPSILON?null:(l=1/l,a*=l,i*=l,u*=l,s=Math.sin(e),c=Math.cos(e),f=1-c,h=n[0],m=n[1],M=n[2],d=n[3],v=n[4],p=n[5],b=n[6],E=n[7],A=n[8],R=n[9],x=n[10],y=n[11],g=a*a*f+c,w=i*a*f+u*s,T=u*a*f-i*s,_=a*i*f-u*s,P=i*i*f+c,I=u*i*f+a*s,S=a*u*f+i*s,O=i*u*f-a*s,L=u*u*f+c,t[0]=h*g+v*w+A*T,t[1]=m*g+p*w+R*T,t[2]=M*g+b*w+x*T,t[3]=d*g+E*w+y*T,t[4]=h*_+v*P+A*I,t[5]=m*_+p*P+R*I,t[6]=M*_+b*P+x*I,t[7]=d*_+E*P+y*I,t[8]=h*S+v*O+A*L,t[9]=m*S+p*O+R*L,t[10]=M*S+b*O+x*L,t[11]=d*S+E*O+y*L,n!==t&&(t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t)},n.rotateX=function(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[4],i=n[5],u=n[6],l=n[7],s=n[8],c=n[9],f=n[10],h=n[11];return n!==t&&(t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[4]=o*a+s*r,t[5]=i*a+c*r,t[6]=u*a+f*r,t[7]=l*a+h*r,t[8]=s*a-o*r,t[9]=c*a-i*r,t[10]=f*a-u*r,t[11]=h*a-l*r,t},n.rotateY=function(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],l=n[3],s=n[8],c=n[9],f=n[10],h=n[11];return n!==t&&(t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a-s*r,t[1]=i*a-c*r,t[2]=u*a-f*r,t[3]=l*a-h*r,t[8]=o*r+s*a,t[9]=i*r+c*a,t[10]=u*r+f*a,t[11]=l*r+h*a,t},n.rotateZ=function(t,n,e){var r=Math.sin(e),a=Math.cos(e),o=n[0],i=n[1],u=n[2],l=n[3],s=n[4],c=n[5],f=n[6],h=n[7];return n!==t&&(t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15]),t[0]=o*a+s*r,t[1]=i*a+c*r,t[2]=u*a+f*r,t[3]=l*a+h*r,t[4]=s*a-o*r,t[5]=c*a-i*r,t[6]=f*a-u*r,t[7]=h*a-l*r,t},n.fromTranslation=function(t,n){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t},n.fromScaling=function(t,n){return t[0]=n[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=n[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=n[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotation=function(t,n,e){var r=e[0],a=e[1],i=e[2],u=Math.sqrt(r*r+a*a+i*i),l=void 0,s=void 0,c=void 0;return Math.abs(u)<o.EPSILON?null:(u=1/u,r*=u,a*=u,i*=u,l=Math.sin(n),s=Math.cos(n),c=1-s,t[0]=r*r*c+s,t[1]=a*r*c+i*l,t[2]=i*r*c-a*l,t[3]=0,t[4]=r*a*c-i*l,t[5]=a*a*c+s,t[6]=i*a*c+r*l,t[7]=0,t[8]=r*i*c+a*l,t[9]=a*i*c-r*l,t[10]=i*i*c+s,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)},n.fromXRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=e,t[7]=0,t[8]=0,t[9]=-e,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromYRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=0,t[2]=-e,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=e,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromZRotation=function(t,n){var e=Math.sin(n),r=Math.cos(n);return t[0]=r,t[1]=e,t[2]=0,t[3]=0,t[4]=-e,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.fromRotationTranslation=function(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=r+r,l=a+a,s=o+o,c=r*u,f=r*l,h=r*s,m=a*l,M=a*s,d=o*s,v=i*u,p=i*l,b=i*s;return t[0]=1-(m+d),t[1]=f+b,t[2]=h-p,t[3]=0,t[4]=f-b,t[5]=1-(c+d),t[6]=M+v,t[7]=0,t[8]=h+p,t[9]=M-v,t[10]=1-(c+m),t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.getTranslation=function(t,n){return t[0]=n[12],t[1]=n[13],t[2]=n[14],t},n.getScaling=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[4],i=n[5],u=n[6],l=n[8],s=n[9],c=n[10];return t[0]=Math.sqrt(e*e+r*r+a*a),t[1]=Math.sqrt(o*o+i*i+u*u),t[2]=Math.sqrt(l*l+s*s+c*c),t},n.getRotation=function(t,n){var e=n[0]+n[5]+n[10],r=0;return e>0?(r=2*Math.sqrt(e+1),t[3]=.25*r,t[0]=(n[6]-n[9])/r,t[1]=(n[8]-n[2])/r,t[2]=(n[1]-n[4])/r):n[0]>n[5]&n[0]>n[10]?(r=2*Math.sqrt(1+n[0]-n[5]-n[10]),t[3]=(n[6]-n[9])/r,t[0]=.25*r,t[1]=(n[1]+n[4])/r,t[2]=(n[8]+n[2])/r):n[5]>n[10]?(r=2*Math.sqrt(1+n[5]-n[0]-n[10]),t[3]=(n[8]-n[2])/r,t[0]=(n[1]+n[4])/r,t[1]=.25*r,t[2]=(n[6]+n[9])/r):(r=2*Math.sqrt(1+n[10]-n[0]-n[5]),t[3]=(n[1]-n[4])/r,t[0]=(n[8]+n[2])/r,t[1]=(n[6]+n[9])/r,t[2]=.25*r),t},n.fromRotationTranslationScale=function(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=n[3],l=a+a,s=o+o,c=i+i,f=a*l,h=a*s,m=a*c,M=o*s,d=o*c,v=i*c,p=u*l,b=u*s,E=u*c,A=r[0],R=r[1],x=r[2];return t[0]=(1-(M+v))*A,t[1]=(h+E)*A,t[2]=(m-b)*A,t[3]=0,t[4]=(h-E)*R,t[5]=(1-(f+v))*R,t[6]=(d+p)*R,t[7]=0,t[8]=(m+b)*x,t[9]=(d-p)*x,t[10]=(1-(f+M))*x,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t},n.fromRotationTranslationScaleOrigin=function(t,n,e,r,a){var o=n[0],i=n[1],u=n[2],l=n[3],s=o+o,c=i+i,f=u+u,h=o*s,m=o*c,M=o*f,d=i*c,v=i*f,p=u*f,b=l*s,E=l*c,A=l*f,R=r[0],x=r[1],y=r[2],g=a[0],w=a[1],T=a[2];return t[0]=(1-(d+p))*R,t[1]=(m+A)*R,t[2]=(M-E)*R,t[3]=0,t[4]=(m-A)*x,t[5]=(1-(h+p))*x,t[6]=(v+b)*x,t[7]=0,t[8]=(M+E)*y,t[9]=(v-b)*y,t[10]=(1-(h+d))*y,t[11]=0,t[12]=e[0]+g-(t[0]*g+t[4]*w+t[8]*T),t[13]=e[1]+w-(t[1]*g+t[5]*w+t[9]*T),t[14]=e[2]+T-(t[2]*g+t[6]*w+t[10]*T),t[15]=1,t},n.fromQuat=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e+e,u=r+r,l=a+a,s=e*i,c=r*i,f=r*u,h=a*i,m=a*u,M=a*l,d=o*i,v=o*u,p=o*l;return t[0]=1-f-M,t[1]=c+p,t[2]=h-v,t[3]=0,t[4]=c-p,t[5]=1-s-M,t[6]=m+d,t[7]=0,t[8]=h+v,t[9]=m-d,t[10]=1-s-f,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t},n.frustum=function(t,n,e,r,a,o,i){var u=1/(e-n),l=1/(a-r),s=1/(o-i);return t[0]=2*o*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*o*l,t[6]=0,t[7]=0,t[8]=(e+n)*u,t[9]=(a+r)*l,t[10]=(i+o)*s,t[11]=-1,t[12]=0,t[13]=0,t[14]=i*o*2*s,t[15]=0,t},n.perspective=function(t,n,e,r,a){var o=1/Math.tan(n/2),i=1/(r-a);return t[0]=o/e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=o,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=(a+r)*i,t[11]=-1,t[12]=0,t[13]=0,t[14]=2*a*r*i,t[15]=0,t},n.perspectiveFromFieldOfView=function(t,n,e,r){var a=Math.tan(n.upDegrees*Math.PI/180),o=Math.tan(n.downDegrees*Math.PI/180),i=Math.tan(n.leftDegrees*Math.PI/180),u=Math.tan(n.rightDegrees*Math.PI/180),l=2/(i+u),s=2/(a+o);return t[0]=l,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=s,t[6]=0,t[7]=0,t[8]=-(i-u)*l*.5,t[9]=(a-o)*s*.5,t[10]=r/(e-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*e/(e-r),t[15]=0,t},n.ortho=function(t,n,e,r,a,o,i){var u=1/(n-e),l=1/(r-a),s=1/(o-i);return t[0]=-2*u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*l,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*s,t[11]=0,t[12]=(n+e)*u,t[13]=(a+r)*l,t[14]=(i+o)*s,t[15]=1,t},n.lookAt=function(t,n,e,r){var a=void 0,i=void 0,u=void 0,l=void 0,s=void 0,c=void 0,f=void 0,h=void 0,m=void 0,M=void 0,d=n[0],v=n[1],p=n[2],b=r[0],E=r[1],A=r[2],R=e[0],x=e[1],y=e[2];return Math.abs(d-R)<o.EPSILON&&Math.abs(v-x)<o.EPSILON&&Math.abs(p-y)<o.EPSILON?mat4.identity(t):(f=d-R,h=v-x,m=p-y,M=1/Math.sqrt(f*f+h*h+m*m),f*=M,h*=M,m*=M,a=E*m-A*h,i=A*f-b*m,u=b*h-E*f,(M=Math.sqrt(a*a+i*i+u*u))?(a*=M=1/M,i*=M,u*=M):(a=0,i=0,u=0),l=h*u-m*i,s=m*a-f*u,c=f*i-h*a,(M=Math.sqrt(l*l+s*s+c*c))?(l*=M=1/M,s*=M,c*=M):(l=0,s=0,c=0),t[0]=a,t[1]=l,t[2]=f,t[3]=0,t[4]=i,t[5]=s,t[6]=h,t[7]=0,t[8]=u,t[9]=c,t[10]=m,t[11]=0,t[12]=-(a*d+i*v+u*p),t[13]=-(l*d+s*v+c*p),t[14]=-(f*d+h*v+m*p),t[15]=1,t)},n.targetTo=function(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=r[0],l=r[1],s=r[2],c=a-e[0],f=o-e[1],h=i-e[2],m=c*c+f*f+h*h;m>0&&(c*=m=1/Math.sqrt(m),f*=m,h*=m);var M=l*h-s*f,d=s*c-u*h,v=u*f-l*c;return t[0]=M,t[1]=d,t[2]=v,t[3]=0,t[4]=f*v-h*d,t[5]=h*M-c*v,t[6]=c*d-f*M,t[7]=0,t[8]=c,t[9]=f,t[10]=h,t[11]=0,t[12]=a,t[13]=o,t[14]=i,t[15]=1,t},n.str=function(t){return"mat4("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+", "+t[4]+", "+t[5]+", "+t[6]+", "+t[7]+", "+t[8]+", "+t[9]+", "+t[10]+", "+t[11]+", "+t[12]+", "+t[13]+", "+t[14]+", "+t[15]+")"},n.frob=function(t){return Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2)+Math.pow(t[2],2)+Math.pow(t[3],2)+Math.pow(t[4],2)+Math.pow(t[5],2)+Math.pow(t[6],2)+Math.pow(t[7],2)+Math.pow(t[8],2)+Math.pow(t[9],2)+Math.pow(t[10],2)+Math.pow(t[11],2)+Math.pow(t[12],2)+Math.pow(t[13],2)+Math.pow(t[14],2)+Math.pow(t[15],2))},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t[2]=n[2]+e[2],t[3]=n[3]+e[3],t[4]=n[4]+e[4],t[5]=n[5]+e[5],t[6]=n[6]+e[6],t[7]=n[7]+e[7],t[8]=n[8]+e[8],t[9]=n[9]+e[9],t[10]=n[10]+e[10],t[11]=n[11]+e[11],t[12]=n[12]+e[12],t[13]=n[13]+e[13],t[14]=n[14]+e[14],t[15]=n[15]+e[15],t},n.subtract=a,n.multiplyScalar=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t[2]=n[2]*e,t[3]=n[3]*e,t[4]=n[4]*e,t[5]=n[5]*e,t[6]=n[6]*e,t[7]=n[7]*e,t[8]=n[8]*e,t[9]=n[9]*e,t[10]=n[10]*e,t[11]=n[11]*e,t[12]=n[12]*e,t[13]=n[13]*e,t[14]=n[14]*e,t[15]=n[15]*e,t},n.multiplyScalarAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t[2]=n[2]+e[2]*r,t[3]=n[3]+e[3]*r,t[4]=n[4]+e[4]*r,t[5]=n[5]+e[5]*r,t[6]=n[6]+e[6]*r,t[7]=n[7]+e[7]*r,t[8]=n[8]+e[8]*r,t[9]=n[9]+e[9]*r,t[10]=n[10]+e[10]*r,t[11]=n[11]+e[11]*r,t[12]=n[12]+e[12]*r,t[13]=n[13]+e[13]*r,t[14]=n[14]+e[14]*r,t[15]=n[15]+e[15]*r,t},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]&&t[2]===n[2]&&t[3]===n[3]&&t[4]===n[4]&&t[5]===n[5]&&t[6]===n[6]&&t[7]===n[7]&&t[8]===n[8]&&t[9]===n[9]&&t[10]===n[10]&&t[11]===n[11]&&t[12]===n[12]&&t[13]===n[13]&&t[14]===n[14]&&t[15]===n[15]},n.equals=function(t,n){var e=t[0],r=t[1],a=t[2],i=t[3],u=t[4],l=t[5],s=t[6],c=t[7],f=t[8],h=t[9],m=t[10],M=t[11],d=t[12],v=t[13],p=t[14],b=t[15],E=n[0],A=n[1],R=n[2],x=n[3],y=n[4],g=n[5],w=n[6],T=n[7],_=n[8],P=n[9],I=n[10],S=n[11],O=n[12],L=n[13],N=n[14],U=n[15];return Math.abs(e-E)<=o.EPSILON*Math.max(1,Math.abs(e),Math.abs(E))&&Math.abs(r-A)<=o.EPSILON*Math.max(1,Math.abs(r),Math.abs(A))&&Math.abs(a-R)<=o.EPSILON*Math.max(1,Math.abs(a),Math.abs(R))&&Math.abs(i-x)<=o.EPSILON*Math.max(1,Math.abs(i),Math.abs(x))&&Math.abs(u-y)<=o.EPSILON*Math.max(1,Math.abs(u),Math.abs(y))&&Math.abs(l-g)<=o.EPSILON*Math.max(1,Math.abs(l),Math.abs(g))&&Math.abs(s-w)<=o.EPSILON*Math.max(1,Math.abs(s),Math.abs(w))&&Math.abs(c-T)<=o.EPSILON*Math.max(1,Math.abs(c),Math.abs(T))&&Math.abs(f-_)<=o.EPSILON*Math.max(1,Math.abs(f),Math.abs(_))&&Math.abs(h-P)<=o.EPSILON*Math.max(1,Math.abs(h),Math.abs(P))&&Math.abs(m-I)<=o.EPSILON*Math.max(1,Math.abs(m),Math.abs(I))&&Math.abs(M-S)<=o.EPSILON*Math.max(1,Math.abs(M),Math.abs(S))&&Math.abs(d-O)<=o.EPSILON*Math.max(1,Math.abs(d),Math.abs(O))&&Math.abs(v-L)<=o.EPSILON*Math.max(1,Math.abs(v),Math.abs(L))&&Math.abs(p-N)<=o.EPSILON*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(b-U)<=o.EPSILON*Math.max(1,Math.abs(b),Math.abs(U))};var o=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}(e(0));n.mul=r,n.sub=a},function(t,n,e){"use strict";function r(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}function a(){var t=new s.ARRAY_TYPE(4);return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t}function o(t,n,e){e*=.5;var r=Math.sin(e);return t[0]=r*n[0],t[1]=r*n[1],t[2]=r*n[2],t[3]=Math.cos(e),t}function i(t,n,e){var r=n[0],a=n[1],o=n[2],i=n[3],u=e[0],l=e[1],s=e[2],c=e[3];return t[0]=r*c+i*u+a*s-o*l,t[1]=a*c+i*l+o*u-r*s,t[2]=o*c+i*s+r*l-a*u,t[3]=i*c-r*u-a*l-o*s,t}function u(t,n,e,r){var a=n[0],o=n[1],i=n[2],u=n[3],l=e[0],s=e[1],c=e[2],f=e[3],h=void 0,m=void 0,M=void 0,d=void 0,v=void 0;return(m=a*l+o*s+i*c+u*f)<0&&(m=-m,l=-l,s=-s,c=-c,f=-f),1-m>1e-6?(h=Math.acos(m),M=Math.sin(h),d=Math.sin((1-r)*h)/M,v=Math.sin(r*h)/M):(d=1-r,v=r),t[0]=d*a+v*l,t[1]=d*o+v*s,t[2]=d*i+v*c,t[3]=d*u+v*f,t}function l(t,n){var e=n[0]+n[4]+n[8],r=void 0;if(e>0)r=Math.sqrt(e+1),t[3]=.5*r,r=.5/r,t[0]=(n[5]-n[7])*r,t[1]=(n[6]-n[2])*r,t[2]=(n[1]-n[3])*r;else{var a=0;n[4]>n[0]&&(a=1),n[8]>n[3*a+a]&&(a=2);var o=(a+1)%3,i=(a+2)%3;r=Math.sqrt(n[3*a+a]-n[3*o+o]-n[3*i+i]+1),t[a]=.5*r,r=.5/r,t[3]=(n[3*o+i]-n[3*i+o])*r,t[o]=(n[3*o+a]+n[3*a+o])*r,t[i]=(n[3*i+a]+n[3*a+i])*r}return t}Object.defineProperty(n,"__esModule",{value:!0}),n.setAxes=n.sqlerp=n.rotationTo=n.equals=n.exactEquals=n.normalize=n.sqrLen=n.squaredLength=n.len=n.length=n.lerp=n.dot=n.scale=n.mul=n.add=n.set=n.copy=n.fromValues=n.clone=void 0,n.create=a,n.identity=function(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=1,t},n.setAxisAngle=o,n.getAxisAngle=function(t,n){var e=2*Math.acos(n[3]),r=Math.sin(e/2);return 0!=r?(t[0]=n[0]/r,t[1]=n[1]/r,t[2]=n[2]/r):(t[0]=1,t[1]=0,t[2]=0),e},n.multiply=i,n.rotateX=function(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),l=Math.cos(e);return t[0]=r*l+i*u,t[1]=a*l+o*u,t[2]=o*l-a*u,t[3]=i*l-r*u,t},n.rotateY=function(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),l=Math.cos(e);return t[0]=r*l-o*u,t[1]=a*l+i*u,t[2]=o*l+r*u,t[3]=i*l-a*u,t},n.rotateZ=function(t,n,e){e*=.5;var r=n[0],a=n[1],o=n[2],i=n[3],u=Math.sin(e),l=Math.cos(e);return t[0]=r*l+a*u,t[1]=a*l-r*u,t[2]=o*l+i*u,t[3]=i*l-o*u,t},n.calculateW=function(t,n){var e=n[0],r=n[1],a=n[2];return t[0]=e,t[1]=r,t[2]=a,t[3]=Math.sqrt(Math.abs(1-e*e-r*r-a*a)),t},n.slerp=u,n.invert=function(t,n){var e=n[0],r=n[1],a=n[2],o=n[3],i=e*e+r*r+a*a+o*o,u=i?1/i:0;return t[0]=-e*u,t[1]=-r*u,t[2]=-a*u,t[3]=o*u,t},n.conjugate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t[2]=-n[2],t[3]=n[3],t},n.fromMat3=l,n.fromEuler=function(t,n,e,r){var a=.5*Math.PI/180;n*=a,e*=a,r*=a;var o=Math.sin(n),i=Math.cos(n),u=Math.sin(e),l=Math.cos(e),s=Math.sin(r),c=Math.cos(r);return t[0]=o*l*c-i*u*s,t[1]=i*u*c+o*l*s,t[2]=i*l*s-o*u*c,t[3]=i*l*c+o*u*s,t},n.str=function(t){return"quat("+t[0]+", "+t[1]+", "+t[2]+", "+t[3]+")"};var s=r(e(0)),c=r(e(1)),f=r(e(2)),h=r(e(3)),m=(n.clone=h.clone,n.fromValues=h.fromValues,n.copy=h.copy,n.set=h.set,n.add=h.add,n.mul=i,n.scale=h.scale,n.dot=h.dot,n.lerp=h.lerp,n.length=h.length),M=(n.len=m,n.squaredLength=h.squaredLength),d=(n.sqrLen=M,n.normalize=h.normalize);n.exactEquals=h.exactEquals,n.equals=h.equals,n.rotationTo=function(){var t=f.create(),n=f.fromValues(1,0,0),e=f.fromValues(0,1,0);return function(r,a,i){var u=f.dot(a,i);return u<-.999999?(f.cross(t,n,a),f.len(t)<1e-6&&f.cross(t,e,a),f.normalize(t,t),o(r,t,Math.PI),r):u>.999999?(r[0]=0,r[1]=0,r[2]=0,r[3]=1,r):(f.cross(t,a,i),r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=1+u,d(r,r))}}(),n.sqlerp=function(){var t=a(),n=a();return function(e,r,a,o,i,l){return u(t,r,i,l),u(n,a,o,l),u(e,t,n,2*l*(1-l)),e}}(),n.setAxes=function(){var t=c.create();return function(n,e,r,a){return t[0]=r[0],t[3]=r[1],t[6]=r[2],t[1]=a[0],t[4]=a[1],t[7]=a[2],t[2]=-e[0],t[5]=-e[1],t[8]=-e[2],d(n,l(n,t))}}()},function(t,n,e){"use strict";function r(){var t=new f.ARRAY_TYPE(2);return t[0]=0,t[1]=0,t}function a(t,n,e){return t[0]=n[0]-e[0],t[1]=n[1]-e[1],t}function o(t,n,e){return t[0]=n[0]*e[0],t[1]=n[1]*e[1],t}function i(t,n,e){return t[0]=n[0]/e[0],t[1]=n[1]/e[1],t}function u(t,n){var e=n[0]-t[0],r=n[1]-t[1];return Math.sqrt(e*e+r*r)}function l(t,n){var e=n[0]-t[0],r=n[1]-t[1];return e*e+r*r}function s(t){var n=t[0],e=t[1];return Math.sqrt(n*n+e*e)}function c(t){var n=t[0],e=t[1];return n*n+e*e}Object.defineProperty(n,"__esModule",{value:!0}),n.forEach=n.sqrLen=n.sqrDist=n.dist=n.div=n.mul=n.sub=n.len=void 0,n.create=r,n.clone=function(t){var n=new f.ARRAY_TYPE(2);return n[0]=t[0],n[1]=t[1],n},n.fromValues=function(t,n){var e=new f.ARRAY_TYPE(2);return e[0]=t,e[1]=n,e},n.copy=function(t,n){return t[0]=n[0],t[1]=n[1],t},n.set=function(t,n,e){return t[0]=n,t[1]=e,t},n.add=function(t,n,e){return t[0]=n[0]+e[0],t[1]=n[1]+e[1],t},n.subtract=a,n.multiply=o,n.divide=i,n.ceil=function(t,n){return t[0]=Math.ceil(n[0]),t[1]=Math.ceil(n[1]),t},n.floor=function(t,n){return t[0]=Math.floor(n[0]),t[1]=Math.floor(n[1]),t},n.min=function(t,n,e){return t[0]=Math.min(n[0],e[0]),t[1]=Math.min(n[1],e[1]),t},n.max=function(t,n,e){return t[0]=Math.max(n[0],e[0]),t[1]=Math.max(n[1],e[1]),t},n.round=function(t,n){return t[0]=Math.round(n[0]),t[1]=Math.round(n[1]),t},n.scale=function(t,n,e){return t[0]=n[0]*e,t[1]=n[1]*e,t},n.scaleAndAdd=function(t,n,e,r){return t[0]=n[0]+e[0]*r,t[1]=n[1]+e[1]*r,t},n.distance=u,n.squaredDistance=l,n.length=s,n.squaredLength=c,n.negate=function(t,n){return t[0]=-n[0],t[1]=-n[1],t},n.inverse=function(t,n){return t[0]=1/n[0],t[1]=1/n[1],t},n.normalize=function(t,n){var e=n[0],r=n[1],a=e*e+r*r;return a>0&&(a=1/Math.sqrt(a),t[0]=n[0]*a,t[1]=n[1]*a),t},n.dot=function(t,n){return t[0]*n[0]+t[1]*n[1]},n.cross=function(t,n,e){var r=n[0]*e[1]-n[1]*e[0];return t[0]=t[1]=0,t[2]=r,t},n.lerp=function(t,n,e,r){var a=n[0],o=n[1];return t[0]=a+r*(e[0]-a),t[1]=o+r*(e[1]-o),t},n.random=function(t,n){n=n||1;var e=2*f.RANDOM()*Math.PI;return t[0]=Math.cos(e)*n,t[1]=Math.sin(e)*n,t},n.transformMat2=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[2]*a,t[1]=e[1]*r+e[3]*a,t},n.transformMat2d=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[2]*a+e[4],t[1]=e[1]*r+e[3]*a+e[5],t},n.transformMat3=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[3]*a+e[6],t[1]=e[1]*r+e[4]*a+e[7],t},n.transformMat4=function(t,n,e){var r=n[0],a=n[1];return t[0]=e[0]*r+e[4]*a+e[12],t[1]=e[1]*r+e[5]*a+e[13],t},n.str=function(t){return"vec2("+t[0]+", "+t[1]+")"},n.exactEquals=function(t,n){return t[0]===n[0]&&t[1]===n[1]},n.equals=function(t,n){var e=t[0],r=t[1],a=n[0],o=n[1];return Math.abs(e-a)<=f.EPSILON*Math.max(1,Math.abs(e),Math.abs(a))&&Math.abs(r-o)<=f.EPSILON*Math.max(1,Math.abs(r),Math.abs(o))};var f=function(t){if(t&&t.__esModule)return t;var n={};if(null!=t)for(var e in t)Object.prototype.hasOwnProperty.call(t,e)&&(n[e]=t[e]);return n.default=t,n}(e(0));n.len=s,n.sub=a,n.mul=o,n.div=i,n.dist=u,n.sqrDist=l,n.sqrLen=c,n.forEach=function(){var t=r();return function(n,e,r,a,o,i){var u=void 0,l=void 0;for(e||(e=2),r||(r=0),l=a?Math.min(a*e+r,n.length):n.length,u=r;u<l;u+=e)t[0]=n[u],t[1]=n[u+1],o(t,t,i),n[u]=t[0],n[u+1]=t[1];return n}}()}])})},{}],6:[function(t,n,e){"use strict";function r(){function t(t){for(let n=R.length-1;n>=0;n--){let e=R[n],r=t.indexOf(e);r<0&&(o.disableVertexAttribArray(e),R.splice(r,1))}for(let n=0;n<t.length;n++){let e=t[n];o.enableVertexAttribArray(e),R.push(e)}let n=Object.keys(x);for(let e=0;e<n.length;e++){let r=n[e];t.indexOf(r)<0&&x[r]>0&&(o.vertexAttribDivisor(r,0),x[r]=0)}}function n(t,n){for(let e=0;e<t.length;e++){let r=t[e];x.hasOwnProperty(r)?x[r]!==n&&(o.vertexAttribDivisor(r,n),x[r]=n):(o.vertexAttribDivisor(r,n),x[r]=n)}}function e(t,n,e,a){if(p){let i=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,i);let u=new Float32Array(16*e.length);for(let t=0;t<e.length;t++){let n=e[t];for(let e=0;e<16;e++)u[16*t+e]=n[e]}o.bufferData(o.ARRAY_BUFFER,u,o.STATIC_DRAW);let l=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,l);let s=new Float32Array(4*n.length);for(let t=0;t<n.length;t++){let e=n[t];for(let n=0;n<4;n++)s[4*t+n]=e[n]}o.bufferData(o.ARRAY_BUFFER,s,o.STATIC_DRAW),M.push({mesh:t,modelBufferId:i,instanceCount:e.length,colorBufferId:l,textureName:a,programId:r.INSTACE_PROGRAM})}else for(let o=0;o<e.length;o++){let i=s.clone(e[o]),u=l.clone(n[o]);M.push({mesh:t,transform:i,color:u,textureName:a,programId:r.DEFAULT_PROGRAM})}}let i=this,c=null,f=null,h={},m=null,M=[],d=[],v={},p=!1,b={r:.5,g:.5,b:.5,a:1},E={width:0,height:0,element:void 0},A=s.create();this.translation=u.create(),this.scale=u.fromValues(1,1,1),this.rotation=s.create();let R=[],x={};this.buildShader=function(t,n){let e=o.createShader(n);return o.shaderSource(e,t),o.compileShader(e),o.getShaderParameter(e,o.COMPILE_STATUS)?e:(console.log(o.getShaderInfoLog(e)),null)},this.loadShaders=function(t,n,e){let a=e||"_default";o.useProgram(null);let u=i.buildShader(t,o.VERTEX_SHADER),l=i.buildShader(n,o.FRAGMENT_SHADER);if(u&&l){let t=o.createProgram();if(o.attachShader(t,u),o.attachShader(t,l),o.linkProgram(t),!o.getProgramParameter(t,o.LINK_STATUS))return void console.log("Error initing shader program");o.useProgram(t);let n=o.getAttribLocation(t,"position"),e=o.getAttribLocation(t,"normal"),i=o.getAttribLocation(t,"texcoord"),s=o.getAttribLocation(t,"model"),m=o.getAttribLocation(t,"colorInstance"),M=[];n>=0&&M.push(n),e>=0&&M.push(e),i>=0&&M.push(i),m>=0&&M.push(m);let d=[];s>=0&&(M.push(s),d.push(s),M.push(s+1),d.push(s+1),M.push(s+2),d.push(s+2),M.push(s+3),d.push(s+3));let v={program:t,positionVertex:n,normalVertex:e,texcoord:i,model:s,colorInstance:m,modelViewProjectionUniform:o.getUniformLocation(t,"modelViewProjection"),modelViewUniform:o.getUniformLocation(t,"modelView"),normalMatrixUniform:o.getUniformLocation(t,"normalMatrix"),lightPositionUniform:o.getUniformLocation(t,"lightPosition"),colorUniform:o.getUniformLocation(t,"color"),useTextureUniform:o.getUniformLocation(t,"useTexture"),unlitUniform:o.getUniformLocation(t,"unlit"),texSamplerUniform:o.getUniformLocation(t,"texSampler"),id:a,attribs:M,modelAttribs:d,isInstance:a===r.INSTACE_PROGRAM};a===r.DEFAULT_PROGRAM?c=v:a===r.INSTACE_PROGRAM&&(f=v),h[a]=v,o.useProgram(null),console.log("succesfully loaded shaders")}else console.log("Error loading shaders")},this.uploadBuffer=function(t){let n=o.createBuffer();return o.bindBuffer(o.ARRAY_BUFFER,n),o.bufferData(o.ARRAY_BUFFER,new Float32Array(t),o.STATIC_DRAW),n},this.uploadMesh=function(t,n){if(!t){throw"Vertices can not be null"}if(!n){throw"Elements can not be null"}let e=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,e),t.constructor===Float32Array?o.bufferData(o.ARRAY_BUFFER,t,o.STATIC_DRAW):o.bufferData(o.ARRAY_BUFFER,new Float32Array(t),o.STATIC_DRAW);let r=o.createBuffer();return o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,r),n.constructor!==Uint16Array?o.bufferData(o.ELEMENT_ARRAY_BUFFER,new Uint16Array(n),o.STATIC_DRAW):o.bufferData(o.ELEMENT_ARRAY_BUFFER,n,o.STATIC_DRAW),{verticesBufferId:e,elementsBufferId:r,count:n.length}},this.addObject=function(t,n,e,a,o){let u=i.uploadMesh(t,n),c=s.create();a&&s.copy(c,a);let f=l.fromValues(.8,.8,.8,1);e||(f=l.clone(e)),M.push({mesh:u,transform:c,color:e,textureName:o,programId:r.DEFAULT_PROGRAM})},this.addInstances=function(t,n,r,a){if(!r){throw"Matrices can not be null"}if(!n){throw"Colors can not be null"}n.length===r.length?e(t,n,r,a):console.log("Colors and instances must have same length")},this.addObjectInstances=function(t,n,r,a,o){if(!a){throw"Matrices can not be null"}if(!r){throw"Colors can not be null"}r.length===a.length?e(i.uploadMesh(t,n),r,a,o):console.log("Colors and instances must have same length")},this.addLines=function(t,n){let e=o.createBuffer();o.bindBuffer(o.ARRAY_BUFFER,e),o.bufferData(o.ARRAY_BUFFER,new Float32Array(t),o.STATIC_DRAW),n||(n=l.fromValues(1,1,1,1)),d.push({verticesBufferId:e,count:t.length/3,vertexSize:12,color:n})},this.addTexture=function(t,n,e){let r=o.createTexture();o.bindTexture(o.TEXTURE_2D,r),o.pixelStorei(o.UNPACK_FLIP_Y_WEBGL,!0),o.texImage2D(o.TEXTURE_2D,0,o.RGBA,o.RGBA,o.UNSIGNED_BYTE,n),(e=null!==e&&void 0!==e&&e)?(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST)):(o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.LINEAR),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.LINEAR)),o.bindTexture(o.TEXTURE_2D,null),v[t]=r,i.draw()},this.clearBatches=function(){for(let t=0;t<M.length;t++){let n=M[t];o.deleteBuffer(n.verticesBufferId),o.deleteBuffer(n.elementsBufferId)}M=[]},this.draw=function(){if(o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),0==M.length&&0==d.length)return;let e=s.create(),r=A,a=s.create(),l=s.create(),f=s.create();s.perspective(a,45,E.width/E.height,.1,1e5);let p=null,b=null,R=null,x=null,y=!1;o.activeTexture(o.TEXTURE0);for(let d=0;d<M.length;d++){let E=M[d],A=null;if(E.programId){if(!h.hasOwnProperty(E.programId)){console.log("Program not found!");continue}A=h[E.programId]}else A=c;if(p!==A){t((p=A).attribs),o.useProgram(p.program);let n=u.fromValues(0,0,0);o.uniform3fv(p.lightPositionUniform,n),o.uniform1f(p.unlitUniform,0)}p.isInstance||s.copy(e,E.transform);let g=s.create();s.scale(e,e,i.scale),s.multiply(e,i.rotation,e),s.multiply(l,r,e),s.multiply(f,a,l),s.invert(g,l),s.transpose(g,g),o.uniformMatrix4fv(p.modelViewUniform,!1,l),o.uniformMatrix4fv(p.modelViewProjectionUniform,!1,f),o.uniformMatrix4fv(p.normalMatrixUniform,!1,g);if(b!==E.mesh.verticesBufferId){if(o.bindBuffer(o.ARRAY_BUFFER,E.mesh.verticesBufferId),o.vertexAttribPointer(p.positionVertex,3,o.FLOAT,!1,32,0),o.vertexAttribPointer(p.normalVertex,3,o.FLOAT,!1,32,12),o.vertexAttribPointer(p.texcoord,2,o.FLOAT,!1,32,24),p.isInstance){o.bindBuffer(o.ARRAY_BUFFER,E.modelBufferId);for(let t=0;t<4;t++)o.vertexAttribPointer(p.model+t,4,o.FLOAT,!1,64,16*t);n(p.modelAttribs,1);o.bindBuffer(o.ARRAY_BUFFER,E.colorBufferId),o.vertexAttribPointer(p.colorInstance,4,o.FLOAT,!1,16,0),n(p.colorInstance,1)}b=E.mesh.verticesBufferId}if(R!==E.mesh.elementsBufferId&&(o.bindBuffer(o.ELEMENT_ARRAY_BUFFER,E.mesh.elementsBufferId),R=E.mesh.elementsBufferId),E.textureName&&v.hasOwnProperty(E.textureName)){let t=v[E.textureName];x!==t&&(o.uniform1i(A.texSamplerUniform,0),o.bindTexture(o.TEXTURE_2D,t),o.uniform1f(p.useTextureUniform,1),t=t)}else x!==m&&(o.uniform1i(A.texSamplerUniform,0),o.bindTexture(o.TEXTURE_2D,m),o.uniform1f(p.useTextureUniform,0),x=m);p.isInstance||(E.color>=1&&y?(o.disable(o.BLEND),y=!1):E.color<1&&!y&&(o.enable(o.BLEND),y=!0),o.uniform4fv(p.colorUniform,E.color)),p.isInstance?o.drawElementsInstanced(o.TRIANGLES,E.mesh.count,o.UNSIGNED_SHORT,0,E.instanceCount):o.drawElements(o.TRIANGLES,E.mesh.count,o.UNSIGNED_SHORT,0)}o.uniform1f(p.unlitUniform,1);for(let t=0;t<d.length;t++){let n=d[t];o.uniform1i(program.texSamplerUniform,0),o.bindTexture(o.TEXTURE_2D,m),o.uniform1f(p.useTextureUniform,0),o.bindBuffer(o.ARRAY_BUFFER,n.verticesBufferId),o.vertexAttribPointer(p.positionVertex,3,o.FLOAT,!1,n.vertexSize,0),o.vertexAttribPointer(p.normalVertex,3,o.FLOAT,!1,n.vertexSize,0),o.vertexAttribPointer(p.texcoord,2,o.FLOAT,!1,n.vertexSize,0),o.drawArrays(o.LINES,0,n.count)}o.bindTexture(o.TEXTURE_2D,null),o.useProgram(null)},this.updateViewBounds=function(){let t=E.element.getBoundingClientRect();E.width=t.width,E.height=t.height},this.onResize=function(){E.element&&(i.updateViewBounds(),c&&i.draw())},this.setBackgroundColor=function(t,n,e){b.r=t,b.g=n,b.b=e,o&&o.clearColor(t,n,e,1)},this.load=function(t){if(E.element=t,o=t.getContext("webgl2"))p=!0;else if(!(o=t.getContext("webgl")))return!1;i.updateViewBounds(),window.addEventListener("resize",t=>{i.onResize()}),i.loadShaders(a.VERTEX_SHADER_SOURCE,a.FRAGMENT_SHADER_SOURCE,r.DEFAULT_PROGRAM),p&&i.loadShaders(a.INSTANCE_VERTEX_SHADER_SOURCE,a.FRAGMENT_SHADER_SOURCE,r.INSTACE_PROGRAM),o.clearColor(b.r,b.g,b.b,b.a),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),console.log("Init complete"),o.enable(o.DEPTH_TEST),m=o.createTexture(),o.bindTexture(o.TEXTURE_2D,m);let n=[];for(let t=0;t<16;t++)n.push(0);return o.texImage2D(o.TEXTURE_2D,0,o.RGBA,2,2,0,o.RGBA,o.UNSIGNED_BYTE,new Uint8Array(n)),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.bindTexture(o.TEXTURE_2D,null),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),!0},this.setViewMatrix=function(t){A=s.clone(t)},this.setScale=function(t){i.scale=u.clone(t)}}const a=t("./shaders");let o=null;const i=t("gl-matrix"),u=i.vec3,l=i.vec4,s=i.mat4;r.DEFAULT_PROGRAM="_default",r.INSTACE_PROGRAM="_instance",n.exports=r},{"./shaders":7,"gl-matrix":5}],7:[function(t,n,e){e.VERTEX_SHADER_SOURCE=`\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 texcoord;\n\nuniform highp mat4 modelView;\nuniform highp mat4 modelViewProjection;\nuniform highp mat4 normalMatrix;\nuniform vec4 color;\n\nvarying vec4 currentColor;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vTexcoord;\n\n\nvoid main (void)\n{\n    gl_Position =  modelViewProjection * vec4(position, 1.0);\n    \n    currentColor = color;\n\n    vTexcoord = texcoord;\n\n    vec4 vPosition4 = modelView * vec4(position, 1.0);\n    vPosition = vPosition4.xyz / vPosition4.w;\n    \n    vNormal = mat3(normalMatrix) * normal;\n    vNormal = normalize(vNormal);\n}\n`,e.FRAGMENT_SHADER_SOURCE=`\nprecision mediump float;\nvarying vec4 currentColor;\nvarying vec3 vNormal;\nvarying vec2 vTexcoord;\nvarying vec3 vPosition;\nuniform vec3 lightPosition;\nuniform sampler2D texSampler;\nuniform float useTexture;\nuniform float unlit;\n\nvoid main(void)\n{\n    if(unlit >0.0)\n    {\n        gl_FragColor = currentColor;\n    }\n    else\n    {\n        vec3 lightDir = normalize(lightPosition - vPosition);\n    \n        // Ambient\n        vec3 ambient = vec3(0.1);\n        float d = abs(dot(vNormal, lightDir));\n        \n        // Diffuse\n        vec3 diffuse = vec3(d);\n        \n        vec3 illumination = diffuse + ambient;\n        if(useTexture == 0.0)\n        {\n            gl_FragColor = vec4(illumination * currentColor.rgb, currentColor.a);\n            // gl_FragColor = vec4(vNormal, 1.0);\n        }\n        else\n        {\n            vec4 texel = texture2D(texSampler, vTexcoord);\n            gl_FragColor = vec4(illumination * currentColor.rgb * texel.rgb, currentColor.a);\n            \n            // gl_FragColor = vec4(vTexcoord, 0, currentColor.a);\n        }\n    }\n}\n`,e.INSTANCE_VERTEX_SHADER_SOURCE=`\nattribute vec3 position;\nattribute vec3 normal;\nattribute vec2 texcoord;\nattribute highp mat4 model;\nattribute vec4 colorInstance;\n\nuniform highp mat4 modelViewProjection;\nuniform highp mat4 modelView;\nuniform highp mat4 normalMatrix;\nuniform vec4 color;\n\nvarying vec4 currentColor;\nvarying vec3 vPosition;\nvarying vec3 vNormal;\nvarying vec2 vTexcoord;\n\n\nvoid main (void)\n{\n    gl_Position =  modelViewProjection * model * vec4(position, 1.0);\n    \n    currentColor = colorInstance;\n\n    vTexcoord = texcoord;\n\n    vec4 vPosition4 = modelView  * model * vec4(position, 1.0);\n    vPosition = vPosition4.xyz / vPosition4.w;\n    \n    vNormal = mat3(modelView) * mat3(model) * normal;\n    vNormal = normalize(vNormal);\n}\n\n`},{}],8:[function(t,n,e){"use strict";n.exports=function(){let t=this,n=new Date;this.elapsedTime=function(){let t=parseFloat(n.getTime()),e=(new Date).getTime();return((e=parseFloat(e))-t)/1e3},this.restart=function(){n=new Date},this.tick=function(n){console.log(n+" "+t.elapsedTime()),t.restart()}}},{}]},{},[1]);
